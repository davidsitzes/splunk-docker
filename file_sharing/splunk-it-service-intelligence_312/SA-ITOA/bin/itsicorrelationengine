#!/usr/bin/env bash

. itsi_common

###  ------------------------------- ###
###  Main script                     ###
###  ------------------------------- ###

declare -a residual_args
declare -a java_args
declare -a app_commands
declare -r real_script_path="$(realpath "$0")"
declare -r app_home="$(realpath "$(dirname "$real_script_path")")"
# TODO - Check whether this is ok in cygwin...
declare -r lib_dir="$(realpath "${app_home}/../lib")"
declare -a app_mainclass=("com.splunk.itsi.correlation.engine.core.CorrelationEngineSearch")

# Add to the classpath the location of user-defined classes and packages the java process depends on
declare -r app_classpath="$lib_dir/java/event_management/libs/*:$lib_dir/java/event_management/correlation_engine/*"

# java_cmd is overrode in process_args when -java-home is used
declare java_cmd=$(get_java_cmd)

# if configuration files exist, prepend their contents to $@ so it can be processed by this runner
[[ -f "$script_conf_file" ]] && set -- $(loadConfigFile "$script_conf_file") "$@"

run "$@"

