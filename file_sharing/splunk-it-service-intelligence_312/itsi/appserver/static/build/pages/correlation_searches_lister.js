webpackJsonp([10],{0:function(e,t,i){var a,n;i.p=function(){function e(){for(var e,i,a="",n=0,s=arguments.length;n<s;n++)e=arguments[n].toString(),i=e.length,i>1&&"/"==e.charAt(i-1)&&(e=e.substring(0,i-1)),a+="/"!=e.charAt(0)?"/"+e:e;if("/"!=a){var o=a.split("/"),r=o[1];if("static"==r||"modules"==r){var l=a.substring(r.length+2,a.length);a="/"+r,window.$C.BUILD_NUMBER&&(a+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(a+="."+window.$C.BUILD_PUSH_NUMBER),"app"==o[2]&&(a+=":"+t("APP_BUILD",0)),a+="/"+l}}var d=t("MRSPARKLE_ROOT_PATH","/"),c=t("DJANGO_ROOT_PATH",""),u=t("LOCALE","en-US"),p="";return p=c&&a.substring(0,c.length)===c?a.replace(c,c+"/"+u.toLowerCase()):"/"+u+a,""==d||"/"==d?p:d+p}function t(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return e("/static/app/itsi/build/pages")+"/"}(),a=[i("require/underscore"),i("util/router_utils"),i(1018),i(368),i(1019),i(1034),i(1020),i(1021),i(1032),i(1035)],n=function(e,t,i,a,n,s,o,r,l,d){var c={collection:n,model:a,rowView:s,editMenu:o,tableView:l,tableCaptionView:r,titleView:d,title:e("Correlation Searches").t(),description:e("Viewer for all Correlation Searches").t()},u=i.extend({initializeAndRenderViews:function(){this.permissions.canEditPermissions=this.model.user.hasCapability("configure_perms"),i.prototype.initializeAndRenderViews.apply(this,arguments)}});new u(c);t.start_backbone_history()}.apply(t,a),!(void 0!==n&&(e.exports=n))},1019:function(e,t,i){var a,n;a=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(148),i(368),i(256),i("shim/splunk.util")],n=function(e,t,i,a,n,s,o){var r=s.extend({model:n,_objectType:a.ITSI_OBJECT_CORRELATION_SEARCH,url:o.make_url(["custom","SA-ITOA","event_management_interface","nobody","correlation_search"].join("/")),interfaceType:"event_management_interface"});return r}.apply(t,a),!(void 0!==n&&(e.exports=n))},1020:function(e,t,i){var a,n;a=[i("require/underscore"),e,i("shim/jquery"),i("views/Base"),i("views/shared/delegates/Popdown"),i("views/shared/dialogs/TextDialog"),i("shim/splunk.util"),i("uri/route"),i("models/Base"),i("models/ACLReadOnly"),i(365),i(473),i(457)],n=function(e,t,i,a,n,s,o,r,l,d,c,u,p){var h=a.extend({moduleId:String(t.id),initialize:function(){a.prototype.initialize.apply(this,arguments)},className:"dropdown",events:{"click a.delete":function(t){t.preventDefault();var a=new s({id:"modal_delete"});a.dialogShown=function(){this.trigger("show"),e.debounce(function(){this.$(".btn-primary:first").focus()}.bind(this),0)()},a.settings.set("primaryButtonLabel",e("Delete").t()),a.settings.set("cancelButtonLabel",e("Cancel").t()),a.settings.set("titleLabel",o.sprintf(e("Delete %s").t(),this.options.objectNameSingular)),a.setText(o.sprintf(e("Are you sure you want to delete %s?").t(),"<em>"+e.escape(this.model.savedPage.get("name"))+"</em>"));var n=this.model.savedPage;a.on("click:primaryButton",function(){n.destroy().done(function(){this.model.state.set("length",this.model.state.get("length")-1)}.bind(this)).always(function(){this.collection.savedPages.trigger("refresh"),a.hide()}.bind(this)).fail(function(t){var i=o.sprintf(e("Could not delete the %s.").t(),this.options.objectNameSingular.toLowerCase()),a=new u({errorMessage:i,htmlResponse:t});a.show()}.bind(this))},this),a.on("hidden",function(){a.remove()},this),i("body").append(a.render().el),a.show()},"click a.edit-permissions":function(t){t.preventDefault();var a=this;this.model.savedPage.fetch({wait:!0,success:function(e){var t=new p({model:{document:a.model.savedPage,application:a.model.application,user:a.model.user},objectNameSingular:a.options.objectNameSingular,collection:a.collection.roles,onHiddenRemove:!0,permUrl:o.make_url(["custom","SA-ITOA","event_management_interface",e.collection._objectType,encodeURIComponent(a.model.savedPage.id),"perms"].join("/"))});i("body").append(t.render().el),t.show()},error:function(t,i){var n=o.sprintf(e("Could not fetch %s.").t(),a.options.objectNameSingular.toLowerCase()),s=new u({errorMessage:n,htmlResponse:i});s.show()}})}},render:function(){var t={_:e,savedPage:this.model.savedPage,app:this.model.application.get("app"),view:this.model.savedPage.get("title"),returnTo:encodeURIComponent(window.location.pathname),canWrite:!this.model.savedPage.hasAcl||this.model.savedPage.get("acl").can_write,modifiable:!this.model.savedPage.hasAcl||this.model.savedPage.get("acl").modifiable,savedPageLink:r.page(this.model.application.get("root"),this.model.application.get("locale"),this.model.application.get("app"),this.model.application.get("name")),savedPageId:this.model.savedPage.id,multiAlertEditUrl:this.model.savedPage.getMultiAlertEditUrl(),correlationSearchEditUrl:this.model.savedPage.getCorrelationSearchEditUrl(),isMultiKpiAlertSearch:this.model.savedPage.isMultiKpi(),canChangePerms:this.options.permissions.canEditPermissions};return this.$el.html(this.compiledTemplate(t)),this.children.popdown=new n({el:this.$el}),this},template:'\t\t\t\t\t<a class="dropdown-toggle" href="#"><%- _("Edit").t() %><span class="caret"></span></a>\t\t\t\t\t<div class="dropdown-menu dropdown-menu-narrow">\t\t\t\t\t\t<div class="arrow"></div>\t\t\t\t\t\t<% if (canWrite) { %>\t\t\t\t\t\t\t<ul class="first-group">\t\t\t\t\t\t\t<% if (isMultiKpiAlertSearch) { %> \t\t\t\t\t\t\t\t<li><a href="<%- multiAlertEditUrl %>"><%- _("By Multi-KPI Alerts Editor").t() %> </a></li>\t\t\t\t\t\t\t<%}%>\t\t\t\t\t\t\t\t<li><a href="<%- correlationSearchEditUrl %>"><%- _("By Correlation Search Editor").t() %> </a></li>\t\t\t\t\t\t\t\t<% if (canChangePerms) { %>\t\t\t\t\t\t\t\t\t<li>\t\t\t\t\t\t\t\t\t\t<a class="edit-permissions" href="#"><%- _("Edit Permissions").t() %></a>\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t<% } %>\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t<% } %>\t\t\t\t\t\t<ul class="second-group">\t\t\t\t\t\t\t<li><a href="#" class="delete"><%- _("Delete").t() %></a></li>\t\t\t\t\t\t</ul>\t\t\t\t\t</div>\t\t\t\t'});return h}.apply(t,a),!(void 0!==n&&(e.exports=n))},1021:function(e,t,i){function a(e){return e&&e.__esModule?e:{default:e}}var n,s,o=i(1022),r=a(o);n=[i("require/underscore"),e,i(846)],s=function(e,t,i){var a=i.extend({moduleId:String(t.id),tagName:"div",initialize:function(t){var a=t&&t.permissions&&t.permissions.canEditPermissions||!1;t.bulkActions=[{value:"enable-all",text:e("Enable all").t()},{value:"enable-select",text:e("Enable selected").t()},{value:"disable-all",text:e("Disable all").t()},{value:"disable-select",text:e("Disable selected").t()},{value:"delete-select",text:e("Delete selected").t()}].concat((0,r.default)(a?[{value:"bulk-perms",text:e("Edit permissions").t()}]:[])),i.prototype.initialize.apply(this,arguments)},render:function(){var e=i.prototype.render.apply(this);return e.children&&e.children.count&&e.children.count.$el.hide(),e}});return a}.apply(t,n),!(void 0!==s&&(e.exports=s))},1032:function(e,t,i){function a(e){return e&&e.__esModule?e:{default:e}}var n,s,o=i(130),r=a(o);n=[e,i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("shim/splunk.util"),i(902),i(857),i("views/shared/dialogs/TextDialog"),i(473),i(1033),i(1034)],s=function(e,t,i,a,n,s,o,l,d,c,u){var p=o.extend({moduleId:String(e.id),initialize:function(e){e.extraHeaders=[{label:t("Status").t()}],e.enableBulkActions=!0,o.prototype.initialize.apply(this,arguments),this.model.state.on("change:bulkAction",function(){this.enableDisableRows(this.model.state.get("bulkAction"))}.bind(this)),this.loadingMask=new s},batchDeleteCorrelationSearches:function(e){var t=n.make_url(["custom","SA-ITOA","event_management_interface","nobody","correlation_search"].join("/")),a=t+"?filter="+encodeURIComponent(e),s=i.ajax({url:a,type:"DELETE",dataType:"json",async:!0});return s},enableDisableRows:function(e){var a,s;if("enable-all"===e)a=this.children.rows,s=0;else{if("bulk-perms"===e){a=this.getBulkSelectionRows();var o=new c({tableRows:a,onHiddenRemove:!0,collection:this.collection,model:{application:this.model.application,savedPage:this.model.savedPage,user:this.model.user},permUrl:n.make_url(["custom","SA-ITOA","event_management_interface",this.collection.savedPages._objectType,"perms"].join("/"))});return i("body").append(o.render().el),void o.show()}if("enable-select"===e)a=this.getBulkSelectionRows(),s=0;else if("disable-all"===e)a=this.children.rows,s=1;else{if("disable-select"!==e){if("delete-select"===e){var r=new l({id:"modal_delete"});return r.setText(n.sprintf(t("Are you sure you want to delete the selected %s?").t(),this.model.savedPage.prototype.objectNamePlural.toLowerCase())),a=this.getBulkSelectionRows(),r.dialogShown=function(){this.trigger("show"),t.debounce(function(){this.$(".btn-primary:first").focus()}.bind(this),0)()},r.settings.set("primaryButtonLabel",t("Delete").t()),r.settings.set("primaryButtonProgressLabel",t("Deleting...").t()),r.settings.set("cancelButtonLabel",t("Cancel").t()),r.settings.set("titleLabel",n.sprintf(t("Delete %s").t(),this.model.savedPage.prototype.objectNamePlural)),r.on("click:primaryButton",function(e){if(e.preventDefault(),0===t.size(a))return void r.closeDialog();i(".btn-dialog-primary",r.$el).text(r.settings.get("primaryButtonProgressLabel")).addClass("disabled"),i(".main-section-body").first().append(this.loadingMask.render().$el),this.loadingMask.show("");var s=this.constructFilterString(a);if(s){var o=a[0].collection.savedPages;this.batchDeleteCorrelationSearches(s).done(function(){o.trigger("refresh"),r.closeDialog(),this.loadingMask.hide()}.bind(this)).fail(function(e){this.loadingMask.hide(),r.closeDialog();var i=new d({errorMessage:n.sprintf(t("Could not bulk delete the selected %s.").t(),this.model.savedPage.prototype.objectNamePlural.toLowerCase()),htmlResponse:e});i.show()}.bind(this))}},this),r.on("hidden",function(){r.remove()},this),i("body").append(r.render().el),void r.show()}return}a=this.getBulkSelectionRows(),s=1}}this.bulkUpdateRows(a,s)},bulkUpdateRows:function(e,a){if(!t.isEmpty(e)){var n=[];t.each(e,function(e){if(e instanceof u){var i=t.extend({},e.model.savedPage.attributes,{disabled:a});n.push(i)}});var s=e[0].collection.savedPages,o=this.constructFilterString(e),l=s.url;o&&(l+="?filter="+encodeURIComponent(o)),i.ajax({url:l,type:"POST",data:(0,r.default)(n),contentType:"application/json",dataType:"json"}).done(function(){t.each(e,function(e){e.model.checkbox&&e.model.checkbox.set("checked",0),e.model.savedPage.set("disabled",a),e instanceof u&&e.updateStatusCell(a)})}).fail(function(e){var i=new d({errorMessage:t("Could not update at least one search.").t(),htmlResponse:e});i.show()})}},constructFilterString:function(e){if(t.isEmpty(e))return null;var i={};t.each(e,function(e){i[e.model.savedPage.id]=!0});var a=t.map(t.keys(i),function(e){return{name:e}}),n={OR:a};return(0,r.default)(n)}});return p}.apply(t,n),!(void 0!==s&&(e.exports=s))},1034:function(e,t,i){var a,n;a=[e,i("require/underscore"),i("require/backbone"),i("shim/jquery"),i(853),i(473)],n=function(e,t,i,a,n,s){var o=n.extend({initialize:function(e){this.children.searchName=this.model.savedPage.get("name"),this.children.appName=this.model.application.get("app"),this.children.owner=this.model.savedPage.get("_owner"),e.extraHeaders=[{name:"status",value:""}],e.enableBulkActions=!0,e.title=this.children.searchName,n.prototype.initialize.apply(this,arguments)},events:{"click a.change_to_enabled":function(e){e.preventDefault(),this.updateSearch(0).fail(function(e){this.model.savedPage.set("disabled",1),console.log("Failed to update search");var i=new s({errorMessage:t("Could not enable search.").t(),htmlResponse:e});i.show()}.bind(this))},"click a.change_to_disabled":function(e){e.preventDefault(),this.updateSearch(1).fail(function(e){this.model.savedPage.set("disabled",0),console.log("Failed to update search");var i=new s({errorMessage:t("Could not disable search.").t(),htmlResponse:e});i.show()}.bind(this))}},updateSearch:function(e){this.model.savedPage.set("disabled",e);var t=this.model.savedPage.save();return t.done(function(){this.updateStatusCell(e)}.bind(this)),t},getStatusString:function(e){t.isString(e)&&(e=parseInt(e));var i;return i=1===e?t("Disabled").t()+' | <a href="#" class="change_to_enabled">'+t("Enable").t()+"</a>":t("Enabled").t()+' | <a href="#" class="change_to_disabled">'+t("Disable").t()+"</a>"},updateStatusCell:function(e){var t=this.getStatusString(e);this.$("td.status").html(t)},render:function(){var e=this.getStatusString(this.model.savedPage.get("disabled")||0);return n.prototype.render.apply(this),this.$("td.status").html(e),this}});return o}.apply(t,a),!(void 0!==n&&(e.exports=n))},1035:function(e,t,i){var a,n;a=[e,i("require/underscore"),i("views/Base"),i("views/shared/delegates/Popdown"),i("splunkjs/mvc/utils"),i("shim/splunk.util")],n=function(e,t,i,a,n,s){var o=i.extend({moduleId:String(e.id),initialize:function(){i.prototype.initialize.apply(this,arguments),this.className="dropdown"},render:function(){var e=this.options.pageTitle,i=this.options.pageDescr,o=s.make_url(["app",n.getCurrentApp(),"correlation_search_edit"].join("/")),r=s.make_url(["app",n.getCurrentApp(),"alarm_console"].join("/")),l=s.sprintf(t("Create %s").t(),this.model.savedPage.prototype.objectNameSingular);return this.$el.html(this.compiledTemplate({_:t,pageTitle:e,pageDescr:i,title:l,addSearchUrl:o,addKpiUrl:r})),this.children.popdown=new a({el:this.$el}),this},template:'\t\t\t\t\t<a class="btn btn-primary dropdown-toggle pull-right"><%- _("Create New Search").t()%><span class="caret"></span></a>\t\t\t\t\t<div class="dropdown-menu dropdown-menu-narrow">\t\t\t\t\t\t<div class="arrow"></div>\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t<li><a href="<%- addSearchUrl %>"><%- title %> </a></li>\t\t\t\t\t\t\t<li><a href="<%- addKpiUrl %>"><%- _("Create Multi-KPI Alert").t() %> </a></li>\t\t\t\t\t\t</ul>\t\t\t\t\t</div>\t\t\t\t\t<h2 class="section-title"><i class="icon-dashboard"></i> <%- pageTitle %></h2>\t\t\t\t\t<p class="section-description">\t\t\t\t\t<%- pageDescr %>\t\t\t\t\t</p>\t\t\t\t'});return o}.apply(t,a),!(void 0!==n&&(e.exports=n))}});