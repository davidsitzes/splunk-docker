webpackJsonp([29],{0:function(t,e,i){var s,n;i.p=function(){function t(){for(var t,i,s="",n=0,a=arguments.length;n<a;n++)t=arguments[n].toString(),i=t.length,i>1&&"/"==t.charAt(i-1)&&(t=t.substring(0,i-1)),s+="/"!=t.charAt(0)?"/"+t:t;if("/"!=s){var o=s.split("/"),r=o[1];if("static"==r||"modules"==r){var l=s.substring(r.length+2,s.length);s="/"+r,window.$C.BUILD_NUMBER&&(s+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(s+="."+window.$C.BUILD_PUSH_NUMBER),"app"==o[2]&&(s+=":"+e("APP_BUILD",0)),s+="/"+l}}var d=e("MRSPARKLE_ROOT_PATH","/"),c=e("DJANGO_ROOT_PATH",""),p=e("LOCALE","en-US"),h="";return h=c&&s.substring(0,c.length)===c?s.replace(c,c+"/"+p.toLowerCase()):"/"+p+s,""==d||"/"==d?h:d+h}function e(t,e){if(window.$C&&window.$C.hasOwnProperty(t))return window.$C[t];if(void 0!==e)return e;throw new Error("getConfigValue - "+t+" not set, no default provided")}return t("/static/app/itsi/build/pages")+"/"}(),s=[i("shim/jquery"),i("require/backbone"),i("require/underscore"),i(4),i(473),i(902),i(291),i(2260),i(2786)],n=function(t,e,i,s,n,a,o,r,l){var d=(s(i("Notable Event Aggregation Policy Configuration View").t()),t("#app-main-layout")),c=new a;t("body").append(c.render().el),c.show(i("Fetching configurations...").t()),d.html('<div class="event-management-aggregation-policy-detail-container"></div>');var p=function(){var e=function(){c.hide();var t=new n({errorMessage:i("Could not fetch configs. Refresh again or contact your admin.").t()});t.show()},s=o.getNotableEventsConfigsInfo(),a=o.getNotableEventsActions(),p=t.when(s,a);p.done(function(){c.hide();var e=new r,i=new l({model:e});d.find(".event-management-aggregation-policy-detail-container").append(i.render().el),t("#footer").hide()}).fail(e)};p()}.apply(e,s),!(void 0!==n&&(t.exports=n))},2786:function(t,e,i){var s,n;s=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("shim/splunk.util"),i(129),i(473),i(2788),i(2787),i(902),i(2792),i(2832),i(2847),i(2848),i(2849)],n=function(t,e,i,s,n,a,o,r,l,d,c,p,h,v){var u=d.prototype.initialize,f=o.extend(t.extend({},d.prototype,{className:o.prototype.className+" "+d.prototype.className,initialize:function(e){e=e||{},o.prototype.initialize.call(this,e),u.call(this,e),this._model=e.model,this.label=t("Filtering Criteria").t(),this.nextLabel=t("Next").t()},validate:function(){var i=e.Deferred(),s=[];return this._model.get("filter_criteria").isValid()?this._model.get("breaking_criteria").isValid()?this._model.get("group_title")?this._model.get("group_description")?this._model.get("group_severity")||(s=[t("Group severity is required").t()]):s=[t("Group description is required").t()]:s=[t("Group title is required").t()]:s=this._model.get("breaking_criteria").validationError:s=this._model.get("filter_criteria").validationError,s.length?i.reject(t.flatten(s).join()):i.resolve()},save:function(){return e.Deferred().resolve()}})),g=c.prototype.initialize,b=o.extend(t.extend({},c.prototype,{initialize:function(e){e=e||{},o.prototype.initialize.call(this,e),g.call(this,e),this.rulesColl=e.model.get("rules"),this.label=t("Action Rules").t(),this.nextLabel=t("Next").t()},validate:function(){var i=e.Deferred(),s=[];return this.rulesColl.each(function(e){if(!e.isValid())return i.reject(e.validationError);for(var n=e.get("activation_criteria").toJSON(),a=0;a<s.length;a++){var o=s[a];if(t.isEqual(n,o))return i.reject(t("All activation criteria must be unique.").t())}s.push(n)}),i.resolve()},save:function(){return e.Deferred().resolve()}})),w=p.prototype.initialize,m=o.extend(t.extend({},p.prototype,{className:o.prototype.className+" "+p.prototype.className,initialize:function(e){e=e||{},o.prototype.initialize.call(this,e),w.call(this,e),this._model=this.model,this.label=t("Policy Info").t(),this.nextLabel=t("Next").t(),this.loadingMaskView=new l},validate:function(){var i=e.Deferred();return this._model.get("title")?i.resolve():i.reject(t("Policy title is required").t())},save:function(){this.loadingMaskView.show(t("Saving...").t());var e=this.model.save();return e.always(function(){this.loadingMaskView.hide()}.bind(this)),e}})),x=h.prototype.initialize,y=o.extend(t.extend({},h.prototype,{initialize:function(e){e=e||{},o.prototype.initialize.call(this,e),x.call(this,e),this.label=t("Done").t(),this.saveLabel=t("Next").t()},validate:function(){var t=e.Deferred();return t.resolve()},save:function(){return e.Deferred().resolve()}})),z=i.View.extend({initialize:function(t){if(t=t||{},!t.model)throw"NotableEventAggregationPolicyConfigurationView expects policy model";this._model=t.model},checkJavaVersion:function(){var e=n.checkJavaVersion();e.fail(function(e){var i=t("Java version installed on this search head does not support Aggregation Policies, Java version 1.7 or greater is required.").t();e=e||i;var s=new a({errorMessage:e,onHiddenRemove:!0});s.render(),s.show()})},render:function(){return this.$el.html('<div class="aggregation-policy-head"></div><div class="aggregation-policy-body"></div>'),this._setupWizard(),this.checkJavaVersion(),this},_setupWizard:function(){var e=[new f({model:this._model,isNew:!0}).render(),new b({model:this._model}).render(),new m({model:this._model}).render(),new y({model:this._model}).render()];this.wizardView=new r({el:this.$(".aggregation-policy-head"),stepContainer:this.$(".aggregation-policy-body"),operatingMode:"wizard",label:t("Create New Policy").t(),navBackgroundColor:"#f5f5f5",steps:e}),this.listenTo(this.wizardView,"stepnavigated",this._onStepNaviagated,this),this.wizardView.render()},_onStepNaviagated:function(t){var e=this.wizardView.steps[this.wizardView.steps.length-1];t.value===e.value&&(this.wizardView.$(".previous-button").addClass("disabled"),this.wizardView.$(".save-button").addClass("disabled"))}});return z}.apply(e,s),!(void 0!==n&&(t.exports=n))},2787:function(t,e,i){var s,n;s=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(2788),i("collections/shared/FlashMessages"),i("views/shared/FlashMessagesLegacy"),i(2789),i(2790)],n=function(t,e,i,s,n,a,o){var r=t.template(o,null,{variable:"vars"}),l=i.View.extend({initialize:function(s){if(s=s||{},this._disabled=!1,this.$el.addClass("step-wizard"),this.label=s.label||"",this.$stepContainer=e(s.stepContainer),1!==this.$stepContainer.length)throw"StepWizardView must be supplied with a stepContainer option that is a single valid place to stick steps!";if(!(s.steps instanceof Array))throw"StepWizardView requires an instantiation option of steps as an array of BaseStepView";this.steps=s.steps,this.dispatcher=t.extend({},i.Events);for(var o=0;o<this.steps.length;++o)this.steps[o].setEventDispatcher(this.dispatcher);if(this.dispatcher.on("stepforward",this.stepForward,this),this.dispatcher.on("customerror",function(t,e){this.flashMessagesCollection.reset({key:"validationError",type:"error",html:e})},this),this.dispatcher.on("clearerror",function(){this.flashMessagesCollection.reset()},this),t.contains(["nav","wizard"],s.operatingMode)?this.operatingMode=s.operatingMode:this.operatingMode="wizard",this.navBackgroundColor=s.navBackgroundColor||"#FFFFFF",this.showExitButton=s.showExitButton||!1,this.activeStep=t.find(this.steps,function(t){return t.visible}),"undefined"==typeof this.activeStep)throw"StepWizardView requires there be at least 1 visible step in the steps option";this.flashMessagesCollection=new n,this.flashMessagesLegacy=new a({collection:this.flashMessagesCollection})},baseEvents:{"click .previous-button":function(t){t.preventDefault(),e(t.currentTarget).is(".disabled")||this.stepBack()},"click .next-button":function(t){t.preventDefault(),e(t.currentTarget).is(".disabled")||this.stepForward()},"click .save-button":function(t){t.preventDefault(),e(t.currentTarget).is(".disabled")||this.saveAndExit()},"click .exit-button":function(t){t.preventDefault(),e(t.target).is(".disabled")||this.trigger("exit")}},navClickEvent:{"click .step-container":function(i){i.preventDefault();var s,n,a=e(i.currentTarget);a.is(".disabled")||(s=a.data("value"),n=t.find(this.steps,function(t){return t.value===s}),this.step(n))}},events:function(){return"nav"===this.operatingMode?(this.$el.addClass("step-wizard-nav"),t.extend({},this.baseEvents,this.navClickEvent)):this.baseEvents},enable:function(){this._disabled=!1,this.updateNavButtons(),this.$(".exit-button").removeClass("disabled")},disable:function(){this._disabled=!0,this.$(".next-button, .previous-button, .exit-button").addClass("disabled")},stepBack:function(){for(var t=this.steps.indexOf(this.activeStep),e=this.steps[t-1].visible;e===!1&&t>1;)t-=1,e=this.steps[t+1].visible;return this.step(t-1,!0)},stepForward:function(){for(var t=this.steps.indexOf(this.activeStep),e=this.steps[t+1].visible;e===!1&&t<=this.steps.length;)t+=1,e=this.steps[t+1].visible;return this.step(t+1)},saveAndExit:function(){e(window).unbind("beforeunload"),this.disableNavButtons();var i=this.activeStep.validate();return i.done(function(){var e=this.activeStep.save();e.done(function(){this.enableNavButtons(),this.trigger("exit")}.bind(this)).fail(function(e){this.enableNavButtons(),e&&"string"==typeof e||(e=t("Error saving").t()),this.flashMessagesCollection.reset([{key:"saveError",type:"error",html:e}])}.bind(this))}.bind(this)).fail(function(e){this.enableNavButtons(),e&&"string"==typeof e||(e=t("Validation failed").t()),this.flashMessagesCollection.reset([{key:"validationError",type:"error",html:e}])}.bind(this)),i},step:function(e,i){if(!(e instanceof s||(e=this.steps[e],e instanceof s)))throw"Invalid step index attempted to be set active, index must represent a BaseStepView";if(!i){this.disableNavButtons();var n=this.activeStep.validate(e),a=this;return n.done(function(){a.flashMessagesCollection.reset(),a.activeStep.deactivate();var s=a.activeStep.save(i);s.done(function(){a.navigateStep(e)}).fail(function(e){a.enableNavButtons(),e&&"string"==typeof e||(e=t("Error saving").t()),a.flashMessagesCollection.reset([{key:"validationError",type:"error",html:e}])})}).fail(function(e){a.enableNavButtons(),e&&"string"==typeof e||(e=t("Error validating").t()),a.flashMessagesCollection.reset([{key:"validationError",type:"error",html:e}])}),n}this.flashMessagesCollection.reset(),this.navigateStep(e)},navigateStep:function(t){this.enableNavButtons(),this.activeStep=t,this.updateSelectedStep(),this.updateNavButtons(),this.activeStep.activate(),this.trigger("stepnavigated",this.activeStep)},updateSelectedStep:function(t){var e=this.activeStep.value,i=this.$(".step-container"),s=i.filter('[data-value="'+e+'"]'),n=s.index();i.removeClass("active"),"wizard"===this.operatingMode?(i.removeClass("completed"),i.slice(0,n).addClass("completed")):(i.find(".circle").css({"background-color":this.navBackgroundColor}),s.find(".circle").css({"background-color":"#4e802a"})),s.addClass("active").removeClass("completed"),this.$stepContainer.children().detach(),this.$stepContainer.append(this.activeStep.el),t&&this.activeStep.activate(),this.trigger("stepactivated",this.activeStep)},updateNavButtons:function(){var e=this.steps.indexOf(this.activeStep),i=e+1,s=e-1,n=i<this.steps.length,a=this.activeStep.showNextButton!==!1&&n,o=!n||"nav"===this.operatingMode,r=n&&this.steps[i].enabled!==!1,l=this.activeStep.showPreviousButton!==!1,d=s>=0,c=d&&this.steps[s].enabled!==!1,p=this.$(".next-button"),h=this.$(".save-button"),v=this.$(".previous-button");r&&!this._disabled?p.removeClass("disabled"):p.addClass("disabled"),c&&!this._disabled?v.removeClass("disabled"):v.addClass("disabled"),a?p.show():p.hide(),l?v.show():v.hide(),o?h.show():h.hide(),p.find(".button-text").text(this.activeStep.nextLabel||""),h.find(".button-text").text(this.activeStep.saveLabel||t("Save & Exit").t()),v.find(".button-text").text(this.activeStep.previousLabel||"")},disableNavButtons:function(){e(".nav-buttons .btn").addClass("disabled")},enableNavButtons:function(){e(".nav-buttons .btn").removeClass("disabled"),0===this.steps.indexOf(this.activeStep)&&this.$(".previous-button").addClass("disabled")},render:function(){var e=this.steps.filter(function(t){var e=t.visible;return e!==!1});return this.$el.html(r({_:t,label:this.label,steps:e,exitButton:this.showExitButton,operatingMode:this.operatingMode},{variable:"vars"})),this.$(".flashmessages-header-placeholder").html(this.flashMessagesLegacy.render().el),this.updateSelectedStep(!0),this.updateNavButtons(),this},updateOperatingMode:function(e){if(this.operatingMode!==e){if("nav"!==e&&"wizard"!==e)throw'Unrecognized operatingMode "'+e+'". Only "nav" or "wizard" is supported';this.operatingMode=e,"nav"===this.operatingMode?(this.$el.addClass("step-wizard-nav"),this.delegateEvents(t.extend({},this.baseEvents,this.navClickEvent))):(this.$el.removeClass("step-wizard-nav"),this.delegateEvents(t.extend({},this.baseEvents,{}))),this.render()}}});return l}.apply(e,s),!(void 0!==n&&(t.exports=n))},2789:function(t,e){t.exports='<% if(vars.label) { %>\n\t<div class="wizard-label"><%- vars.label %></div>\n<% } %>\n<% vars._.each(vars.steps, function(step, i) { %>\n\t<% var isFirst = (i === 0) %>\n\t<% var isLast = (i === vars.steps.length - 1) %>\n\t<div class="step-container <%- isLast ? \'last\' : "" %> <%- isFirst ? \'first\' : \'\' %>" data-value="<%- step.value %>">\n\t\t<div class="step-indicator">\n\t\t\t<div class="connector left">\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t</div>\n\t\t\t<div class="circle">\n\t\t\t\t<% if(isLast && (vars.operatingMode === "wizard")) { %>\n\t\t\t\t\t<i class="finished-icon"></i>\n\t\t\t\t<% } %>\n\t\t\t</div>\n\t\t\t<div class="connector right">\n\t\t\t\t<div></div>\n\t\t\t\t<div></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div><span class="step-label"><%- step.label %></span></div>\n\t</div>\n<% }) %>\n<div class="nav-buttons">\n\t<a href="#" class="btn previous-button">\n\t\t<i class="icon-chevron-left"></i>\n\t\t<span class="button-text"></span>\n\t</a> <a href="#" class="btn btn-primary next-button">\n\t\t<span class="button-text"></span>\n\t\t<i class="icon-chevron-right"></i>\n\t</a> <a href="#" class="btn btn-primary save-button">\n\t\t<span class="button-text"></span>\n\t</a>\n\t<% if(vars.exitButton) { %>\n\t\t<a href="#" class="btn exit-button">\n\t\t\t<i class="icon-x"></i>\n\t\t\t<%- vars._("Exit").t() %>\n\t\t</a>\n\t<% } %>\n</div>\n<div class="flashmessages-header-placeholder"></div>\n<div class="clearfix"></div>'},2790:function(t,e,i){var s=i(2791);"string"==typeof s&&(s=[[t.id,s,""]]);i(15)(s,{});s.locals&&(t.exports=s.locals)},2791:function(t,e,i){e=t.exports=i(14)(),e.push([t.id,'.clearfix{*zoom:1}.clearfix:after,.clearfix:before{display:table;content:"";line-height:0}.clearfix:after{clear:both}.step-wizard .wizard-label{font-size:20px;float:left;line-height:80px}.step-wizard .step-container{min-height:80px;float:left;margin:0;padding:0;font-size:12px;width:-moz-min-content}.step-wizard-nav .step-container{cursor:pointer}.step-wizard .step-container .step-indicator{position:relative;margin-left:-2%;width:102%;margin-top:30px;padding-bottom:1em}.step-wizard .step-container .step-indicator .connector{float:left;box-sizing:border-box}.step-wizard .step-container .step-indicator .connector>div{background-color:#bbb;height:3px}.step-wizard.step-wizard-nav .step-container .step-indicator .connector>div{background-color:#4e802a;height:3px}.step-wizard .step-container .step-indicator .connector>div:first-child{float:left}.step-wizard .step-container .step-indicator .connector.left{width:50%}.step-wizard .step-container .step-indicator .connector.left>div:first-child{width:1.25em}.step-wizard .step-container .step-indicator .connector.left>div:last-child{margin-left:1.25em;width:calc(100% - 1.25em)}.step-wizard .step-container .step-indicator .connector.right{width:51%;margin-left:-1%}.step-wizard .step-container .step-indicator .connector.right>div:first-child{width:calc(100% - 1.25em)}.step-wizard .step-container .step-indicator .connector.right>div:last-child{margin-left:calc(100% - 1.25em);width:1.25em}.step-wizard .step-container .step-indicator .circle{float:left;position:absolute;margin:0 auto;left:0;right:0;box-sizing:content-box;text-align:center}.step-wizard .step-container .step-label{color:#999;padding:4px 1.25em 0;max-width:150px;display:inline-block;text-overflow:ellipsis;overflow:hidden;width:-moz-max-content}.step-wizard .step-container.active .connector.left>div{background-color:#4e802a}.step-wizard .step-container.active .circle{height:17px;width:17px;top:-7px;border-radius:10px;background-color:#4e802a}.step-wizard.step-wizard-nav .step-container .circle,.step-wizard.step-wizard-nav .step-container.last .circle{height:15px;width:15px;top:-9px;border-radius:10px;background-color:inherit;border:3px solid #4e802a}.step-wizard .step-container.active .step-label{color:#4e802a}.step-wizard .step-container.first .connector.left>div:first-child{background-color:transparent;width:1.25em}.step-wizard .step-container.first .connector.left{visibility:hidden}.step-wizard .step-container.last .connector.right>div{background-color:transparent}.step-wizard .step-container.last .connector.right>div:first-child{width:calc(100% - 1.25em)}.step-wizard .step-container.last .connector.right>div:last-child{margin-left:calc(100% - 1.25em);width:1.25em}.step-wizard .step-container.last .connector.left>div:first-child{width:calc(50% - 2px)}.step-wizard .step-container.last .connector.left>div:last-child{width:calc(100% - 18px);margin-left:calc(1.25em - 5px)}.step-wizard .step-container.last .circle{height:16px;width:16px;top:-10.5px;border-radius:13px;border:3px solid #bbb;background-color:transparent}.step-wizard .step-container.last .finished-icon{font-size:16px;color:#fff;display:none}.step-wizard .step-container.last.active .circle{background-color:#4e802a;border-color:#4e802a}.step-wizard .step-container.last.active .finished-icon{display:block}.step-wizard .step-container.completed .connector>div{background-color:#4e802a}.step-wizard .step-container.completed .step-label{opacity:.6;filter:alpha(opacity=60);color:#4e802a}.step-wizard .nav-buttons{float:left;height:63px;line-height:63px;margin-left:10px}.step-wizard .nav-buttons .btn{font-size:14px}.step-wizard .nav-buttons .next-button,.step-wizard .nav-buttons .save-button{margin-left:3px}.step-wizard .nav-buttons .exit-button{margin-left:10px}.step-wizard .flashmessages-header-placeholder .shared-flashmessageslegacy{padding:20px}',""])},2847:function(t,e,i){var s,n;s=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("views/shared/controls/ControlGroup")],n=function(t,e,i,s){var n=t.template('\t\t\t\t\t<div class="title-container">\t\t\t\t\t\t<h2 class="title"><%- vars._("Policy Info").t() %></h2>\t\t\t\t\t\t<p class="description"><%- vars._("You are almost done!").t() %></p>\t\t\t\t\t</div>\t\t\t\t\t<div class="form form-horizontal policy-info-form">\t\t\t\t</div>',null,{variable:"vars"}),a=i.View.extend({className:"notable-event-aggregation-policy-info-view",initialize:function(e){if(e=e||{},!e.model)throw"NotableEventAggregationPolicyInfoView expects policy model";this._policyModel=e.model,this.children={},this.children.policyTitleControl=new s({controlType:"Text",controlClass:"policy-title-control",controlOptions:{modelAttribute:"title",model:this._policyModel},required:!0,_errorMsg:t("Cannot be empty").t(),label:t("Policy Title").t()}),this.children.policyDescriptionControl=new s({controlType:"Textarea",controlClass:"policy-description-control",controlOptions:{modelAttribute:"description",model:this._policyModel,placeholder:t("optional").t()},label:t("Description").t()}),this.children.policyStatusControl=new s({controlType:"SyntheticRadio",controlClass:"policy-status-control",controlOptions:{model:this._policyModel,modelAttribute:"disabled",items:[{label:t("Enabled").t(),value:0},{label:t("Disabled").t(),value:1}]},label:t("Status").t()})},render:function(){return this.$el.html(n({_:t},{variable:"vars"})),this._renderControls(),this},_renderControls:function(){this.$(".policy-info-form").append(this.children.policyTitleControl.render().el),this.$(".policy-info-form").append(this.children.policyDescriptionControl.render().el),this.$(".policy-info-form").append(this.children.policyStatusControl.render().el)}});return a}.apply(e,s),!(void 0!==n&&(t.exports=n))},2848:function(t,e,i){var s,n;s=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc/utils"),i("shim/splunk.util"),i(2849)],n=function(t,e,i,s,n,a){var o=t.template('\t\t\t\t\t<div class="policy-done-view">\t\t\t\t\t\t<h2 class="title"><%- vars.title %> <%- vars._("Policy has been created successfully").t() %></h2>\t\t\t\t\t\t<p>\t\t\t\t\t\t\t<%- vars._("To see how the policy works for your notable events, ").t() %>\t\t\t\t\t\t\t<a class="notable-events-review"><%- vars._("go to Notable Events Review.").t() %></a>\t\t\t\t\t\t</p>\t\t\t\t\t\t<p><a class="all-policies"><%- vars._("View all configured policies").t() %></a></p>\t\t\t\t</div>',null,{variable:"vars"}),r=i.View.extend({className:"notable-event-aggregation-policy-view",initialize:function(t){if(t=t||{},!t.model)throw"NotableEventAggregationPolicyDoneView expects policy model";this._policyModel=t.model},events:{"click .all-policies":function(){var t=n.make_full_url("/app/itsi/notable_event_aggregation_policies_lister");s.redirect(t)},"click .notable-events-review":function(){var t=n.make_full_url("/app/itsi/itsi_event_management");s.redirect(t)}},render:function(){return this.$el.html(o({_:t,title:this._policyModel.get("title")},{variable:"vars"})),this}});return r}.apply(e,s),!(void 0!==n&&(t.exports=n))}});