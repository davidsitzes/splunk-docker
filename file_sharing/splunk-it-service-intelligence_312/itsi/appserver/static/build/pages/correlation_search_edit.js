webpackJsonp([9],{0:function(e,t,i){var a,r;i.p=function(){function e(){for(var e,i,a="",r=0,l=arguments.length;r<l;r++)e=arguments[r].toString(),i=e.length,i>1&&"/"==e.charAt(i-1)&&(e=e.substring(0,i-1)),a+="/"!=e.charAt(0)?"/"+e:e;if("/"!=a){var o=a.split("/"),n=o[1];if("static"==n||"modules"==n){var s=a.substring(n.length+2,a.length);a="/"+n,window.$C.BUILD_NUMBER&&(a+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(a+="."+window.$C.BUILD_PUSH_NUMBER),"app"==o[2]&&(a+=":"+t("APP_BUILD",0)),a+="/"+s}}var d=t("MRSPARKLE_ROOT_PATH","/"),c=t("DJANGO_ROOT_PATH",""),h=t("LOCALE","en-US"),u="";return u=c&&a.substring(0,c.length)===c?a.replace(c,c+"/"+h.toLowerCase()):"/"+h+a,""==d||"/"==d?u:d+u}function t(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return e("/static/app/itsi/build/pages")+"/"}(),a=[i("shim/jquery"),i("require/underscore"),i(979),i(4),i(1016)],r=function(e,t,i,a){a(t("Correlation Search Configuration").t());e("#app-main-layout").html('<div class="dashboard-body container-fluid main-section-body" data-role="main"><div class="dashboard-header clearfix"><h2>'+t("Correlation Search Configuration").t()+'</h2></div><div class="dashboard-row dashboard-row1"><div id="correlation_search_editor_container"></div> </div>');var r=new i({el:e("#correlation_search_editor_container")});r.render()}.apply(t,a),!(void 0!==r&&(e.exports=r))},979:function(e,t,i){var a,r;a=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("uri/route"),i("splunkjs/mvc/utils"),i("shim/splunk.util"),i("util/splunkd_utils"),i("views/shared/Modal"),i("views/shared/controls/ControlGroup"),i("views/shared/controls/MultiInputControl"),i("views/shared/controls/SyntheticCheckboxControl"),i("views/shared/controls/SyntheticSelectControl"),i("splunkjs/mvc/simpleform/input/timerange"),i(129),i(982),i(983),i(980),i(998),i(320),i(1002),i(1004),i(1008),i(365),i(1009),i(368),i(231),i(291),i(1011),i(1012),i(372),i(1014)],r=function(e,t,i,a,r,l,o,n,s,d,c,h,u,p,m,g,f,v,b,S,_,M,y,C,w,D,x,T){var N={1:"box-filled threshold-color-blue",2:"box-filled threshold-color-green",3:"box-filled threshold-color-yellow",4:"box-filled threshold-color-orange",5:"box-filled threshold-color-redorange",6:"box-filled threshold-color-red"},B=e("You do not have permissions to some of the services associated with this Correlation Search. You cannot save any changes.").t(),$=n.extend({setText:function(e,t){var i="alert-info";t&&(i="alert-error");var a='<div class="alert '+i+'"><i class="icon-alert"></i><span>'+e+"</span></div>";this.$(n.BODY_SELECTOR).html(a)},events:t.extend({},n.prototype.events,{"click .modal-btn-primary":"_hide"}),_hide:function(e){e.preventDefault(),this.hide()},render:function(){var e=t(n.BUTTON_SAVE);e.text("OK"),this.$el.html(n.TEMPLATE),this.$(n.HEADER_TITLE_SELECTOR).text("Correlation Search"),this.$(n.FOOTER_SELECTOR).append(e)}}),k=i.View.extend({tagName:"div",className:"csb-correlation-search-builder-main",defaults:{redirectTo:"app/"+r.getCurrentApp()+"/correlation_searches_lister"},initialize:function(a){this.args=e.extend(this.defaults,a||{}),this.searchName=null,this.CorrelationSearchBuilderModel=new m,this.ServiceDropDown=null,this._saveButtonDisabled=!1,this.editorName=this._getDefaultEditorValue(),this.isMultiKpiAlertSearch=!1,this.fetchedSearchString=null,this.fetchedServices=null,this.drillDownDefferredObject=t.Deferred(),this.dataModelSpec=a&&a.dataModelSpec||{datamodel:"",object:"",aggregates:[],eventFilter:"",splitby:"","resultFilter-comparator":"","resultFilter-value":"","resultFilter-field":"",splitbyOptions:[],resultFilterOptions:[]},this.DataModelSpecification=new i.Model(this.dataModelSpec),this.listenTo(this.DataModelSpecification,"change",this.updateSearch),this.listenTo(this.DataModelSpecification,"change:resultFilterOptions",this.updateDatamodelFiltersView),this.notableInfo=null,this.InfoModal=new $({onHiddenRemove:!1});var r=t("body");r.append(this.InfoModal.render().el),this.DataModelSelector=new g({onHiddenRemove:!1}),r.append(this.DataModelSelector.render().el),this.listenTo(this.DataModelSelector,"selectModalClosed",this.showDataModelViews),this._accordionSettings={group:".accordion-group",toggle:".accordion-toggle",body:".accordion-body",icon:".icon-accordion-toggle",inactiveIconClass:"icon-triangle-right-small",activeIconClass:"icon-triangle-down-small",activeClass:"active"},this.$(this._accordionSettings.body).hide(),this.$(this._accordionSettings.icon).addClass(this._accordionSettings.inactiveIconClass),this.children={},this.listenTo(this.CorrelationSearchBuilderModel,"change:is_new",this.toggleSearchName),this.listenTo(this.CorrelationSearchBuilderModel.CorrelationSearchModel,"change:dispatch.earliest_time change:dispatch.latest_time",this.updateSearch),this.listenTo(this.CorrelationSearchBuilderModel.CorrelationSearchModel,"change:action.itsi_event_generator.param.entity_lookup_field",this._add_entity_lookup),this.listenTo(this.CorrelationSearchBuilderModel.CorrelationSearchModel,"change:action.email",this._toggleEmailControls),this.listenTo(this.CorrelationSearchBuilderModel.CorrelationSearchModel,"change:action.script",this._toggleScriptControls),this.listenTo(this.CorrelationSearchBuilderModel,"change:searchsource",this._toggleSearchSource),this.listenTo(this.CorrelationSearchBuilderModel.CorrelationSearchModel,"change:action.itsi_event_generator.param.service_ids",this._add_service_filter);var l=new D;this.getServiceCollectionXHR=l.getTitlesAndKeysWithKpis()},toggleSearchName:function(){this.CorrelationSearchBuilderModel.get("is_new")||this.children&&this.children.SearchName&&this.children.SearchName.disable()},events:{"click .accordion-toggle":"_toggleAccordion","click #save":"_save","click #cancel":"_redirectTo","click a#datamodel-button":"openDataModelSelector","click a.adhoc-run-search":"openSearch","click a#search-manually-edit":"handleSearchProperties"},handleSearchProperties:function(){this.CorrelationSearchBuilderModel.set("searchsource","adhoc"),this.isMultiKpiAlertSearch&&(this.$("a#search-manually-edit").hide(),this.enableSearch())},enableSearch:function(){this.children.Search.enable()},disableSearch:function(){this.children.Search.disable()},openSearch:function(e){e.preventDefault();var t=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("search");if(t){var i={q:t,earliest:this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("dispatch.earliest_time"),latest:this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("dispatch.latest_time")},l=r.getPageInfo(),o=a.search(l.root,l.locale,l.app,{data:i});r.redirect(o,!0)}},openDataModelSelector:function(e){e.preventDefault(),e.target.textContent="Edit",this.DataModelSelector.show()},updateSearch:function(){if("adhoc"!==this.CorrelationSearchBuilderModel.get("searchsource")){var t={latest:this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("end_time"),earliest:this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("start_time"),"alert.suppress":0};this.DataModelSpecification.get("datamodel")&&(t.datamodel=this.DataModelSpecification.get("datamodel")),this.DataModelSpecification.get("object")&&(t.object=this.DataModelSpecification.get("object")),this.DataModelSpecification.get("eventFilter")&&(t.eventFilter=this.DataModelSpecification.get("eventFilter")),this.DataModelSpecification.get("aggregates")&&this.DataModelSpecification.get("aggregates").length>0&&(t.aggregates=this.DataModelSpecification.get("aggregates")),this.DataModelSpecification.get("splitby")&&(t.splitby=e.map(this.DataModelSpecification.get("splitby").split(","),function(e){return{attribute:e}})),this.DataModelSpecification.get("resultFilter-value")&&this.DataModelSpecification.get("resultFilter-comparator")&&this.DataModelSpecification.get("resultFilter-field")&&(t.resultFilter={value:this.DataModelSpecification.get("resultFilter-value"),comparator:this.DataModelSpecification.get("resultFilter-comparator"),field:this.DataModelSpecification.get("resultFilter-field")}),this.getDataModelResultFilterAvailableFields(),this.getDataModelGeneratedSearch(t)}},getDataModelResultFilterAvailableFields:function(){if(this.DataModelSpecification.get("aggregates")&&this.DataModelSpecification.get("aggregates").length>0){var t=e.map(this.DataModelSpecification.get("aggregates"),function(e){return e&&e.alias?e.alias:e.function+"("+e.attribute+")"});this.DataModelSpecification.get("splitby")&&t.extend(this.DataModelSpecification.get("splitby").split(","));var i=this.DataModelSpecification.get("resultFilterOptions");e.isEqual(i,t)||this.DataModelSpecification.set("resultFilterOptions",t),e.contains(this.DataModelSpecification.get("resultFilterOptions"),this.DataModelSpecification.get("resultFilter-field"))||this.DataModelSpecification.set("resultFilter-field","")}},getDataModelGeneratedSearch:function(e){M.createSearch(e).always(function(e){this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("search",e.search),this.updateSearchParseStatus(e.parsed)}.bind(this))},updateSearchParseStatus:function(e){e?(this.$("#search-parse-success-status",this.$el).show(),this.$("#search-parse-fail-status",this.$el).hide()):(this.$("#search-parse-success-status",this.$el).hide(),this.$("#search-parse-fail-status",this.$el).show())},updateSpec:function(t){this.DataModelSpecification.set({datamodel:"",datamodelDisplayName:"",object:"",aggregates:[],eventFilter:"",splitby:"","resultFilter-comparator":"","resultFilter-value":"","resultFilter-field":"",splitbyOptions:[],resultFilterOptions:[]});var i={datamodel:t&&t.datamodel,datamodelDisplayName:t&&t.datamodelDisplayName,object:t&&t.object&&t.object.label,splitbyOptions:t&&t.object&&e.map(t.object.fields,function(e){return e.value.attribute}),aggregates:t&&t.aggregates,resultFilterOptions:t&&t.object&&e.map(t.object.fields,function(e){return e.value.attribute})};i.splitbyOptions&&(i.splitbyOptions.extend(["_time","_raw"]),i.aggregates||i.splitbyOptions.extend(["date_mday","linecount","eventtype","splunk_server","tag","timestartpos","timeendpos"])),this.DataModelSpecification.set(i)},showDataModelViews:function(e){this.updateSpec(e);var t={datamodel:this.DataModelSpecification.get("datamodel"),datamodelDisplayName:this.DataModelSpecification.get("datamodelDisplayName"),object:this.DataModelSpecification.get("object"),aggregates:this.DataModelSpecification.get("aggregates")};this.DataModelInfoView?this.DataModelInfoView.render(t):(this.DataModelInfoView=new f,this.$(".datamodel-info-view",this.$el).append(this.DataModelInfoView.render(t).el)),this.updateDatamodelFiltersView()},updateDatamodelFiltersView:function(){var t={};t.eventFilter={model:this.DataModelSpecification,eventFilterAttribute:"eventFilter"},this.DataModelSpecification.get("aggregates")&&this.DataModelSpecification.get("aggregates").length>0&&(t.splitby={model:this.DataModelSpecification,splitbyAttribute:"splitby",autoCompleteList:this.DataModelSpecification.get("splitbyOptions")}),t.resultFilter={model:this.DataModelSpecification,fieldAttribute:"resultFilter-field",filedOptionsList:e.map(this.DataModelSpecification.get("resultFilterOptions"),function(e){return{label:e,value:e}}),comparatorAttribute:"resultFilter-comparator",valueAttribute:"resultFilter-value"},this.ExtraFiltersView?this.ExtraFiltersView.render(t):(this.ExtraFiltersView=new v,this.$(".datamodel-filter-view",this.$el).append(this.ExtraFiltersView.render(t).el))},_showSaving:function(i,a){if(i){var r=a||e("Saving...").t();t('<div class="modal-backdrop correlation-search-saving"></div>').appendTo(document.body),t("#save",this.$el).text(r),t("#save",this.$el).attr("disabled","true")}else t(".correlation-search-saving").remove(),t("#save",this.$el).text("Save"),t("#save",this.$el).removeAttr("disabled")},_redirectTo:function(){this.args&&this.args.redirectTo&&l.redirect_to(this.args.redirectTo)},_validate:function(t){var i=[];if(this.CorrelationSearchBuilderModel.isValid()||i.extend(this.CorrelationSearchBuilderModel.validationError),this.CorrelationSearchBuilderModel.CorrelationSearchModel.isValid()||i.extend(this.CorrelationSearchBuilderModel.CorrelationSearchModel.validationError),i.length>0&&!t){var a=e.map(i,function(e){return e.message});this.handleErrorMessage(a.join("<br/>"))}return i.length>0},_isSearchParsed:function(){var i=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("search"),a=!1;if(!i)return this.handleErrorMessage(e("Search string cannot be empty.").t()),a;i=i.trim(),"|"!==i.substring(0,1)&&(i="search "+i);var r={output_mode:"json",q:i,parse_only:!0},o=l.make_url("splunkd/__raw/services/search/parser");return t.ajax({url:o,type:"GET",data:r,async:!1,success:function(){a=!0},error:function(t){this.handleErrorMessage(l.sprintf(e("Invalid search string: %s.").t(),t.responseJSON.messages[0].text))}.bind(this)}),a},_getDefaultEditorValue:function(){return y.ADVANCE_EDITOR_NAME},_add_or_remove_action:function(t,i,a){var r=l.stringToFieldList(i),o=e.contains(r,t);return a&&!o?r.push(t):!a&&o&&(r=e.reject(r,function(e){return t===e})),l.fieldListToString(r)},_save:function(){if(!this._saveButtonDisabled&&!this._validate()&&(this.CorrelationSearchBuilderModel.get("is_new")||this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("sid",this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("name")),this._isSearchParsed())){this.isMultiKpiAlertSearch&&(this.fetchedServices===this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.service_ids")&&this.fetchedSearchString===this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("search")||(this.editorName=this._getDefaultEditorValue(),this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("action.itsi_event_generator.param.search_type","basic"),this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("action.itsi_event_generator.param.meta_data",{}))),this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("action.itsi_event_generator.param.editor",this.editorName),this._showSaving(!0);var i=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("actions"),a=l.normalizeBoolean(this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.email")),r=l.normalizeBoolean(this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.script")),o=l.normalizeBoolean(this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.rss"));i=a?this._add_or_remove_action("email",i,!0):this._add_or_remove_action("email",i,!1),i=r?this._add_or_remove_action("script",i,!0):this._add_or_remove_action("script",i,!1),i=o?this._add_or_remove_action("rss",i,!0):this._add_or_remove_action("rss",i,!1),this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("actions",i);var n=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("alert.suppress.fields"),s=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("alert.suppress.period");n&&s?this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("alert.suppress","1"):this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("alert.suppress","0");var d=this.CorrelationSearchBuilderModel.CorrelationSearchModel.save();d.done(function(){this.handleSuccessMessage(e("The changes were successfully saved.").t()),this.CorrelationSearchBuilderModel.set("is_new",!1),this.args&&this.args.redirectTo&&setTimeout(function(){this._redirectTo()}.bind(this),3e3)}.bind(this)).fail(function(t){this.handleErrorMessage(l.sprintf(e("Correlation search could not be saved, status: %s ,reason: %s.").t(),t.status,p.extractErrorMsgFromResponse(t)))}.bind(this)).always(function(){t("html, body").animate({scrollTop:0},0),this._showSaving(!1)}.bind(this))}},handleErrorMessage:function(e){this.InfoModal.setText(e,!0),this.InfoModal.show()},handleSuccessMessage:function(e){this.InfoModal.setText(e),this.InfoModal.show()},getNotableInfo:function(){var e=l.make_url("/custom/SA-ITOA/event_management_interface/notable_event_configuration/all_info"),i=t.ajax({url:e,type:"GET"});return i.done(function(e){for(var t=e.severities.length-1;t>=0;t--)e.severities[t].label=x.getSeverityLabel(e.severities[t].label);for(var i=e.statuses.length-1;i>=0;i--)e.statuses[i].label=x.getStatusLabel(e.statuses[i].label);this.notableInfo=e}.bind(this)),i.fail(function(){}),i},fetchSearch:function(t){this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("name",t),this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("sid",t);var i=this.CorrelationSearchBuilderModel.CorrelationSearchModel.fetch();return i.done(function(){}.bind(this)).fail(function(){this.handleErrorMessage(e("Failed to get search information.").t())}.bind(this)),i},updateSearchInformation:function(){this.fetchedSearchString=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("search"),this.fetchedServices=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.service_ids"),this.CorrelationSearchBuilderModel.set("scheduletype",y.isBasicCronAvailable(this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("cron_schedule"))?"basic":"cron"),this.editorName=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.editor")||this._getDefaultEditorValue()},_renderPage:function(){this.updateSearchInformation(),this.editorName=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.editor")||this.editorName,this.isMultiKpiAlertSearch=e.contains(this.editorName.split(","),y.MULTI_KPI_EDITOR_NAME),this.$el.html(e.template(T,{listLink:this.args.redirectTo})),this._renderControls(this.notableInfo&&this.notableInfo.severities,this.notableInfo&&this.notableInfo.email_formats,this.notableInfo,this.notableInfo&&this.notableInfo.owners,this.notableInfo&&this.notableInfo.statuses),this._toggleScheduleType(),this._toggleSearchSource(),this._toggleScriptControls(),this._toggleEmailControls(),this._add_entity_lookup(),this.isMultiKpiAlertSearch&&(this.disableSearch(),this.$("#search-manually-edit").show(),this.children.ServiceDropDown.disable()),this._handleDisablingOfSaveButton()},render:function(){this.searchName||(this.searchName=y.getURLParameter("name"));var t=[],i=this.getNotableInfo();t.push(i),this.searchName&&(this.CorrelationSearchBuilderModel.set("is_new",!1),t.push(this.fetchSearch(this.searchName))),this.$el.html("<div>"+e("Loading...").t()+"</div>");var a=0;return e.each(t,function(e){e.always(function(){a++,a===t.length&&this._renderPage()}.bind(this))}.bind(this)),this},_renderDrillDownOffset:function(){var t=new C;return t.fetch().done(function(){var i=[],a=[];t.each(function(e){i.push({label:e.getEarliestOffsetDescription(),value:"-"+e.getTimeInSec()}),a.push({label:e.getLatestOffsetDescription(),value:e.getTimeInSec()})}),this.children.DrillDownEarliestTimeRange=new s({controlType:"SyntheticSelect",controlClass:"drilldown-earliest-offset-control",controlOptions:{className:"drilldown-earliest-offset",toggleClassName:"btn",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,modelAttribute:"action.itsi_event_generator.param.drilldown_search_earliest_offset",items:i,popdownOptions:{attachDialogTo:"body"}},required:!1,label:e("Drill-down earliest offset").t(),tooltip:e("Defines how far back from the time of the event to start looking for related events").t()}),this.children.DrillDownLatestTimeRange=new s({controlType:"SyntheticSelect",controlClass:"drilldown-latest-offset-control",controlOptions:{className:"drilldown-latest-offset",toggleClassName:"btn",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,modelAttribute:"action.itsi_event_generator.param.drilldown_search_latest_offset",items:a,popdownOptions:{attachDialogTo:"body"}},required:!1,label:e("Drill-down latest offset").t(),tooltip:e("Defines how far ahead from the time of the event to look for related events").t()}),this.$(".notable-events-drilldown-offset-controls").empty(),this.$(".notable-events-drilldown-offset-controls").append(this.children.DrillDownEarliestTimeRange.render().el),this.$(".notable-events-drilldown-offset-controls").append(this.children.DrillDownLatestTimeRange.render().el)}.bind(this)).fail(function(){this.$("#drill-down-earliest-time-range-control").html(e("Failed to load drill-down offset list.").t()),this.$("#drill-down-latest-time-range-control").html(e("Failed to load drill-down offset list.").t())})},_add_service_filter:function(){if(!this.isMultiKpiAlertSearch){var t=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("search");t=t.replace(/(\s\|\s*`filter_maintenance_services\((?:(?!`).)*\)`)+/gi,"");var i=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.service_ids");e.isString(i)&&i.length>0&&(t+=' | `filter_maintenance_services("'+i+'")`'),this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("search",t)}},_add_entity_lookup:function(){var e=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.entity_lookup_field"),i='| eval sec_grp = "default_itsi_security_group" | `match_entities('+e+", sec_grp)` | `filter_maintenance_entities`",a=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("search");a||(a=""),a=t.trim(a),a=a.replace(/(\s\|\s*`match_entities\((?:(?!`).)*\)`\s*\|\s*`filter_maintenance_entities`)+/gi,""),e&&("|"!==a[a.length-1]?a=a+" "+i:a+=i.substring(1)),this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("search",a)},_renderControls:function(i,a,r,o,n){this._renderDrillDownOffset().done(function(){this.drillDownDefferredObject.resolve()}.bind(this)).fail(function(){this.drillDownDefferredObject.reject()}.bind(this)),this.children.SearchName=new s({controlType:"Text",controlClass:"search-name-control",controlOptions:{modelAttribute:"name",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},required:!0,enabled:this.CorrelationSearchBuilderModel.get("is_new"),_errorMsg:e("Cannot be empty").t(),label:e("Search Name").t()}),this.children.SearchDescription=new s({controlType:"Text",controlClass:"search-description-control",controlOptions:{modelAttribute:"description",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},required:!1,label:e("Description").t(),tooltip:e("Describes what kind of issues this search is intended to detect").t()}),this.children.SearchSource=new s({controlType:"SyntheticRadio",controlClass:"search-source-control",controlOptions:{modelAttribute:"searchsource",model:this.CorrelationSearchBuilderModel,items:[{label:e("Data Model").t(),value:"datamodel"},{label:e("Ad hoc").t(),value:"adhoc"}]},label:e("Search Type").t()}),this.children.DataModelSelector=new b({callbackContext:this,label:e("Select Datamodel").t(),buttonLabel:e("Select").t(),buttonId:"datamodel-button",isRequired:!0});var p=e.template('<div class="alert alert-warning help-block <%- className %>"><i class="icon-alert"></i><span><%- msg %></span></div>'),m='<a class="adhoc-run-search">'+e("Run Search").t()+' <i class="icon-external"></i></a><br/><a class="hide" id="search-manually-edit">'+e("Edit search manually").t()+'<span class="icon-lock-unlocked"/> </a>';this.isMultiKpiAlertSearch&&(m='<a class="adhoc-run-search">'+e("Run Search").t()+' <i class="icon-external"></i></a><br/><a id="search-manually-edit">'+e("Edit search ").t()+'<span class="icon-lock-unlocked"> </span> </a>'+p({className:"multi-kpi-alert-search-msg",msg:e("Once search is updated then it can not be edited in Multi-KPI Alerts page.").t()})),this.children.Search=new s({controlType:"Textarea",controlClass:"search-textarea-control",controlOptions:{className:"search-textarea",textareaClassName:"input-search-textarea",modelAttribute:"search",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},required:!0,enabled:!this.isMultiKpiAlertSearch,_errorMsg:e("Cannot be empty").t(),label:e("Search").t(),help:m}),this.children.TimeRange=new u({id:"time_filter",default:{latest_time:this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("dispatch.latest_time"),earliest_time:this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("dispatch.earliest_time")},el:t("#time-range-control")}),this.children.ScheduleType=new s({controlType:"SyntheticRadio",controlClass:"scheduletype-control",controlOptions:{model:this.CorrelationSearchBuilderModel,modelAttribute:"scheduletype",items:[{label:e("Basic").t(),value:"basic"},{label:e("Cron").t(),value:"cron"}]},required:!0,_errorMsg:e("Select a schedule type").t(),label:e("Schedule Type").t()}),this._cacheLastCronTypeSchedule(),this.children.RunEvery=new s({controlType:"SyntheticSelect",controlClass:"scheduletype-basic-control",controlOptions:{className:"scheduletype-basic",toggleClassName:"btn",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,modelAttribute:"cron_schedule",items:y.getBasicCronScheduleArray(),popdownOptions:{attachDialogTo:"body"}},required:!0,_errorMsg:e("Select a run type").t(),label:e("Run Every").t()}),this.children.Cron=new s({controlType:"Text",controlClass:"scheduletype-cron-control",controlOptions:{className:"scheduletype-cron",modelAttribute:"cron_schedule",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},required:!0,label:e("Cron Schedule").t(),help:e("Enter a cron-style schedule.").t()+"\n<br />\n"+e("For example '*/5 * * * *' (every 5 minutes) or '0 21 * * *' (every day at 9 PM).").t()+"\n<br />\n"+e("Realtime searches use a default schedule of '*/5 * * * *'.").t()}),this.children.ServiceDropDown=new S({model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,modelAttribute:"action.itsi_event_generator.param.service_ids",help:this.isMultiKpiAlertSearch?p({className:"multi-kpi-alert-service-msg",msg:e("Once service is updated then it can not be edited in Multi-KPI Alerts page.").t()}):null,isInitialTagEnabled:!1,required:!1,getServiceCollectionXHR:this.getServiceCollectionXHR}),this.children.EntityFilter=new s({controlType:"Text",controlClass:"service-entity-filter",controlOptions:{className:"service-entity",modelAttribute:"action.itsi_event_generator.param.entity_lookup_field",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("Entity Lookup Field").t(),tooltip:e("The field in the data retrieved by Splunk that is used to lookup corresponding entities").t()}),this.children.NotableTitle=new s({controlType:"Text",controlClass:"notable-title-control",controlOptions:{className:"notable-title",modelAttribute:"action.itsi_event_generator.param.title",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},required:!0,label:e("Notable Event Title").t(),tooltip:e("Notable events created by this search will have this title (supports field substitution, field should be defined in format of %fieldname%)").t()}),this.children.NotableDescription=new s({controlType:"Text",controlClass:"notable-description-control",controlOptions:{className:"notable-description",modelAttribute:"action.itsi_event_generator.param.description",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("Notable Event Description").t(),tooltip:e("Notable events created by this search will have this description (supports field substitution, field should be defined in format of %fieldname%)").t()});var g=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.status");n&&n.length>0&&(null===g||"undefined"==typeof g||""===g)&&e.each(n,function(e){l.normalizeBoolean(e.default)&&this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("action.itsi_event_generator.param.status",e.value)}.bind(this)),this.children.Status=new s({controlTypes:{TextSelectSwitch:_},controlType:"TextSelectSwitch",controlClass:"status-control",controlOptions:{model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,modelAttribute:"action.itsi_event_generator.param.status",selectOptions:{className:"status",toggleClassName:"btn",items:n,popdownOptions:{attachDialogTo:"body"}},textOptions:{className:"status"}},help:e("In advanced mode, use tokens like %fieldname% to use result field values to set status").t(),tooltip:e("Sets the initial status of a newly created Notable Event, if using advanced mode, values must match integers in itsi_notable_event_status.conf, defaults 0-5").t(),label:e("Status").t()});var f=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.owner");o&&o.length>0&&!f&&e.each(o,function(e){l.normalizeBoolean(e.default)&&this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("action.itsi_event_generator.param.owner",e.value)}.bind(this)),this.children.Owner=new s({controlTypes:{TextSelectSwitch:_},controlType:"TextSelectSwitch",controlClass:"owner-control",controlOptions:{model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,modelAttribute:"action.itsi_event_generator.param.owner",selectOptions:{className:"owner",toggleClassName:"btn",items:o,popdownOptions:{attachDialogTo:"body"}},textOptions:{className:"owner"}},tooltip:e("Sets the initial owner of a newly created Notable Event, if using advanced mode, values must match usernames in the system").t(),help:e("In advanced mode, use tokens like %fieldname% to use result field values to set owner").t(),label:e("Owner").t()});var v=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.severity");i&&i.length>0&&(null===v||"undefined"==typeof v||""===v)&&e.each(i,function(e){l.normalizeBoolean(e.default)&&this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("action.itsi_event_generator.param.severity",e.value)}.bind(this));var M=this.notableInfo.severities;M=e.sortBy(M,"value");for(var C=M.length-1;C>=0;C--)M[C].icon=N[M[C].value];this.children.Severity=new s({controlTypes:{TextSelectSwitch:_},controlType:"TextSelectSwitch",controlClass:"severity-control",controlOptions:{model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,modelAttribute:"action.itsi_event_generator.param.severity",selectOptions:{className:"severity",toggleClassName:"btn",items:M,popdownOptions:{attachDialogTo:"body"}},textOptions:{className:"severity"}},tooltip:e("Sets the initial severity of a newly created Notable Event, if using advanced mode, values must match integers in itsi_notable_event_severity.conf, defaults 1-6").t(),help:e("In advanced mode, use tokens like %fieldname% to use result field values to set severity").t(),label:e("Severity").t()}),this.children.DrillDownName=new s({controlType:"Text",controlClass:"notable-drill-down-name-control",controlOptions:{className:"notable-drilldown-name",modelAttribute:"action.itsi_event_generator.param.drilldown_search_title",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("Drill-down Name").t(),tooltip:e("Supports variable substitution with fields from the matching event, in format of %fieldname%)").t()}),this.children.DrillDownSearch=new s({controlType:"Text",controlClass:"notable-drilldown-search-control",controlOptions:{modelAttribute:"action.itsi_event_generator.param.drilldown_search_search",className:"notable-drilldown-search",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("Drill-down Search").t(),tooltip:e("Supports variable substitution with fields from the matching event, in format of %fieldname%)").t()}),this.children.DrillDownLinkTitle=new s({controlType:"Text",controlClass:"notable-drilldown-title-control",controlOptions:{modelAttribute:"action.itsi_event_generator.param.drilldown_title",className:"notable-drilldown-title",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("Drill-down link title").t(),tooltip:e("Supports variable substitution with fields from the matching event, in format of %fieldname%)").t()}),this.children.DrillDownLinkUri=new s({controlType:"Text",controlClass:"notable-drilldown-uri-control",
controlOptions:{modelAttribute:"action.itsi_event_generator.param.drilldown_uri",className:"notable-drilldown-uri",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("Drill-down link uri").t(),tooltip:e("Supports variable substitution with fields from the matching event, in format of %fieldname%)").t()}),this.children.EventIdentifierFields=new s({controlType:"Text",controlClass:"notable-event-identifier-fields-control",controlOptions:{modelAttribute:"action.itsi_event_generator.param.event_identifier_fields",className:"notable-event-identifier-fields",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("Notable Event Identifier Fields").t(),tooltip:e("Supports variable substitution with fields from the matching event, in format of %fieldname%)").t(),help:e("Set of Fields which are used together to identify if notable event is unique or not.").t()}),this.children.Duration=new s({controlType:"Text",controlClass:"duration-control",controlOptions:{className:"duration",modelAttribute:"alert.suppress.period",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("Suppress Period").t(),tooltip:e("Indicates how many seconds to ignore other events that match (i.e. have the same field values))").t()}),this.children.GroupByMultiSelect=new d({modelAttribute:"alert.suppress.fields",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,className:"groupby-control",placeholder:e("Type a field and press enter").t()}),this.children.GroupBy=new s({label:e("Fields to group by").t(),controls:[this.children.GroupByMultiSelect],help:e("Indicates what fields to consider when determining if another event matches this one").t()});var w=new c({modelAttribute:"action.rss",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel});this.children.IsRss=new s({label:e("Include in RSS feed").t(),help:e("The RSS link is available in Settings > Searches, reports, and alerts.").t(),controls:[w]});var D=new c({modelAttribute:"action.email",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel});this.children.IsEmail=new s({label:e("Send email").t(),controls:[D]}),this.children.EmailSubject=new s({controlType:"Text",controlClass:"email-subject-control",controlOptions:{modelAttribute:"action.email.subject",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},required:!0,_errorMsg:e("Cannot be empty").t(),label:e("Email subject").t()}),this.children.EmailToMultiSelect=new d({modelAttribute:"action.email.to",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,className:"email-to-control",placeholder:e("Type a field and press enter").t()}),this.children.EmailTo=new s({label:e("Email address(es)").t(),controls:[this.children.EmailToMultiSelect],required:!0});var x=new c({modelAttribute:"action.email.sendresults",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel}),T=new h({className:"email-format",toggleClassName:"btn",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel,modelAttribute:"action.email.format",prompt:e("Select a type").t(),items:a});this.children.SendResults=new s({label:e("Include results in email").t(),controls:[x,T]});var B=new c({modelAttribute:"action.script",model:this.CorrelationSearchBuilderModel.CorrelationSearchModel});this.children.IsScript=new s({label:e("Run a script").t(),controls:[B]}),this.children.Script=new s({controlType:"Text",controlClass:"script-control",controlOptions:{modelAttribute:"action.script.filename",className:"script",placeholder:e("Enter script name").t(),model:this.CorrelationSearchBuilderModel.CorrelationSearchModel},label:e("File name of the shell script to run").t(),help:e("Splunk runs the script from $SPLUNK_HOME/bin/scripts/").t()});var $='<label class="mandatory-marker">  *</label>';this.$(".search-properties-controls",this.$el).append(this.children.SearchName.render().el),this.children.SearchName.$el.find("label").after($),this.$(".search-properties-controls",this.$el).append(this.children.SearchDescription.render().el),this.$(".search-properties-controls",this.$el).append(this.children.SearchSource.render().el),this.$(".search-properties-controls",this.$el).append(this.children.DataModelSelector.render().el),this.$(".search-area",this.$el).append(this.children.Search.render().el),this.children.Search.$el.find("label").after($),this.children.TimeRange.render(),this.listenTo(this.children.TimeRange,"change",this._updateTimeInfo),this.$(".service-id-controls",this.$el).append(this.children.ServiceDropDown.render().el),this.$(".service-id-controls",this.$el).append(this.children.EntityFilter.render().el),this.$(".schedule-controls",this.$el).append(this.children.ScheduleType.render().el),this.$(".schedule-controls",this.$el).append(this.children.RunEvery.render().el),this.$(".schedule-controls",this.$el).append(this.children.Cron.render().el),this.listenTo(this.CorrelationSearchBuilderModel,"change:scheduletype",this._toggleScheduleType),this.$(".notable-events-controls",this.$el).append(this.children.NotableTitle.render().el),this.children.NotableTitle.$el.find("label").after($),this.$(".notable-events-controls",this.$el).append(this.children.NotableDescription.render().el),this.$(".notable-events-controls",this.$el).append(this.children.Owner.render().el),this.$(".notable-events-controls",this.$el).append(this.children.Severity.render().el),this.$(".notable-events-controls",this.$el).append(this.children.Status.render().el),this.$(".notable-events-controls",this.$el).append(this.children.DrillDownName.render().el),this.$(".notable-events-controls",this.$el).append(this.children.DrillDownSearch.render().el),this.$(".notable-events-other-controllers",this.$el).append(this.children.EventIdentifierFields.render().el),this.$(".notable-events-other-controllers",this.$el).append(this.children.DrillDownLinkTitle.render().el),this.$(".notable-events-other-controllers",this.$el).append(this.children.DrillDownLinkUri.render().el),this.$(".group-controls",this.$el).append(this.children.Duration.render().el),this.$(".group-controls",this.$el).append(this.children.GroupBy.render().el),this.$(".action-controls",this.$el).append(this.children.IsRss.render().el),this.$(".action-controls",this.$el).append(this.children.IsEmail.render().el),this.$(".action-controls",this.$el).append(this.children.EmailSubject.render().el),this.$(".action-controls",this.$el).append(this.children.EmailTo.render().el),this.$(".action-controls",this.$el).append(this.children.SendResults.render().el),this.$(".action-controls",this.$el).append(this.children.IsScript.render().el),this.$(".action-controls",this.$el).append(this.children.Script.render().el)},_cacheLastCronTypeSchedule:function(){this._lastCronTypeSchedule=this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("cron_schedule")},_toggleEmailControls:function(){l.normalizeBoolean(this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.email"))?(this.children.EmailSubject&&this.children.EmailSubject.show(),this.children.EmailTo&&this.children.EmailTo.show(),this.children.SendResults&&this.children.SendResults.show()):(this.children.EmailSubject&&this.children.EmailSubject.hide(),this.children.EmailTo&&this.children.EmailTo.hide(),this.children.SendResults&&this.children.SendResults.hide())},_toggleScriptControls:function(){l.normalizeBoolean(this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.script"))?this.children.Script&&this.children.Script.show():this.children.Script&&this.children.Script.hide()},_toggleScheduleType:function(){"cron"===this.CorrelationSearchBuilderModel.get("scheduletype")?(this.children.RunEvery&&this.children.RunEvery.hide(),this.children.Cron&&this.children.Cron.show(),this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("cron_schedule",this._lastCronTypeSchedule)):(this.children.RunEvery&&this.children.RunEvery.show(),this.children.Cron&&this.children.Cron.hide(),this._cacheLastCronTypeSchedule(),y.isBasicCronAvailable(this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("cron_schedule"))||this.CorrelationSearchBuilderModel.CorrelationSearchModel.set("cron_schedule","*/1 * * * *"))},_toggleSearchSource:function(){"datamodel"===this.CorrelationSearchBuilderModel.get("searchsource")?(this.children.DataModelSelector.$el.show(),this.disableSearch(),this.$("#search-manually-edit",this.$el).show(),this.DataModelInfoView&&this.DataModelInfoView.$el.show(),this.ExtraFiltersView&&this.ExtraFiltersView.$el.show()):(this.children.DataModelSelector.$el.hide(),this.enableSearch(),this.$("#search-manually-edit",this.$el).hide(),this.$("#search-parse-success-status",this.$el).hide(),this.$("#search-parse-fail-status",this.$el).hide(),this.DataModelInfoView&&this.DataModelInfoView.$el.hide(),this.ExtraFiltersView&&this.ExtraFiltersView.$el.hide())},_updateTimeInfo:function(){this.CorrelationSearchBuilderModel.CorrelationSearchModel.set({"dispatch.earliest_time":this.children.TimeRange.val().earliest_time,"dispatch.latest_time":this.children.TimeRange.val().latest_time}),this._setRealTimeCronSchedule()},_setRealTimeCronSchedule:function(){this._isRealtime()&&this.CorrelationSearchBuilderModel.CorrelationSearchModel.set({cron_schedule:"*/5 * * * *"})},_toggleAccordion:function(e){e.preventDefault();var i=t("#advance-options-group",this.$el);i.hasClass("active")?(i.removeClass("active"),this.$(this._accordionSettings.body).hide(),this.$(this._accordionSettings.icon).removeClass(this._accordionSettings.activeIconClass),this.$(this._accordionSettings.icon).addClass(this._accordionSettings.inactiveIconClass)):(i.addClass("active"),this.$(this._accordionSettings.body).show(),this.$(this._accordionSettings.icon).removeClass(this._accordionSettings.activeIconClass),this.$(this._accordionSettings.icon).addClass(this._accordionSettings.activeIconClass))},_isTimeRT:function(e){return e.indexOf("rt")>=0},_isRealtime:function(){return!!this.children.TimeRange.val()&&(this._isTimeRT(this.children.TimeRange.val().earliest_time)||this._isTimeRT(this.children.TimeRange.val().latest_time))},_handleDisablingOfSaveButton:function(){this.CorrelationSearchBuilderModel.get("is_new")||this.getServiceCollectionXHR.done(function(i){var a=l.stringToFieldList(this.CorrelationSearchBuilderModel.CorrelationSearchModel.get("action.itsi_event_generator.param.service_ids")),r=e.every(a,function(t){var a=e.findWhere(i,{_key:t});return"undefined"!=typeof a});r||(t("#save",this.$el).addClass("disabled"),this._saveButtonDisabled=!0,this._showWarningMessage())}.bind(this))},_showWarningMessage:function(){this._saveButtonDisabled&&(this.$(".correlation-search-editor-message-container").show(),this.$(".correlation-search-editor-message-container .alert-message").html(B))}});return k}.apply(t,a),!(void 0!==r&&(e.exports=r))},980:function(e,t,i){var a,r;a=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(981)],r=function(e,t,i,a){var r=e.template(a),l=i.View.extend({render:function(t){return this.$el.html(r({dataModelInfo:t,_:e})),this}});return l}.apply(t,a),!(void 0!==r&&(e.exports=r))},981:function(e,t){e.exports='<% var getDisplableFieldAggregates = function(aggregate) {\n\tvar displayVal = aggregate.function + "("+ aggregate.attribute+")";\n\tif(aggregate.alias) {\n\t\tdisplayVal = displayVal + " AS "+ aggregate.alias;\n\t}\n\treturn displayVal;\n};\n%>\n<div class="control-group" id="datamodelspec-control-group">\n\t<label class="control-label"><%- _(\'Data Model Specification\').t() %></label>\n\t\t<div class="controls">\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr class="datamodel-name-cell">\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<dl class="list-dotted">\n\t\t\t\t\t\t\t\t<dt>\n\t\t\t\t\t\t\t\t\t<%- _(\'DataModel Name\').t() %>\n\t\t\t\t\t\t\t\t</dt>\n\t\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t\t<%if(dataModelInfo && dataModelInfo.datamodel && dataModelInfo.datamodelDisplayName) { %>\n\t\t\t\t\t\t\t\t\t\t<%=dataModelInfo.datamodelDisplayName%>\n\t\t\t\t\t\t\t\t\t<%}%>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t<dt>\n\t\t\t\t\t\t\t\t\t<%- _(\'Object Name\').t() %>\n\t\t\t\t\t\t\t\t</dt>\n\t\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t\t<%if(dataModelInfo && dataModelInfo.object) { %>\n\t\t\t\t\t\t\t\t\t\t<%=dataModelInfo.object%>\n\t\t\t\t\t\t\t\t\t<%}%>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t<%if(dataModelInfo && dataModelInfo.aggregates) { %>\n\t\t\t\t\t\t\t\t\t\t<%var displayVals = [] %>\n\t\t\t\t\t\t\t\t\t\t<%for(var index=0; index< dataModelInfo.aggregates.length; index++) {%>\n\t\t\t\t\t\t\t\t\t\t\t<%displayVals.push(getDisplableFieldAggregates(dataModelInfo.aggregates[index]))%>\n\t\t\t\t\t\t\t\t\t\t<%}%>\n\t\t\t\t\t\t\t\t\t\t<dt><%- _(\'Field Aggregates\').t() %></dt><dd><%=displayVals.join(", ")%></dd>\n\t\t\t\t\t\t\t\t<%}%>\n\t\t\t\t\t\t\t</dl>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n</div>\n'},982:function(e,t,i){var a,r;a=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(368)],r=function(e,t,i,a){return i.Model.extend({defaults:{scheduletype:"basic",is_new:!0,searchsource:"adhoc"},initialize:function(e){i.Model.prototype.initialize.apply(this,arguments),this.CorrelationSearchModel=e&&e.CorrelationSearchModel||new a},validate:function(e,t){var i=[];if("basic"!==e.scheduletype&&"cron"!==e.scheduletype&&i.push({name:"scheduletype",message:"Invalid value! scheduletype attributes can accepts only basic or cron values only"}),i.length>0)return i}})}.apply(t,a),!(void 0!==r&&(e.exports=r))},983:function(e,t,i){var a,r;a=[i("shim/jquery"),i("shim/jquery.ui.core"),i("require/underscore"),i("require/backbone"),e,i("splunkjs/mvc/utils"),i("uri/route"),i("views/shared/Modal"),i(984),i(129)],r=function(e,t,i,a,r,l,o,n,s,d){return n.extend({moduleId:String(r.id),initialize:function(e){n.prototype.initialize.apply(this,arguments),this._title=e.modalTitle||i("Datamodel Selection").t(),this._primaryButtonText=e.modalPrimaryButtonText||i("Done").t(),this.DataModelSelector=new s({dataModelSpecification:e.dataModelSpecification||{}})},events:e.extend({},n.prototype.events,{"click .modal-btn-primary":"_hide"}),_hide:function(e){e.preventDefault(),this.trigger("selectModalClosed",this.DataModelSelector.getDataModelSpec()),this.hide()},render:function(){return this.$el.html(n.TEMPLATE),this.$el.addClass("datamodel-selector-modal"),this.$(n.BODY_SELECTOR).addClass("datamodel-selector-body"),this.$(n.HEADER_TITLE_SELECTOR).html(this._title),this.$(n.BODY_SELECTOR).append(this.DataModelSelector.render().el),this.$(n.FOOTER_SELECTOR).append('<a class="btn btn-primary modal-btn-primary pull-right" data-dismiss="modal">'+this._primaryButtonText+"</a>"),this}})}.apply(t,a),!(void 0!==r&&(e.exports=r))},984:function(e,t,i){function a(e){return e&&e.__esModule?e:{default:e}}var r,l,o=i(241),n=a(o);r=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("views/shared/controls/ControlGroup"),i(129),i(985),i(990),i(989),i(991),i(992),i(993),i(994),i(996)],l=function(e,t,i,a,r,l,o,s,d,c,h){var u=e.template(d,{_:e}),p=e.template(c),m=e.template(h),g=i.View.extend({tagName:"div",className:"datamodel-selector-view",initialize:function(e){this._firstRender=!0,this._datamodelFetchXHR=r.getDataModels(),this.selectionModel=new i.Model(e&&e.dataModelSpec||{}),this._controls={},this.DataModelAggregateRowCollection=new s(e&&e.dataModelSpec&&e&&e.dataModelSpec.aggregates||[]),this.listenTo(this.DataModelAggregateRowCollection,"add",this._addAggregateRow),this.listenTo(this.DataModelAggregateRowCollection,"reset",this._addAggregateAllRow)},render:function(){return this._firstRender?(this.$el.html('<p style="min-height: 435px; min-width: 485px;padding: 20px;">'+e("Loading Data Model information from Splunk...").t()+"</p>"),this._datamodelFetchXHR.done(function(){this._renderControls(),this._firstRender=!1}.bind(this))):this._renderControls(),this},events:{"click .object-node-label":"_selectObjectNode","click .object-field-row":"_addAggregateField","click .aggregate-field-remover-marker-cell":"_removeAggregateField"},_selectObjectNode:function(e){var i=t(e.currentTarget);this.$(".object-node-label").removeClass("selected-object-node"),i.addClass("selected-object-node");var a=JSON.parse(i.attr("data-value"));this.selectionModel.set("object",a),this._renderFields(a)},_addAggregateField:function(e){var i=t(e.currentTarget),a=i.find("td.field-label-cell"),r=JSON.parse(a.attr("data-value"));this.DataModelAggregateRowCollection.add(new o(r))},_removeAggregateField:function(e){var i=t(e.currentTarget),a=i.attr("data-value"),r=this.DataModelAggregateRowCollection.where({attribute:a});this.DataModelAggregateRowCollection.remove(r)},_renderControls:function(){this.$el.html(u),this._dataModelMap=this._dataModelMap||this._getDataModelHierarchy(),this._datamodelDisplayNames={};var t=this,i=r.cachedDataModelCollection.map(function(e){if(r.isEmpty(e.entry)||r.isEmpty(e.entry.content))return null;var i=e.entry.get("name"),a=e.entry.content.get("displayName");return t._datamodelDisplayNames[i]=a,{value:i,label:a}});e.contains(e.pluck(i,"value"),this.selectionModel.get("datamodel"))||this.selectionModel.set({datamodel:e.first(i).value,datamodelDisplayName:e.first(i).label},{silent:!0}),this._controls.dataModelSelect=new a({controlType:"SyntheticSelect",controlOptions:{model:this.selectionModel,modelAttribute:"datamodel",className:"dropdown-toggle",toggleClassName:"btn",items:i,popdownOptions:{attachDialogTo:"body"}},label:e("Data Model").t()}),this.$(".datamodel-select-container").append(this._controls.dataModelSelect.render().el),this.listenTo(this.selectionModel,"change:datamodel",this._renderDataModelTree),this._renderDataModelTree(),this.listenTo(this.selectionModel,"change:object change:datamodel",function(){e.invoke(this.DataModelAggregateRowCollection.toArray(),"destroy")}.bind(this))},_getDataModelHierarchy:function(){return r.cachedDataModelCollection.reduce(function(t,i){var a=i.entry.content.objects.toJSON(),r=i.entry.get("name"),l=[],o=["BaseEvent","BaseTransaction","BaseSearch"],n={},s={};return e.each(a,function(t){if(0!==t.objectName.indexOf("Missing_Extractions")){var i=[];e.each(t.calculations,function(t){t.outputFields instanceof Array&&e.each(t.outputFields,function(e){i.push(e)})});var a=t.fields.concat(i);a=e.filter(a,function(t){return e.contains(["string","number","timestamp"],t.type)&&"_time"!==t.displayName}),a=e.map(a,function(e){return{label:e.displayName,value:{valueLabel:o.indexOf(e.owner)!==-1?e.fieldName:e.owner+"."+e.fieldName,multivalue:e.multivalue,fieldName:e.fieldName,type:e.type,datamodel:r,attribute:o.indexOf(e.owner)!==-1?e.fieldName:e.owner+"."+e.fieldName,object:t.objectName}}});var d={label:t.displayName,fields:a,children:[]};if(e.contains(o,t.parentName))l.push(d);else if(n.hasOwnProperty(t.parentName)){var c=n[t.parentName];c.children.unshift(d)}else s.hasOwnProperty(t.parentName)||(s[t.parentName]=[]),s[t.parentName].push(d);s.hasOwnProperty(t.objectName)&&(e.each(s[t.objectName],function(e){d.children.unshift(e)}),delete s[t.objectName]),n[t.objectName]=d}}),t[r]=l,t},{})},_renderDataModelTree:function(){this.$(".field-list-container").html("<tr><td>"+e("Select a data model.").t()+"</td></tr>");var t=this.selectionModel.get("datamodel");t||(t=e.first((0,n.default)(this._dataModelMap)));var i=this._dataModelMap[t];"undefined"!=typeof i&&null!==i?this.$(".object-tree-container").html(p({objects:i,_:e})):this.$(".object-tree-container").html("<p>"+e("Select a data model.").t()+"</p>"),this.selectionModel.set("datamodelDisplayName",this._datamodelDisplayNames[t]||t)},_renderFields:function(t){var i=t.fields;"undefined"!=typeof i&&null!==i?this.$(".field-list-container").html(m({_:e,fields:i})):this.$(".field-list-container").html("<tr><td>"+e("Select a data model.").t()+"</td></tr>")},_addAggregateRow:function(t){if("undefined"!=typeof t&&null!==t){var i=new l({model:t});this.$(".field-aggregators-container").append(i.render().el)}else this.$(".field-aggregators-container").html("<tr><td>"+e("Select a field.").t()+"</td></tr>")},_addAggregateAllRow:function(){this.DataModelAggregateRowCollection.each(this._addAggregateRow,this)},getDataModelSpec:function(){return{datamodel:this.selectionModel.get("datamodel"),datamodelDisplayName:this.selectionModel.get("datamodelDisplayName"),object:this.selectionModel.get("object"),aggregates:e.map(this.DataModelAggregateRowCollection.models,function(e){return{function:e.get("function"),alias:e.get("alias"),attribute:e.get("attribute")}})}}});return g}.apply(t,r),!(void 0!==l&&(e.exports=l))},985:function(e,t,i){var a,r;a=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("views/shared/controls/ControlGroup"),i(986),i(987)],r=function(e,t,i,a,r,l){var o=e.template(r),n=i.View.extend({initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},events:{"click .aggregate-field-remover-marker":function(e){this.model.destroy()}},render:function(){return this.$el.html(o(this.model.toJSON())),this._renderControl(),this},_renderControl:function(){var t=new a({controlType:"SyntheticSelect",controlClass:"fieldoperation-control",controlOptions:{className:"field-operation",model:this.model,modelAttribute:"function",popdownOptions:{attachDialogTo:"body"},items:[{value:"avg",label:"avg"},{value:"count",label:"count"},{value:"dc",label:"dc"},{value:"min",label:"min"},{value:"median",label:"median"},{value:"max",label:"max"},{value:"stdev",label:"stdev"},{value:"sum",label:"sum"},{value:"values",label:"values"},{value:"earliest",label:"earliest"},{value:"latest",label:"latest"},{value:"estdc",label:"estdc"},{value:"estdc_error",label:"estdc_error"},{value:"first",label:"first"},{value:"last",label:"last"},{value:"list",label:"list"},{value:"mean",label:"mean"},{value:"mode",label:"mode"},{value:"per_day",label:"per_day"},{value:"per_hour",label:"per_hour"},{value:"per_minute",label:"per_minute"},{value:"per_second",label:"per_second"},{value:"range",label:"range"},{value:"stdevp",label:"stdevp"},{value:"sumsq",label:"sumsq"},{value:"var",label:"var"},{value:"varp",label:"varp"}]}});this.$(".aggregate-field-operation",this.$el).append(t.render().el);var i=new a({controlType:"Text",controlOptions:{inputClassName:"alias-input",model:this.model,modelAttribute:"alias",placeholder:e("Alias name").t()}});this.$(".aggregate-field-alias",this.$el).append(i.render().el)}});return n}.apply(t,a),!(void 0!==r&&(e.exports=r))},986:function(e,t){e.exports='<tr class="object-aggregate-field-row">\n\t<td class="aggregate-field-remover-marker-cell" data-value="<%=attribute%>">\n\t\t<a><i class="icon-x aggregate-field-remover-marker"></i></a>\n\t</td>\n\t<td class="aggregate-field-label-cell">\n\t\t<%=label %>\n\t</td>\n\t<td class="aggregate-field-operation-cell">\n\t\t<div class="aggregate-field-operation"></div>\n\t</td>\n\t<td class="aggregate-field-alias-cell">\n\t\t<div class="aggregate-field-alias"></div>\n\t</td>\n</tr>\n'},987:function(e,t,i){var a=i(988);"string"==typeof a&&(a=[[e.id,a,""]]);i(15)(a,{});a.locals&&(e.exports=a.locals)},988:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".object-aggregate-field-row td{min-width:60px}.object-aggregate-field-row td.aggregate-field-operation-cell{padding-left:5px;padding-right:5px}.object-aggregate-field-row td.aggregate-field-alias-cell{padding-left:5px;padding-right:5px;text-align:center}.object-aggregate-field-row td.aggregate-field-remover-marker-cell{text-align:center;padding-right:3px;padding-left:0;cursor:pointer}.alias-input{font-size:12px;width:120px}",""])},989:function(e,t,i){var a,r;a=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(990)],r=function(e,t,i,a){return i.Collection.extend({model:a})}.apply(t,a),!(void 0!==r&&(e.exports=r))},990:function(e,t,i){var a,r;a=[i("require/underscore"),i("shim/jquery"),i("require/backbone")],r=function(e,t,i){return i.Model.extend({defaults:{function:"count",attribute:"",alias:"",label:""}})}.apply(t,a),!(void 0!==r&&(e.exports=r))},991:function(e,t){e.exports='<div>\n\t<table style="width:100%;">\n\t\t<tbody>\n\t\t\t<tr style="border-bottom: 1px solid #DDDDDD;vertical-align: top;padding-left: 10px;padding-bottom: 10px;padding-top: 10px;">\n\t\t\t\t<td style="border-right: 1px solid #DDDDDD;vertical-align: top;padding-left: 10px;padding-bottom: 10px;padding-top: 10px;">\n\t\t\t\t\t<div class="datamodel-select-container">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="object-tree-container">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t\t<td style="vertical-align: top;padding: 10px;">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<%= _(\'Fields\').t() %>\n\t\t\t\t\t</div>\n\t\t\t\t\t<table style="width: 100%">\n\t\t\t\t\t\t<tbody class="field-list-container">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<%= _(\'Please select a Data Model Object...\').t() %>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td colspan="2">\n\t\t\t\t\t<div class="field-aggregators">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<%= _(\'Field Aggregates\').t() %>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<table style="width: 100%">\n\t\t\t\t\t\t\t<tbody class="field-aggregators-container">\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n</div>'},992:function(e,t){e.exports='<div>\n\t<%= _("Objects").t() %>\n</div>\n<% var renderNode = function(object) { %>\n<div class="object-node-container">\n\t<div class="object-node-label" data-value="<%- JSON.stringify({label: object.label, fields: object.fields}) %>">\n\t\t<a><span><%= object.label %></span></a>\n\t</div>\n\t<% if (object.children.length !== 0) { %>\n\t\t<div class="object-node-children-container">\n\t\t\t<% _.each(object.children, renderNode); %>\n\t\t</div>\n\t<% } %>\n</div>\n<% }; %>\n<% _.each(objects, renderNode); %>\n'},993:function(e,t){e.exports='<% var renderField = function(field) { %>\n<tr class="object-field-row">\n\t<td class="field-selected-marker-cell">\n\t\t<a><i class="icon-plus field-selected-marker"></i></a>\n\t</td>\n\t<td class="field-label-cell" data-value="<%-JSON.stringify({label: field.label, attribute:field.value.attribute})%>">\n\t\t<a>\n\t\t\t<%= field.label %>\n\t\t</a>\n\t</td>\n\t<td class="field-type-cell">\n\t\t<% var typeIcon = field.value.type === "timestamp" ? "clock" : field.value.type %>\n\t\t<i class="icon-<%= typeIcon %>"></i>\n\t</td>\n</tr>\n<% }; %>\n<% _.each(fields, renderField);%>'},994:function(e,t,i){var a=i(995);"string"==typeof a&&(a=[[e.id,a,""]]);i(15)(a,{});a.locals&&(e.exports=a.locals)},995:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".object-node-children-container{padding-left:15px}.object-node-label{border-top:1px solid transparent;border-left:1px solid transparent;border-bottom:1px solid transparent}.object-node-label.selected-object-node{background-color:#fff;border-top:1px solid #ddd;border-left:1px solid #ddd;border-bottom:1px solid #ddd}",""])},996:function(e,t,i){var a=i(997);"string"==typeof a&&(a=[[e.id,a,""]]);i(15)(a,{});a.locals&&(e.exports=a.locals)},997:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".object-field-row{cursor:pointer}.object-field-row td{min-width:10px;text-align:left}.object-field-row td.field-type-cell{padding-left:40px;text-align:right}.object-field-row td.field-label-cell{min-width:100px}.object-field-row td.field-selected-marker-cell{text-align:center;padding-right:3px;padding-left:0}",""])},998:function(e,t,i){var a,r;a=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("views/shared/controls/ControlGroup"),i("views/shared/controls/SyntheticSelectControl"),i("views/shared/controls/TextControl"),i("views/shared/controls/SyntheticCheckboxControl"),i("views/shared/controls/MultiInputControl"),i(999),i(1e3)],r=function(e,t,i,a,r,l,o,n,s){var d=i.View.extend({initialize:function(){this.children={}},_renderControls:function(t){t&&(t.eventFilter&&(this.children.eventFilter=new a({controlType:"Text",controlClass:"event-filter-control",controlOptions:{modelAttribute:t.eventFilter.eventFilterAttribute,model:t.eventFilter.model},label:e("Event Filter").t(),help:e('Specify a string to filter the data (or leave blank if no filtering is required).<br/>Events filtering will occur before any statistics are applied.<br/> This string needs to be a valid <a target="_blank" href="http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/Where">where clause</a>.').t()}),this.$(".datamodel-filters-groups").append(this.children.eventFilter.render().el)),t.splitby&&(this.children.splitBy=new n({modelAttribute:t.splitby.splitbyAttribute,model:t.splitby.model,autoCompleteFields:t.splitby.autoCompleteList,className:"split-by-multiselet",placeholder:e("Type a field and press enter").t()}),this.children.splitByControl=new a({label:e("Split By").t(),controls:[this.children.splitBy],help:e("Select the fields to split by, leave blank if you do not want to split by anything").t()}),this.$(".datamodel-filters-groups").append(this.children.splitByControl.render().el)),t.resultFilter&&(this.children.resultFilterAttribute=new r({className:"result-filter-control-group",toggleClassName:"btn",prompt:e("Select a field").t(),model:t.resultFilter.model,modelAttribute:t.resultFilter.fieldAttribute,items:t.resultFilter.filedOptionsList}),this.children.resultFilterOpertion=new r({className:"result-filter-control-group",toggleClassName:"btn",prompt:e("Select a operation").t(),model:t.resultFilter.model,modelAttribute:t.resultFilter.comparatorAttribute,items:t.resultFilter.model.get(t.resultFilter.comparatorList)||[{value:">",label:e("greater than").t()},{value:">=",label:e("greater than or equal to").t()},{value:"<",label:e("less than").t()},{value:"<=",label:e("less than or equal to").t()},{value:"=",label:e("equal to").t()},{value:"!=",label:e("not equal to").t()}],popdownOptions:{attachDialogTo:"body"}}),this.children.resultFilterValue=new l({className:"result-filter-value",model:t.resultFilter.model,modelAttribute:t.resultFilter.valueAttribute,placeholder:e("value").t()}),this.children.resultFilter=new a({label:e("Result Filter").t(),controls:[this.children.resultFilterAttribute,this.children.resultFilterOpertion,this.children.resultFilterValue],help:e("Define the logic to indicate when the search should match").t()}),this.$(".datamodel-filters-groups").append(this.children.resultFilter.render().el)))},render:function(e){return this.$el.html(s),this._renderControls(e),this}});return d}.apply(t,a),!(void 0!==r&&(e.exports=r))},999:function(e,t){e.exports='<div class="datamodel-filters-groups"></div>\n'},1e3:function(e,t,i){var a=i(1001);"string"==typeof a&&(a=[[e.id,a,""]]);i(15)(a,{});a.locals&&(e.exports=a.locals)},1001:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".result-filter-control-group{padding-bottom:5px}.split-by-multiselet{width:80%}",""])},1008:function(e,t,i){var a,r;a=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc/utils"),i("shim/splunk.util"),i("util/time")],r=function(e,t,i,a,r,l){var o={mapNotableFields:'| rename "_time" as "orig_time","_raw" as "orig_raw" ',tstatsTemplate:e.template("| tstats <%= aggregatesclause %> FROM datamodel=<%= datamodel %> <%= whereclause %> <%= byclause %> <%=mapfieldclause%> <%=resultclause%> "),dataModelTemplate:e.template("| datamodel <%= datamodel %> <%= object %> search <%= whereclause %> <%=aggreandsplitbyclause%> <%=mapfieldclause%> <%=resultclause%> "),_makeRawSearch:function(e){if(e&&e.datamodel&&e.object){var t=this._makeAggregates(e),i=this._makeSplitBy(e),a=this._makeResultFilter(e),r=this._makeEventFilter(e),l="",o="",n="";return r&&(l=" | where "+r),t&&(o=" | stats "+t,i&&(o+=i)),a&&(n=" | where "+a),this.dataModelTemplate({datamodel:e.datamodel,object:e.object,whereclause:l,aggreandsplitbyclause:o,resultclause:n,mapfieldclause:this.mapNotableFields})}return console.log("Can't create datamodel search because there is no datamodel or object name is not defined."),
""},_makeTstatsSearch:function(e){if(e&&e.datamodel&&e.object&&e.aggregates){var t=this._makeAggregates(e),i=this._makeSplitBy(e),a=this._makeResultFilter(e),r=this._makeEventFilter(e,!0),l="",o="",n="";return r&&(l=" where "+r),i&&(o=i),a&&(n=" | where "+a),this.tstatsTemplate({datamodel:e.datamodel,aggregatesclause:t,whereclause:l,byclause:o,resultclause:n,mapfieldclause:this.mapNotableFields})}return console.log("Can't create tstats search because there is no datamodel or spec or aggregates."),""},_makeAggregates:function(t){var i="";return t&&e.each(t.aggregates,function(e){var t="",a=e.function||void 0,r=e.attribute||void 0,l=e.alias||void 0;r&&a?(t=a+"("+r+")",l&&(t=t+' as "'+l+'"')):"count"===a?(t=a,l&&(t=t+' as "'+l+'"')):console.log("No aggregates or function is provided."),t&&(i=i?i+", "+t:t)}),i},_makeSplitBy:function(t){var i="";if(t){var a=e.filter(e.map(t.splitby,function(e){return e.attribute||void 0}),function(e){return void 0!==e}).join(",");a&&(i=" by "+a)}return i},_makeEventFilter:function(e,t){var i="";return i=t?e&&e.eventFilter?e.eventFilter.replace("'",'"'):"":e&&e.eventFilter?e.eventFilter:""},_makeResultFilter:function(e){var t="";if(e&&e.resultFilter){var i=e.resultFilter.field,a=e.resultFilter.comparator,r=e.resultFilter.value;i&&a&&r&&(t="'"+i+"'"+a+r)}return t},createSearch:function(i){var a=t.Deferred(),r={};if(i&&i.datamodel&&i.object){var o,n,s=l.isRealtime(i.latest)||l.isRealtime(i.earliest);i.aggregates&&i.aggregates.length>0&&(o=this._makeTstatsSearch(i)),n=this._makeRawSearch(i),o&&!s?this._isSearchParsed(o).done(function(t){r=e.extend(t),r.search=o,a.resolve(r)}).fail(function(t){r=e.extend(t),r.search=o,a.resolve(r)}):this._isSearchParsed(n).done(function(t){r=e.extend(t),r.search=n,a.resolve(r)}).fail(function(t){r=e.extend(t),r.search=n,a.resolve(r)})}else r.search="",r.parsed=!0,r.message=e("Could not create search without object and datamodel.").t(),a.resolve(r);return a},_isSearchParsed:function(i){var a=t.Deferred(),l={};i=i.trim(),"|"!==i.substring(0,1)&&(i="search "+i);var o={output_mode:"json",q:i,parse_only:!0},n=r.make_url("splunkd/__raw/services/search/parser");return t.ajax({url:n,type:"GET",data:o,async:!1,success:function(){l.parsed=!0,l.message=e("Search is parsed successfully.").t(),a.resolve(l)},error:function(e){l.parsed=!1,l.message=e.responseJSON.messages[0].text,a.reject(l)}}),a}};return o}.apply(t,a),!(void 0!==r&&(e.exports=r))},1009:function(e,t,i){var a,r;a=[i("shim/jquery"),i("require/backbone"),i("require/underscore"),i("collections/SplunkDsBase"),i(1010)],r=function(e,t,i,a,r){var l=a.extend({url:"configs/conf-drilldownsearch_offset",model:r});return l}.apply(t,a),!(void 0!==r&&(e.exports=r))},1010:function(e,t,i){var a,r;a=[i("shim/jquery"),i("require/backbone"),i("require/underscore"),i("shim/splunk.util"),i("models/SplunkDBase")],r=function(e,t,i,a,r){var l=r.extend({url:"configs/conf-drilldownsearch_offset",getEarliestOffsetDescription:function(){var e=this.entry.content.get("earliest_description")||this.entry.content.get("description"),t=a.sprintf(i("Last %s").t(),e);switch(e){case"minute":t=i("Last minute").t();break;case"5 minutes":t=i("Last 5 minutes").t();break;case"15 minutes":t=i("Last 15 minutes").t();break;case"30 minutes":t=i("Last 30 minutes").t();break;case"60 minutes":t=i("Last 60 minutes").t();break;case"4 hours":t=i("Last 4 hours").t();break;case"24 hours":t=i("Last 24 hours").t();break;case"7 days":t=i("Last 7 days").t();break;case"30 days":t=i("Last 30 days").t();break;case"90 days":t=i("Last 90 days").t()}return t},getLatestOffsetDescription:function(){var e=this.entry.content.get("latest_description")||this.entry.content.get("description"),t=a.sprintf(i("Next %s").t(),e);switch(e){case"minute":t=i("Next minute").t();break;case"5 minutes":t=i("Next 5 minutes").t();break;case"15 minutes":t=i("Next 15 minutes").t();break;case"30 minutes":t=i("Next 30 minutes").t();break;case"60 minutes":t=i("Next 60 minutes").t();break;case"4 hours":t=i("Next 4 hours").t();break;case"24 hours":t=i("Next 24 hours").t();break;case"7 days":t=i("Next 7 days").t();break;case"30 days":t=i("Next 30 days").t();break;case"90 days":t=i("Next 90 days").t()}return t},getTimeInSec:function(){return this.entry.content.get("timeInSecs")}});return l}.apply(t,a),!(void 0!==r&&(e.exports=r))},1011:function(e,t){e.exports='<div class="correlation-search-editor-message-container hide">\n\t<div class="alert alert-warning">\n\t\t<i class="icon-alert"></i>\n\t\t<span class="alert-message"></span>\n\t</div>\n</div>\n<div class="form form-horizontal">\n\t<h3 class="search-builder-header"><%- _(\'Search Properties\').t() %></h3>\n\t<div class="search-properties-controls"></div>\n\t<div class="datamodel-info-view"></div>\n\t<div class="datamodel-filter-view"></div>\n\t<div class="search-text-area-controls">\n\t\t<div class="search-area"></div>\n\t\t<div class="controls">\n\t\t\t<div id="search-parse-success-status" class="hide alert alert-info">\n\t\t\t\t<i class="icon-alert"></i><%- _(\'Search parses successfully\').t() %>\n\t\t\t</div>\n\t\t\t<div id="search-parse-fail-status" class="hide alert alert-error">\n\t\t\t\t<i class="icon-alert"></i><%- _(\'Search does not parse\').t() %>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="control-group" id="time-range-control-group">\n\t\t\t<label class="control-label"><%- _(\'Time range\').t() %></label>\n\t\t\t<div id="time-range-control"></div>\n\t</div>\n\t<h3 class="search-builder-header"><%- _(\'Association\').t() %></h3>\n\t<div class="service-id-controls"></div>\n\t<h3 class="search-builder-header"><%- _(\'Schedule\').t() %></h3>\n\t<div class="schedule-controls"></div>\n\t<h3 class="search-builder-header"><%- _(\'Notable Events\').t() %></h3>\n\t<div class="notable-events-controls"></div>\n\t<div class="notable-events-drilldown-offset-controls">\n\t\t<div class="control-group" id="drill-down-earliest-time-range-control-group">\n\t\t\t<label class="control-label"><%- _(\'Drill-down earliest offset\').t() %></label>\n\t\t\t<div class="controls" id="drill-down-earliest-time-range-control"><%-_("Loading...").t()%></div>\n\t\t</div>\n\t\t<div class="control-group" id="drill-down-latest-time-range-control-group">\n\t\t\t<label class="control-label"><%- _(\'Drill-down latest offset\').t() %></label>\n\t\t\t<div class="controls" id="drill-down-latest-time-range-control"><%-_("Loading...").t()%></div>\n\t\t</div>\n\t</div>\n    <div class="notable-events-other-controllers"></div>\n\t<div class="accordion">\n\t\t<div class="accordion-group" id="advance-options-group">\n\t\t\t<div class="accordion-heading">\n\t\t\t\t<a class="accordion-toggle" style="font-size: 16px;">\n\t\t\t\t\t<i class="icon-accordion-toggle icon-triangle-right-small" id="advance-options-group-icon" style="font-size: 16px;"></i>\n\t\t\t\t\t<span class="search-builder-header"> <%- _(\'Advanced Options\').t() %> </span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class="accordion-body" style="display: none;">\n\t\t\t\t<div class="accordion-inner">\n\t\t\t\t\t<h3 class="search-builder-header"><%- _(\'Throttling\').t() %></h3>\n\t\t\t\t\t<div class="group-controls"></div>\n\t\t\t\t\t<h3 class="search-builder-header"><%- _(\'Actions\').t() %></h3>\n\t\t\t\t\t<div class="action-controls"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="actions" style="padding: 10px;">\n\t\t<% if(listLink !== null ) { %>\n\t\t\t<a id="cancel" class="btn label_from_data pull-left" style="display: inline;"><%- _(\'Cancel\').t() %></a>\n\t\t<% } %>\n\t\t<a id="save" class="btn btn-primary pull-right" style="display: inline;"><%- _(\'Save\').t() %></a>\n\t</div>\n</div>\n'},1012:function(e,t,i){var a=i(1013);"string"==typeof a&&(a=[[e.id,a,""]]);i(15)(a,{});a.locals&&(e.exports=a.locals)},1013:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".input-search-textarea{height:120px;width:240px;white-space:pre-wrap;overflow:auto}.search-builder-header{color:#65a637}.groupby-control{width:220px}.email-to-control{width:240px}.service-multi-input-select-container .select2-container{width:33%}#drill-down-earliest-time-range-control-group label.control-label,#drill-down-latest-time-range-control-group label.control-label,#time-range-control-group label.control-label{padding-top:10px}.correlation-search-editor-message-container{position:absolute;z-index:120;top:100px;background-color:#fcf3d7;border:1px solid #f2c33c;left:15%;right:15%;border-radius:4px;padding-left:15px;padding-top:10px}.correlation-search-editor-message-container .alert-warning{padding-bottom:15px;margin-bottom:0}.correlation-search-editor-message-container .alert-message{padding-left:10px}",""])},1016:function(e,t,i){var a=i(1017);"string"==typeof a&&(a=[[e.id,a,""]]);i(15)(a,{});a.locals&&(e.exports=a.locals)},1017:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".dashboard-row1{margin:20px auto;width:940px}#correlation_search_editor_container{background-color:#fff;padding:20px}h1{font-size:20px}h2{font-size:16px}",""])}});