webpackJsonp([30],{0:function(e,t,i){var n,a;i.p=function(){function e(){for(var e,i,n="",a=0,r=arguments.length;a<r;a++)e=arguments[a].toString(),i=e.length,i>1&&"/"==e.charAt(i-1)&&(e=e.substring(0,i-1)),n+="/"!=e.charAt(0)?"/"+e:e;if("/"!=n){var o=n.split("/"),l=o[1];if("static"==l||"modules"==l){var s=n.substring(l.length+2,n.length);n="/"+l,window.$C.BUILD_NUMBER&&(n+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(n+="."+window.$C.BUILD_PUSH_NUMBER),"app"==o[2]&&(n+=":"+t("APP_BUILD",0)),n+="/"+s}}var d=t("MRSPARKLE_ROOT_PATH","/"),c=t("DJANGO_ROOT_PATH",""),p=t("LOCALE","en-US"),h="";return h=c&&n.substring(0,c.length)===c?n.replace(c,c+"/"+p.toLowerCase()):"/"+p+n,""==d||"/"==d?h:d+h}function t(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return e("/static/app/itsi/build/pages")+"/"}(),n=[i("shim/jquery"),i("require/backbone"),i("require/underscore"),i("shim/splunk.util"),i("util/splunkd_utils"),i("models/services/server/ServerInfo"),i(4),i(129),i(473),i(902),i(291),i(955),i(2260),i(2851),i(2859),i(252),i(148),i(149)],a=function(e,t,i,n,a,r,o,l,s,d,c,p,h,u,g,f,_,v){var y=o(i("Notable Event Aggregation Policy Detail View").t()),m=e("#app-main-layout"),w=new d;e("body").append(w.render().el),w.show(i("Fetching configurations...").t()),m.html('<div class="event-management-aggregation-policy-detail-container"></div>');var b=function(){var t=y.defaultTokenModel.get("savedAggregationPolicyId"),a=function(e){w.hide();var t=new s({errorMessage:i("Could not load settings for the page. May need to check user settings for roles and permissions.").t(),htmlResponse:e});t.show()},o=function(){var e=new r;e.fetch({success:function(){var r=new h({_key:t}),o=n.make_url(["custom","SA-ITOA","event_management_interface","notable_event_aggregation_policy",t,"perms"].join("/"));l.getPermissionsForObject(o,e).then(function(e,t){var n=t[0].entry[0].content.roles;if(r.get("_key")===_.getDefaultPolicyId()){var a=i.some(n,function(e){return _.getAuthorizedRolesForFeature("defaultNEAPEdit").indexOf(e)!==-1});d(r,!a)}else{var o=e[0].acl.write;if(o.length>0&&"*"===o[0])d(r,!1);else{var l=i.find(o,function(e){return i.find(n,function(t){return e===t})});d(r,!l)}}},function(e){403===e.status?d(r,!1):a(r,e)})}.bind(this),error:function(e,t){a(t)}.bind(this)})},d=function(t,i){t.fetch().done(function(){var n=f.userTimezone.fetchUserAuthTimezone();n.done(function(n){v.preventInvalidTimezones(n),w.hide(),localStorage.setItem("timezoneId",n.get("id"));var a=e.when(l.isUserCapable("notable_event_aggregation_policy","write"));a.always(function(e){var n=!i&&!!e.is_capable&&e.is_capable,a=new p({model:t,ContentView:u,HeaderView:g,headerViewOptions:{isReadOnly:!n,clickToEdit:!1},readOnly:!n});m.find(".event-management-aggregation-policy-detail-container").append(a.render().el)})})}).error(function(e){a(t,e)})},b=c.getNotableEventsConfigsInfo(),R=c.getNotableEventsActions(),E=e.when(b,R);E.done(o).fail(a)};l.setupViewFromDefaultTokenModel(y,b,"savedAggregationPolicyId")}.apply(t,n),!(void 0!==a&&(e.exports=a))},2851:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("shim/splunk.util"),i(129),i(473),i(2365),i(2358),i(2792),i(2832),i(2852),i(2849)],a=function(e,t,i,n,a,r,o,l,s,d,c){var p=o.extend({initialize:function(e){e=e||{},e.tabId="filtercriteria",e.tabLabel=t("Filtering Criteria").t(),e.contentViewOptions={model:e.model,isReadOnly:e.isReadOnly},e.ContentView=s,o.prototype.initialize.call(this,e)}}),h=o.extend({initialize:function(e){e=e||{},e.tabId="actionrules",e.tabLabel=t("Action Rules").t(),e.contentViewOptions={model:e.model,isReadOnly:e.isReadOnly},e.ContentView=d,o.prototype.initialize.call(this,e)}}),u=o.extend({initialize:function(e){e=e||{},e.tabId="filtercriteria_smart",e.tabLabel=t("Filtering Criteria").t(),e.contentViewOptions={model:e.model,isReadOnly:e.isReadOnly},e.ContentView=c,o.prototype.initialize.call(this,e)}}),g=i.View.extend({initialize:function(e){if(e=e||{},!e.model)throw"Configuration Edit View requires a policy model";this._model=e.model,this.children={},this._firstRender=!0,this._isReadOnly=e.isReadOnly,this._originalACEStatus=this._model.isACEEnabled(),this.listenTo(this._model,"change:ace_enabled",this.render)},checkJavaVersion:function(){var e=a.checkJavaVersion();e.fail(function(e){var i=t("Java version installed on this search head does not support Aggregation Policies, Java version 1.7 or greater is required.").t();e=e||i;var n=new r({errorMessage:e,onHiddenRemove:!0});n.render(),n.show()})},render:function(){this._firstRender&&(this.$el.html('<div class="aggregation-policy-head"></div><div class="aggregation-policy-body"></div>'),this._firstRender=!1),t.each(this.children,function(e,t){e&&e instanceof i.View&&(this.stopListening(e),e.remove(),delete this.children[t])},this),this._model.get("ace_enabled")?this._renderAceTabs():this._renderDefaultTabs();var e=t.map(this.children,function(e){return e});return this._safeRemoveView(this.tabView),this.tabView=new l({tabs:e}),this.$(".aggregation-policy-body").append(this.tabView.render().$el),setTimeout(function(){this.tabView.showTab(this.tabView.tabs[0].getTabId())}.bind(this),0),this.checkJavaVersion(),this},_renderDefaultTabs:function(){this._currentACEStatus=!1,this._safeRemoveView(this.children.filteringCriteriaTab),this.children.filteringCriteriaTab=new p({model:this._model,isReadOnly:this._isReadOnly}),this._safeRemoveView(this.children.actionRulesTab),this.children.actionRulesTab=new h({model:this._model,isReadOnly:this._isReadOnly})},_renderAceTabs:function(){this._currentACEStatus=!0,this._safeRemoveView(this.children.groupingFactorsTab),this.children.groupingFactorsTab=new u({model:this._model,isReadOnly:this._isReadOnly}),this._safeRemoveView(this.children.actionRulesTab),this.children.actionRulesTab=new h({model:this._model,isReadOnly:this._isReadOnly})},refreshModel:function(e,i){if("cancel"===i.type){if(this._originalACEStatus!==this._currentACEStatus)return void this.render()}else"save"===i.type&&(this._originalACEStatus=e.isACEEnabled());t.each(this.children,function(t){t&&t.refreshModel&&t.refreshModel(e)})},_safeRemoveView:function(e){e instanceof i.View&&(this.stopListening(e),e.remove())}});return g}.apply(t,n),!(void 0!==a&&(e.exports=a))},2852:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2501),i(1333),i(2792),i(2793),i(2808),i(2804),i(2820),i(2826),i(2853),i(2857)],a=function(e,t,i,n,a,r,o,l,s,d,c,p){var h='<a class="section-tooltip" data-original-title="" title="">'+t("?").t()+"</a>",u='<a class="section-warning-tooltip section-tooltip" data-original-title="" title=""><span class="alert alert-info"><i class="icon-alert"></i></span></a>',g=n.extend({initialize:function(e){return e=e||{},e.panelId="filtercriteria",e.panelTitle=t("Include the events if").t(),e.contentViewOptions={model:e.model,policyModel:e.policyModel,isReadOnly:e.isReadOnly},e.ContentView=o,n.prototype.initialize.call(this,e)},render:function(){n.prototype.render.apply(this,arguments);var i=e(h).attr("data-original-title",t("Any notable event that matches the following conditions will be put into a group.").t());return this.$(".collapsible-panel-title").first().after(i),this}}),f=n.extend({initialize:function(e){return e=e||{},e.panelId="smartmode",e.panelTitle=t("Smart Mode grouping").t(),e.contentViewOptions={model:e.model,isReadOnly:e.isReadOnly},e.ContentView=l,n.prototype.initialize.call(this,e)},render:function(){return n.prototype.render.apply(this,arguments),this}}),_=n.extend({initialize:function(e){return e=e||{},e.panelId="splitevents",e.panelTitle=t("Split events by field").t(),e.contentViewOptions={isReadOnly:e.isReadOnly,model:e.model},e.ContentView=s,n.prototype.initialize.call(this,e)},render:function(){n.prototype.render.apply(this,arguments);var i=e(h).attr("data-original-title",t("Split notable events into separate groups using the specified fields.").t()),a=e(u).attr("data-original-title",t("Groups in the preview do not reflect split-by fields.").t());return this.$(".collapsible-panel-title").first().after(i,a),this}}),v=n.extend({initialize:function(e){var i=t.where(a.NOTABLE_EVENT_AGGREGATION_POLICY_BREAKING_CRITERIA_ITEMS,{value:"pause"});return e=e||{},e.panelId="breakingcriteria",e.panelTitle=t("Break group").t(),e.contentViewOptions={isReadOnly:e.isReadOnly,model:e.model,canAddCriteria:!1,canDeleteCriterion:!1,criteriaItems:i},e.ContentView=d,n.prototype.initialize.call(this,e)},render:function(){n.prototype.render.apply(this,arguments);var i=e(h).attr("data-original-title",t("When the following conditions are met the current group ends and a new one is created.").t()),a=e(u).attr("data-original-title",t("Groups in the preview do not reflect breaking conditions.").t());return this.$(".collapsible-panel-title").first().after(i,a),this}}),y=n.extend({initialize:function(e){return e=e||{},e.panelId="groupinfo",e.panelTitle=t("Group information").t(),e.contentViewOptions={isReadOnly:e.isReadOnly,model:e.model},e.ContentView=c,n.prototype.initialize.call(this,e)},render:function(){n.prototype.render.apply(this,arguments);var i=e(u).attr("data-original-title",t("Groups in the preview do not show group information.").t());return this.$(".collapsible-panel-title").first().after(i),this}}),m=r.extend({title:t("Filtering Criteria").t(),description:t("Use machine learning to group notable events based on several configurable factors").t(),NotableEventsPreview:p,setupPanels:function(){this.children.notableEventAggregationPolicyFilterCriteriaEventsFilterPanelView=new g({model:this._policyModel.get("filter_criteria"),policyModel:this._policyModel,expanded:!0,isReadOnly:this._isReadOnly}),this.children.notableEventAggregationPolicyFilterCriteriaSmartModePanelView=new f({model:this._policyModel,policyModel:this._policyModel,expanded:!0,isReadOnly:this._isReadOnly}),expanded=!!this.children.notableEventAggregationPolicySplitEventsByFieldPanelView&&this.children.notableEventAggregationPolicySplitEventsByFieldPanelView.expanded,this.children.notableEventAggregationPolicySplitEventsByFieldPanelView=new _({isReadOnly:this._isReadOnly,model:this._policyModel,expanded:expanded}),expanded=!!this.children.notableEventAggregationPolicyFilterCriteriaBreakingCriteriaPanelView&&this.children.notableEventAggregationPolicyFilterCriteriaBreakingCriteriaPanelView.expanded,this.children.notableEventAggregationPolicyFilterCriteriaBreakingCriteriaPanelView=new v({isReadOnly:this._isReadOnly,model:this._policyModel.get("ace_breaking_criteria"),policyModel:this._policyModel,expanded:expanded}),expanded=!!this.children.notableEventAggregationPolicyFilterCriteriaGroupInformationPanelView&&this.children.notableEventAggregationPolicyFilterCriteriaGroupInformationPanelView.expanded,this.children.notableEventAggregationPolicyFilterCriteriaGroupInformationPanelView=new y({isReadOnly:this._isReadOnly,model:this._policyModel,expanded:expanded})}});return m}.apply(t,n),!(void 0!==a&&(e.exports=a))},2853:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}var a,r,o=i(130),l=n(o);a=[i("require/underscore"),i("require/backbone"),i("splunkjs/mvc"),i("views/shared/controls/SyntheticSelectControl"),i(1333),i(2831),i(2854),i(2855),i(2856)],r=function(e,t,i,n,a,r,o,s,d){var c=e.template('<div class="notable-event-aggregation-policy-preview-header-options">\t\t\t\t\t<div class="notable-event-aggregation-policy-preview-header-time-range-container">\t\t\t\t\t<div>'+e("Group types for ").t()+"</div>\t\t\t\t\t</div>\t\t\t</div>"),p=t.View.extend({initialize:function(){var t=i.Components.get("default");t.set("earliest_time",e.first(a.ACE_PREVIEW_TIME_RANGE).value),this._ACEPreviewTimepicker=new n({items:a.ACE_PREVIEW_TIME_RANGE,popdownOptions:{attachDialogTo:"body"},model:t,modelAttribute:"earliest_time"}),this.listenTo(t,"change:earliest_time",function(){this.trigger("timerangeupdate")})},render:function(){return this.$el.html(c({_:e})),this.$(".notable-event-aggregation-policy-preview-header-time-range-container").append(this._ACEPreviewTimepicker.render().$el),this},_safeRemoveView:function(e){e&&e instanceof t.View&&(this.stopListening(e),e.remove())},remove:function(){return this._safeRemoveView(this._ACEPreviewTimepicker),t.View.prototype.remove.apply(this,arguments)}}),h=r.extend({CELL_RENDERERS:[o,s,d],HeaderView:p,initialize:function(t){this.policyModel=t.policyModel,this._serviceTopologyFields=[e('"Service"').t()],this.FIELDS_TO_SHOW=[e('"Count"').t(),e('"Summary"').t(),e('"Similar Text Values"').t(),e('"Similar Category Values"').t(),"_event_ids"],1===e.result(this.policyModel,"defaults").service_topology_enabled&&this.FIELDS_TO_SHOW.push(e('"Service"').t()),r.prototype.initialize.apply(this,arguments),this.listenTo(this.headerView,"timerangeupdate",e.debounce(this.update)),this.addListeners()},_toggleServiceColumn:function(t){var i=1===t?e.union:e.difference;this.FIELDS_TO_SHOW=i(this.FIELDS_TO_SHOW,this._serviceTopologyFields)},getSearchQuery:function(){var e,t,i=["index=itsi_tracked_alerts | `ace_event_limit` | fields _time, _raw, source, sourcetype | itsicorrelationengine"],n='text_fields=""',a='attribute_fields=""',r=' | spath | eval topology_name=if(topology_name="DEFAULT","",topology_name) | rename event_ids{} as _event_ids, event_count as "Count", text_factors{} as "Similar Text Values", attribute_factors{} as "Similar Category Values", description as "Summary", topology_name as "Service" ';if(this.policyModel.get("ace_factor_fields").length>0&&this.policyModel.get("ace_factor_weights").length>0){var o=this.policyModel.toJSON();i.push('policy="'+(0,l.default)(o).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'),e="text="+this.policyModel.get("ace_factor_weights").getWeight("text"),t="attribute="+this.policyModel.get("ace_factor_weights").getWeight("attribute");var s=this.policyModel.get("ace_factor_fields").where({field_type:"text"});s.length&&(n='text_fields="'+s.map(function(e){return e.get("field_name")}).join()+'"');var d=this.policyModel.get("ace_factor_fields").where({field_type:"attribute"});d.length&&(a='attribute_fields="'+d.map(function(e){return e.get("field_name")}).join()+'"');var c='service_topology_enabled="'+this.policyModel.get("service_topology_enabled")+'"';return i.push(e,t,n,a,c,r),i.join(" ")}return""},addListeners:function(){function t(t){return function(){e.debounce(this.update).call(this,t)}}this.listenTo(this.policyModel.get("ace_factor_fields"),"reset",t(!1)),this.listenTo(this.policyModel.get("ace_factor_weights"),"change",t(!1)),this.listenTo(this.policyModel,"change:service_topology_enabled",function(t,i){this._toggleServiceColumn(i),e.debounce(this.update).call(this,!0)})},refreshModel:function(){r.prototype.refreshModel.apply(this,arguments),this.addListeners()}});return h}.apply(t,a),!(void 0!==r&&(e.exports=r))},2854:function(e,t,i){var n,a;n=[i("require/underscore"),i("shim/jquery"),i("splunkjs/mvc/tableview")],a=function(e,t,i){var n=i.BaseCellRenderer.extend({initialize:function(t){this.attr="Similar Text Values",this.localizedAttr=e("Similar Text Values").t(),t&&t.attr&&(this.attr=t.attr)},canRender:function(e){return e.field===this.attr},render:function(t,i){var n=i.value;e.isArray(n)?(n=n.join("; "),t.text(n)):n?t.text(n):t.text(e("None").t())}});return n}.apply(t,n),!(void 0!==a&&(e.exports=a))},2855:function(e,t,i){var n,a;n=[i("require/underscore"),i("shim/jquery"),i("splunkjs/mvc/tableview")],a=function(e,t,i){var n=i.BaseCellRenderer.extend({initialize:function(t){this.attr="Similar Category Values",this.localizedAttr=e("Similar Category Values").t(),t&&t.attr&&(this.attr=t.attr)},canRender:function(e){return e.field===this.attr},render:function(t,i){var n=i.value;e.isArray(n)?(n=n.join("; "),t.text(n)):n?t.text(n):t.text(e("None").t())}});return n}.apply(t,n),!(void 0!==a&&(e.exports=a))},2856:function(e,t,i){var n,a;n=[i("require/underscore"),i("shim/jquery"),i("splunkjs/mvc/searchmanager"),i("splunkjs/mvc/tableview"),i(2828),i(2387)],a=function(e,t,i,n,a,r){var o=n.BaseRowExpansionRenderer.extend({canRender:function(){return!0},createContainer:function(o){var l=t('<td colspan="'+o.colspan+'"></td>'),s=o.table.rawFields||[],d=o.table.rawRows||[],c=d[o.rowIndex]||[],p=c[s.indexOf("_event_ids")]||[];if(e.isString(p)&&(p=[p]),p.length){var h=e.map(p,function(e){return'(event_id = "'+e+'")'}).join(" OR ");this._tableSearchManager=new i({id:"notable_event_management_aggregation_policy_ace_grouped_events_table_search_manager",search:'`itsi_event_management_index_with_state("'+h+'")` | table severity title _time event_id | rename title AS Title severity AS Severity event_id AS "Search"',cancelOnUnload:!0,earliest_time:"$earliest_time$",auto_cancel:90,preview:!0},{replace:!0,tokens:!0}),this._groupedEventsTable=new n({id:"notable-event-management-aggregation-policy-ace-grouped-events-table",count:10,dataOverlayMode:"none",drilldown:"none",rowNumbers:!1,wrap:!0,managerid:"notable_event_management_aggregation_policy_ace_grouped_events_table_search_manager",sortableFieldsExcluded:["Search"]},{replace:!0}),this._groupedEventsTable.addCellRenderer(new a),this._groupedEventsTable.addCellRenderer(new r),l.append(this._groupedEventsTable.render().$el)}return l.on("click",function(e){e.stopPropagation()}),l},_safeRemove:function(){this._tableSearchManager&&this._tableSearchManager.dispose(),this._groupedEventsTable&&this._groupedEventsTable.remove()},teardown:function(){this._safeRemove()}});return o}.apply(t,n),!(void 0!==a&&(e.exports=a))},2857:function(e,t,i){var n=i(2858);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2858:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".notable-event-aggregation-policy-view .collapsible-panel-heading a.section-warning-tooltip{float:right;margin-right:5px;font-size:75%;line-height:15px}.notable-event-aggregation-policy-view .collapsible-panel-heading .section-warning-tooltip .alert{margin-right:0;padding-right:0;padding-left:14px}",""])},2859:function(e,t,i){var n,a;n=[i("shim/jquery"),i(960)],a=function(e,t){var i=t.extend({initialize:function(e){t.prototype.initialize.apply(this,arguments),this.options=e,this._isReadOnly=this.options.isReadOnly,this.model.get("is_default")&&(this._isReadOnly=!0)}});return i}.apply(t,n),!(void 0!==a&&(e.exports=a))}});