webpackJsonp([20],{0:function(e,t,i){var n,a;i.p=function(){function e(){for(var e,i,n="",a=0,s=arguments.length;a<s;a++)e=arguments[a].toString(),i=e.length,i>1&&"/"==e.charAt(i-1)&&(e=e.substring(0,i-1)),n+="/"!=e.charAt(0)?"/"+e:e;if("/"!=n){var l=n.split("/"),o=l[1];if("static"==o||"modules"==o){var r=n.substring(o.length+2,n.length);n="/"+o,window.$C.BUILD_NUMBER&&(n+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(n+="."+window.$C.BUILD_PUSH_NUMBER),"app"==l[2]&&(n+=":"+t("APP_BUILD",0)),n+="/"+r}}var d=t("MRSPARKLE_ROOT_PATH","/"),c=t("DJANGO_ROOT_PATH",""),v=t("LOCALE","en-US"),h="";return h=c&&n.substring(0,c.length)===c?n.replace(c,c+"/"+v.toLowerCase()):"/"+v+n,""==d||"/"==d?h:d+h}function t(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return e("/static/app/itsi/build/pages")+"/"}(),n=[i("shim/jquery"),i("require/underscore"),i(4),i(129),i(2330),i(2254),i(1332),i(1334),i(2458),i(2440),i(2443),i(252),i(149),i("models/services/server/ServerInfo"),i(2455),i(2456)],a=function(e,t,i,n,a,s,l,o,r,d,c,v,h,p,u){var m=i(t("Notable Events Review").t()),g=t("You do not have permission to view all notable event groups, therefore the number of groups shown is less than the total count.").t(),f=e("#app-main-layout"),_=t.template(u,null,{variable:"vars"});f.html(_({_:t}));var w=function(){e(".notable-event-review-permissions-message-container",f).show(),e(".notable-event-review-permissions-message-container .alert-message",f).html(g)},b=function(){e(".notable-event-review-permissions-message-container",f).hide()},M=function(i,l){s.start(i),i=s.getStateModel(),s.setTimezoneId(l.get("id")),s.startAutoRefreshTimer();var v=e.Deferred(),h=new p;h.fetch({success:function(){n.getUserModel(h).then(function(e){v.resolve(e.entry[0].content.roles)})},error:function(e){console.error("Could not retrieve user roles. Response: "+e)}});var u=[],g=!1;v.done(function(e){u=e,g=t.some(u,function(e){return"itoa_admin"===e||"admin"===e||"sc_admin"===e}),i.set("isUserAdmin",g)}.bind(this)),i.on("change:canViewAll",function(e){e.attributes.canViewAll?b():w()});var f=new r({Collection:o,changeStateFunc:s.setStateModel,selectedId:i.id}),_=new d({stateModel:i,urlTokenModel:m.urlTokenModel}),M=new c({stateModel:i}),y=new a({eventManagementStateModel:i}),k=e(".itsi-event-management-container");k.append(f.render().$el),k.append(_.render().$el),k.append(M.render().$el),k.append(y.render().$el),k.on("click",'[data-dismiss="warning"]',function(){b()}),i.on("sync",function(e){f._selectedId=e.id,f.render(),s.pinStateModelKey(e.id)})},y=function(){var i,n,a,o,r,d,c=m.defaultTokenModel.get("emid")||s.getPinnedStateModelKey();try{n=m.defaultTokenModel.get("eventManagementSettings")||"null",n=JSON.parse(n)}catch(e){console.log("unrecognized uri parameter for eventManagementSettings, must be JSON parsable"),n={}}try{a=m.urlTokenModel.get("dedup")||"false",a=JSON.parse(a),o=m.urlTokenModel.get("filter")||"null",o=JSON.parse(o),r=m.urlTokenModel.get("earliest")||"-24h",d=m.urlTokenModel.get("latest")||"now"}catch(e){console.log("unrecognized uri parameter for filter, must be JSON parsable"),o={},a=!1,r="-24h",d="now"}var p=e.Deferred(),u=v.userTimezone.fetchUserAuthTimezone(),g=e.when(u,p);g.done(function(e){h.preventInvalidTimezones(e),M(i,e)}),n?(i=new l(n,{parse:!0}),p.resolve()):o?(i=new l,i.set({eventDeduplication:a,earliest:r,latest:d}),i.get("filterCollection").set(o),m.urlTokenModel.unset("filter"),m.urlTokenModel.unset("dedup"),m.urlTokenModel.save(),m.cleanUrl(),p.resolve()):c?(i=new l({_key:c}),i.fetch().done(function(){p.resolve()}).fail(function(){console.log("Failed to load the requested state model, reverting to default"),i=new l,m.defaultTokenModel.unset("emid"),m.urlTokenModel.unset("emid"),p.resolve()})):(i=new l({title:t("Notable Events Review").t(),eventDeduplication:!0}),p.resolve())};n.setupViewFromDefaultTokenModel(m,y,"emid")}.apply(t,n),!(void 0!==a&&(e.exports=a))},2330:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(1332),i(2254),i(2331),i(2431),i(2438)],a=function(e,t,i,n,a,s,l){var o=i.View.extend({className:"event-management-layout",tagName:"div",initialize:function(e){if(e=e||{},i.View.prototype.initialize.apply(this,arguments),this._firstRender=!0,this.eventData=[],this.selectedEvent=null,this.mainMode=!0,!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementView";this.eventManagementStateModel=e.eventManagementStateModel},render:function(){return this._firstRender&&(this.$el.html(""),e(window).on("resize",this._handleResize.bind(this)),this._handleResize(),setTimeout(this._handleResize.bind(this),2e3),this._firstRender=!1),this.mainMode?this.renderMainViews():this.renderDetailViews(),this},_handleResize:function(){var t=600,i=e(window).height(),n=e(".application-page-header").outerHeight(!0)+e(".event-management-timeline-header").outerHeight(!0),a=0,s=e("#header");"none"!==s.css("display")&&(n+=s.outerHeight(!0),a=15);var l=e("#footer");"none"!==l.css("display")&&(n+=l.outerHeight(!0),a=15);var o=i-n-a;o>t?this.$el.height(o):this.$el.height(t)},renderDetailViews:function(){this.removeMainViews(),this.eventManagementDetailView instanceof i.View||(this.eventManagementDetailView=new s({eventData:a.getNotableEvents(),selectedEvent:this.selectedEvent,eventManagementStateModel:this.eventManagementStateModel}),this.$el.html(""),this.$el.append(this.eventManagementDetailView.render().$el),this.listenTo(this.eventManagementDetailView,"detailclosed",function(){this.selectedEvent=this.eventManagementDetailView.selectedEvent,this.mainMode=!0,this.render()}))},removeDetailViews:function(){this._safeRemoveView(this.eventManagementDetailView),this.eventManagementDetailView=null},renderMainViews:function(){this.removeDetailViews(),this.eventManagementOverviewView instanceof i.View||(this.eventManagementOverviewView=new l({eventManagementStateModel:this.eventManagementStateModel,selectedEvent:this.selectedEvent}),this.$el.html(""),this.$el.append(this.eventManagementOverviewView.render().$el),this.listenTo(this.eventManagementOverviewView,"eventselected",function(e){e&&(this.selectedEvent=e,this.mainMode=!1,this.render(),this.eventManagementDetailView.eventManagementDetailListView.$(".event-management-detail-list-row.active").get(0).scrollIntoView(!0))})),this.selectedEvent&&this.eventManagementOverviewView.scrollSelectedEventPosition()},removeMainViews:function(){this._safeRemoveView(this.eventManagementOverviewView),this.eventManagementOverviewView=null},_safeRemoveView:function(e){e&&e instanceof i.View&&(this.stopListening(e),e.remove())},stopListening:function(t){return"undefined"!=typeof t&&null!==t||e(window).off("resize",this._handleResize),i.View.prototype.stopListening.apply(this,arguments)}});return o}.apply(t,n),!(void 0!==a&&(e.exports=a))},2331:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2332),i(2356),i(2429)],a=function(e,t,i,n,a){var s={panelclosed:"detailclosed"},l=i.View.extend({tagName:"div",className:"event-management-detail-container",initialize:function(e){if(i.View.prototype.initialize.apply(this,arguments),e=e||{},!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementDetailView";this.eventManagementStateModel=e.eventManagementStateModel,this.eventData=e.eventData||{},this.selectedEvent=e.selectedEvent||null,this._firstRender=!0},render:function(){return this._firstRender&&(this.$el.html(""),this._firstRender=!1),this._safeRemoveView(this.eventManagementDetailListView),this.eventManagementDetailListView=new n({eventData:this.eventData,selectedEvent:this.selectedEvent,eventManagementStateModel:this.eventManagementStateModel}),this._safeRemoveView(this.eventManagementDetailPanelView),this.eventManagementDetailPanelView=new a({eventManagementStateModel:this.eventManagementStateModel}),this.$el.append(this.eventManagementDetailListView.render().$el),this.$el.append(this.eventManagementDetailPanelView.render().$el),this.listenTo(this.eventManagementDetailListView,"eventselected",function(e){e&&(this.selectedEvent=e)}),this.listenTo(this.eventManagementDetailListView,"all",this._onEventUpdate),this.listenTo(this.eventManagementDetailPanelView,"all",this._onEventUpdate),this},_onEventUpdate:function(e){"eventupdated"===e&&this.eventManagementDetailListView.renderListBody(),s.hasOwnProperty(e)&&(e=s[e]),this.trigger.apply(this,arguments)},remove:function(){return this.eventManagementDetailListView.remove(),this.eventManagementDetailPanelView.remove(),i.View.prototype.remove.apply(this,arguments)},_safeRemoveView:function(e){e&&e instanceof i.View&&(e.remove(),this.stopListening(e))}});return l}.apply(t,n),!(void 0!==a&&(e.exports=a))},2332:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(156),i(129),i(1057),i("shim/splunk.util"),i(1332),i(2254),i(1333),i(2333),i(2349),i(291),i(2350),i(2351),i(2352),i(2354)],a=function(e,t,i,n,a,s,l,o,r,d,c,v,h,p,u){var m=t.template(u,null,{variable:"vars"}),g=function(e){var i,n={field:e.field?String(e.field).trim():"",value:e.value,title:e.value},a=50,s=n.field.length;t.isString(n.value)||(n.value=""),i=n.value.length;var l=s+i-a;return l>0&&(l<i?n.value=n.value.substr(0,i-l)+"...":(l-=i,n.value="",n.field=n.field.substr(0,s-l)+"...")),n},f=i.View.extend({tagName:"div",className:"event-management-detail-list",initialize:function(e){if(i.View.prototype.initialize.apply(this,arguments),e=e||{},!e.eventManagementStateModel)throw"Must pass eventManagementStateModel to EventManagementDetailListView";this.setStateModel(e.eventManagementStateModel),this.eventData=e.eventData||[],this.selectedEvent=e.selectedEvent||null,this.serviceXhr=r.getServiceKPITitleAndKeys(),this._firstRender=!0,this.MINIMUM_HEIGHT_TO_ENABLE_NEW_EVENTS_BUTTON=50,this.$lastSelectedEvent=null,this._paginationInFlight=!1,this._shouldNewEventsButtonBeVisible=!1,this.eventManagementNewEventsButtonView=new v({eventManagementDetailListView:this}),this.listenTo(this.eventManagementNewEventsButtonView,"fetcheventsclicked",function(){this._shouldNewEventsButtonBeVisible=!1}),this.listenTo(r,"search:start search:cancelled search:error search:fail",t.throttle(function(){this.$(".event-management-detail-list-infinite-scroll-message")&&this.$(".event-management-detail-list-infinite-scroll-message").text("")},1e3))},setStateModel:function(e){this.eventManagementStateModel instanceof i.Model&&this.stopListening(this.eventManagementStateModel),this.eventManagementStateModel=e,this.listenTo(this.eventManagementStateModel,"change:viewingOption change:columnsShown",this.renderListBody)},render:function(){return this._firstRender&&(this.listenTo(r,"data",function(e,t){t=t||{},t.reset?(this.eventData=r.getNotableEvents(),this.renderListBody(t)):this.eventManagementStateModel.get("autoRefresh")?t.pagination?(this.eventData=r.getNotableEvents(),this.renderListBody(t)):this.eventManagementNewEventsButtonView.isVisible()||this._shouldNewEventsButtonBeVisible||(this.eventData=r.getNotableEvents(),this.renderListBody(t)):(this.eventData=r.getNotableEvents(),this.renderListBody(t))}),this.$el.html(p),this._firstRender=!1,this.$(".event-management-detail-list-body-container").scroll(this._handleScroll.bind(this))),this.resultsHeaderView=new c({eventManagementStateModel:this.eventManagementStateModel}),this.listenTo(this.resultsHeaderView,"all",function(){this.trigger.apply(this,arguments)}),this.serviceXhr.done(function(e){if(this.serviceList=e,this.serviceDict=t.object(t.map(e,function(e){return[e._key,e]})),this.$(".event-management-detail-list-header").html(""),this.$(".event-management-detail-list-header").append(this.resultsHeaderView.render().$el),this.$(".event-management-detail-list-update-results").append(this.eventManagementNewEventsButtonView.render().$el),this.renderListBody(),this.selectedEvent){var i=this.eventManagementStateModel.getEventIDField(),n=this.$('.event-management-detail-list-row[data-eventid="'+this.selectedEvent[i]+'"]');n.addClass("active")}}.bind(this)),this},renderListBody:function(i){i=i||{};var s=!!t.isBoolean(i.reset)&&i.reset,o=!!t.isBoolean(i.pagination)&&i.pagination,c=r.getRBACFLag(),v=this.eventManagementStateModel.get("isUserAdmin"),p=r.returnServices(),u=function(i){var r=this.eventManagementStateModel.getEventIDField(),u=n.select(this.el).select(".event-management-detail-list-body");u.classed("prominent","prominent"===this.eventManagementStateModel.get("viewingOption")),this.eventData=this.eventData.filter(function(e){if(e._duplicate_count&&c&&!v)if("string"==typeof e._group_service_ids){if(e._group_service_ids.indexOf(",")!==-1){var i=e._group_service_ids.split(","),n=t.intersection(i,p);if(0===n.length)return this.eventManagementStateModel.set("canViewAll",!1),!1}else if(p.indexOf(e._group_service_ids)===-1)return this.eventManagementStateModel.set("canViewAll",!1),!1}else if("undefined"!=typeof e._group_service_ids){for(var a=!1,s=0;s<e._group_service_ids.length;s++){var l=e._group_service_ids[s];if(l.indexOf(",")!==-1){var o=l.split(","),r=t.intersection(o,p);if(r.length>0){a=!0;break}}else if(p.indexOf(l)!==-1){a=!0;break}}if(!a)return this.eventManagementStateModel.set("canViewAll",!1),!1}return!0}.bind(this)),this.d3listRows=u.selectAll("div.event-management-detail-list-row").data(this.eventData,function(e){return e[r]});var f=this,_=this.eventManagementStateModel.getColumnsToShow(!0);if(this.d3listRows.enter().append("div").attr("class",function(e){var t="event-management-detail-list-row";return f.selectedEvent&&e[r]===f.selectedEvent[r]&&(t+=" active"),t}).attr("data-eventid",function(e){return e[r]}).on("click",function(t){var i=e(this);if(f.$lastSelectedEvent||(f.$lastSelectedEvent=f.$(".event-management-detail-list-row.active").first()),n.event.metaKey||n.event.ctrlKey)i.toggleClass("active");else if(n.event.shiftKey){var a=f.$lastSelectedEvent.index(),s=i.index();s<a?i.nextUntil(f.$lastSelectedEvent).addClass("active"):i.prevUntil(f.$lastSelectedEvent).addClass("active"),i.addClass("active")}else f.d3listRows.classed("active",!1),i.addClass("active");f.$lastSelectedEvent=i,f.selectedEvent=t;var l=f.d3listRows.filter(".active").data();l.length||(f.selectedEvent=null),f._updateSelectedEvents(l)}),this.d3listRows.style("background-color",function(e){if("prominent"===f.eventManagementStateModel.get("viewingOption"))return e.severity_light_color}).style("color","#333333").html(function(e){for(var s=[],o=["title","_time"],r=0;r<_.length;r++){var c,v,p,u=_[r].value,w=_[r].label;if("status"===u&&(u="status_label"),e[u]&&!t.contains(o,u)){if(t.contains(d.SERVICE_ID_FIELDS,u)){if(w=l.sprintf(t("Services (%s)").t(),u),e[u]){var b=e[u].split(","),M="";for(p=0;p<b.length;++p)if(f.serviceDict.hasOwnProperty(b[p])){var y=f.serviceDict[b[p]].title;M.indexOf(y)===-1&&(M+=","+y)}","===M.charAt(0)&&(M=M.slice(1)),c=M,v=M}}else if(t.contains(d.KPI_ID_FIELDS,u)){if(w=l.sprintf(t("KPIs (%s)").t(),u),e[u]){var k=e[u].split(" "),S="";for(p=0;p<k.length;++p){var x=k[p].split(":")[0],T=k[p].split(":")[1];f.serviceList.forEach(function(e){if(e._key===x){var t=e.kpis;t.forEach(function(e){e._key===T&&S.indexOf(e.title)===-1&&(S+=","+e.title)})}})}","===S.charAt(0)&&(S=S.slice(1)),c=S,v=S}}else c=e[u],v=e[u];"owner"===u&&"unassigned"===c&&(c=t("Unassigned").t()),"description"===u&&"None"===c&&(c=t("None").t()),"severity_label"===u&&(c=h.getSeverityLabel(c)),"status_label"===u&&(c=h.getStatusLabel(c)),s.push({field:w,value:c,title:v})}}var V=a.convertEpochToTimezoneString(e._time,!0),E=null;e._duplicate_count&&(E=parseInt(e._duplicate_count,10)||0,E>100&&(E="100+"),V=a.convertEpochToTimezoneString(e._first_time,!0)+" - "+a.convertEpochToTimezoneString(e._last_time,!0));var D="#DDDDDD";"prominent"===f.eventManagementStateModel.get("viewingOption")&&(D=n.hsl(e.severity_color).darker(.2));var C=n.hsl(e.severity_color).darker(.2),A="",$="Unassigned";if(e.owner&&"unassigned"!==e.owner){$=e.owner,i&&i[$]&&($=i[$]);var R=$.split(" ");A=R[0].charAt(0).toUpperCase(),R.length>1&&(A+=R[R.length-1].charAt(0).toUpperCase())}return m({_:t,eventInfo:s,truncateString:g,eventSeverity:e.severity_color,eventTitle:e.title,eventTimestamp:V,dupeEventCount:E,infoBorderBottomColor:D,severityBorderBottomColor:C,assigneeAvatarText:A,ownerTitle:$},{variable:"vars"})}).order(),this.d3listRows.exit().remove(),s)this.eventManagementStateModel.get("selectedEvents").length>1&&(this.selectedEvent=null),this._updateSelectedEvents([]);else if(!t.isString(this.eventManagementStateModel.get("latest"))||this.eventManagementStateModel.get("latest").indexOf("rt")===-1){var w=this.d3listRows.data();if(w.length){var b=this.d3listRows.filter(".active").data();if(b.length)this._updateSelectedEvents(b);else{var M=w[0],y=this.d3listRows.filter('[data-eventid="'+M[r]+'"]');y&&(y.classed("active",!0),this.selectedEvent=M,this._updateSelectedEvents([M]))}}else this.selectedEvent=null,this._updateSelectedEvents([])}o||this.scrollSelectedEventPosition()}.bind(this);r.getOwners().done(function(e){var i=t.object(t.map(e,function(e){return[e.id,e.text]}));u(i)}.bind(this)).fail(function(){u()}.bind(this))},scrollSelectedEventPosition:function(){var e=this.eventManagementStateModel.getEventIDField();if(this.selectedEvent){var t=this.$('.event-management-detail-list-row[data-eventid="'+this.selectedEvent[e]+'"]'),i=this.$(".event-management-detail-list-body-container");if(t.length&&i){var n=t.offset().top;i.scrollTop(n-190)}}},_handleScroll:function(){var e,i,n=this.$(".event-management-detail-list-body-container"),a=n.scrollTop()+n.height(),s=a>this.$(".event-management-detail-list-body").height()-300;this.eventManagementStateModel.get("eventDeduplication")?(e=t("Loading more notable event groups...").t(),i=t("No more notable event groups.").t()):(e=t("Loading more notable events...").t(),i=t("No more notable events.").t()),n.scrollTop()>this.MINIMUM_HEIGHT_TO_ENABLE_NEW_EVENTS_BUTTON?this._shouldNewEventsButtonBeVisible=!0:this._shouldNewEventsButtonBeVisible=!1,s&&!this._paginationInFlight&&r.canPaginate()?(this.$(".event-management-detail-list-infinite-scroll-message").text(e),this._paginationInFlight=!0,this.listenToOnce(r,"data",function(){this._paginationInFlight=!1,this.$(".event-management-detail-list-infinite-scroll-message").text("")}),r.paginateNotableEvents()):r.canPaginate()||this.$(".event-management-detail-list-infinite-scroll-message").text(i)},_updateSelectedEvents:function(e){this.eventManagementStateModel.get("selectedEvents").reset(e),this.trigger("eventselected",this.selectedEvent)},remove:function(){return this._safeRemoveView(this.eventManagementNewEventsButtonView),i.View.prototype.remove.apply(this,arguments)},_safeRemoveView:function(e){e&&e instanceof i.View&&(this.stopListening(e),e.remove())}});return f}.apply(t,n),!(void 0!==a&&(e.exports=a))},2333:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(129),i("views/shared/controls/SyntheticSelectControl"),i(902),i(1332),i(2254),i(2334),i(2338),i(2346),i(2347),i("shim/bootstrap.tooltip")],a=function(e,t,i,n,a,s,l,o,r,d,c){var v=t.template(c,null,{variable:"vars"}),h=i.View.extend(t.extend({},r,{tagName:"div",className:"event-management-results-header",initialize:function(e){if(e=e||{},!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementResultsHeaderView";return this.setStateModel(e.eventManagementStateModel),this.eventData=e.eventData||[],this._firstRender=!0,this.children={},this.children.sortFieldControl=new a({model:this._stateModel,modelAttribute:"sortField",className:"event-management-sort-field-control",items:this._getSortByColumnList(),popdownOptions:{attachDialogTo:"body"}}),this.loadingMask=new s,this._phonyEventModel=new i.Model({severity:"",status:"",owner:""}),this.listenToSeachEvents(o),this.listenTo(this._stateModel.get("selectedEvents"),"reset",this._updateBulkEditOptions),this.listenTo(this._phonyEventModel,"change:severity",this._onSeverityChange),this.listenTo(this._phonyEventModel,"change:status",this._onStatusChange),this.listenTo(this._phonyEventModel,"change:owner",this._onOwnerChange),i.View.prototype.initialize.apply(this,arguments)},events:{"click .event-management-results-header-sort-events-direction":t.debounce(function(){"-"===this._stateModel.get("sortDirection")?(this.$(".event-management-results-header-sort-events-direction i").removeClass("icon-arrow-down"),this.$(".event-management-results-header-sort-events-direction i").addClass("icon-arrow-up"),this._stateModel.set("sortDirection","+")):(this.$(".event-management-results-header-sort-events-direction i").removeClass("icon-arrow-up"),this.$(".event-management-results-header-sort-events-direction i").addClass("icon-arrow-down"),this._stateModel.set("sortDirection","-"))},100),"click .event-management-results-header-reload-events-link":t.debounce(function(){o.restartSearch()},250),"click .event-management-results-header-viewing-options-link":function(){var t=new d({onHiddenRemove:!0,stateModel:this._stateModel});e("body").append(t.render().el),t.show()}},setStateModel:function(e){this._stateModel instanceof l&&this.stopListening(this._stateModel),this._stateModel=e,this.listenTo(this._stateModel,"change:columnsShown change:eventDeduplication",this.setSortFields)},setSortFields:function(){this.children.sortFieldControl.setItems(this._getSortByColumnList()),this.children.sortFieldControl.setValueFromModel()},_getSortByColumnList:function(){var e=["severity_label"],i=this._stateModel.getColumnsToShow();return i=t.filter(i,function(i){return!t.contains(e,i.value)})},_updateBulkEditOptions:function(){var e=this._stateModel.get("selectedEvents");e.length>1?(this._phonyEventModel.clear(),this.$el.addClass("bulk-options")):this.$el.removeClass("bulk-options");var i;i=this._stateModel.get("eventDeduplication")?'<div class="event-management-results-header-bulk-events-count"><span class="event-management-results-header-bulk-events-count-text"></span> '+t("Groups Selected").t()+"</div>":'<div class="event-management-results-header-bulk-events-count"><span class="event-management-results-header-bulk-events-count-text"></span> '+t("Events Selected").t()+"</div>",this.$(".event-management-results-header-bulk-options").html(i),this.$(".event-management-results-header-bulk-events-count-text").text(e.length)},displayRenderedMessage:function(e){this.$(".event-management-results-header-message-container").html(e)},render:function(){return this._firstRender&&(this.$el.html(v({_:t,sortDir:this._stateModel.get("sortDirection")},{variable:"vars"})),e("body").append(this.loadingMask.render().el),this._renderControls(),this.$(".event-management-results-header-sort-events-container").append(this.children.sortFieldControl.render().el),this.$(".sort-help-tooltip-link").tooltip({container:"body"}),this._firstRender=!1),this},_renderControls:function(){this.$(".event-management-results-header-sort-events-container").append(this.children.sortFieldControl.render().el)},remove:function(){return t.each(this.children,this._safeRemoveView,this),i.View.prototype.remove.apply(this,arguments)},_safeRemoveView:function(e){e instanceof i.View&&(e.options&&e.options.tooltip&&(e.options.tooltip=!1),this.stopListening(e),e.remove())}}));return h}.apply(t,n),!(void 0!==a&&(e.exports=a))},2334:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(129),i(2335),i(2336)],a=function(e,t,i,n,a){var s=t.template(a,null,{variable:"vars"}),l={FATAL:1,ERROR:2,WARN:3,INFO:4,DEBUG:5},o=function(e,i,n,a){if(e){var s=e[i||"content"];if(s&&s.isZombie)return t("The search job terminated unexpectedly.").t();if(s&&s.messages&&s.messages.length){var o=t(s.messages).filter(function(e){return("ERROR"===e.type||"FATAL"===e.type)&&!!e.text});if(o.length){var r=t.chain(o).sortBy(function(e){return l[e.type]||99}).pluck("text").unique().value();return n?r.join("; "):r[0]}}}return a},r=function(e){return o(e,"content",!1,t("The search failed").t())},d=function(e){return o(e,"data",!0)},c={listenToSeachEvents:function(e){this.stopListeningToSearchEvents(),e.on&&(this.listenTo(e,"search:progress",this._onSearchProgress),this.listenTo(e,"search:start",this._onSearchStart),this.listenTo(e,"search:cancelled",this._onSearchCancelled),this.listenTo(e,"search:error",this._onSearchError),this.listenTo(e,"search:fail",this._onSearchFailed),this.listenTo(e,"search:done",this._onSearchDone),this._listenedSearchManager=e)},stopListeningToSearchEvents:function(){this._listenedSearchManager&&this.stopListening(this._listenedSearchManager)},_onSearchProgress:function(e){e=e||{};var i,a="waiting";e.content&&(i=100*e.content.doneProgress,e.content.isRealTimeSearch&&i>99?a="waiting-real-time":i>0&&(i=" "+n.roundNumber(i,1).toString()+"% "+t("Complete").t(),a=t.clone(this._customMessages.waiting),a.message+=i)),this._renderSearchMessage(a)},_onSearchStart:function(){this._renderSearchMessage("waiting")},_onSearchCancelled:function(){this._renderSearchMessage("cancelled")},_onSearchError:function(e,t){var i=d(t)||e;this._renderSearchMessage({level:"error",icon:"warning-sign",message:i})},_onSearchFailed:function(e){var t=r(e);this._renderSearchMessage({level:"error",icon:"warning-sign",message:t})},_onSearchDone:function(e){e.content.isRealTimeSearch||0!==e.content.resultCount?this._renderSearchMessage("empty"):this._renderSearchMessage("no-results")},_renderSearchMessage:function(e){var t,i;t=e instanceof Object?e:this._customMessages[e]||this._customMessages.empty,t.customClass=this._searchMessageCustomClass,i="empty"===e?"":s(t),this.displayRenderedMessage(i)},_customMessages:{cancelled:{icon:"info-circle",level:"info",message:t("Search was cancelled.").t(),compact:!0},empty:{icon:"blank",level:"nothing",message:"",compact:!0},"unresolved-search":{icon:"warning-sign",level:"error",message:t("Search query is not fully resolved.").t(),compact:!0},"no-events":{icon:"info-circle",level:"info",message:t("Search did not return any events.").t(),compact:!0},"no-time":{icon:"warning-sign",level:"error",message:t("Search results missing time field").t(),compact:!0},"no-results":{icon:"blank",level:"error",message:t("No results found.").t(),compact:!0},"no-search":{icon:"info-circle",level:"info",message:t("No search set.").t(),compact:!0},"no-stats":{icon:"warning-sign",level:"error",message:t("Search isn't generating any statistical results.").t(),compact:!0},"not-started":{icon:"info-circle",level:"info",message:t("No search started.").t(),compact:!0},waiting:{icon:"blank",level:"info",message:t("Waiting for data...").t(),compact:!0},"waiting-real-time":{icon:"info-circle",level:"info",message:t("Updating in Real-time.").t(),compact:!0},"waiting-queued":{icon:"info-circle",level:"info",message:t("Waiting for search to start: job is queued.").t(),compact:!0},"waiting-preparing":{icon:"info-circle",level:"info",message:t("Waiting for search to start: job is preparing.").t(),compact:!0},"no-cheeseburger":{icon:"warning-sign",level:"error",message:"But... but... i wantz cheeseburger, sad face :(",compact:!0}}};return c}.apply(t,n),!(void 0!==a&&(e.exports=a))},2335:function(e,t){e.exports="<div class=\"handle-search-messaging-mixin-container <%- vars.compact ? 'compact' : '' %> <%- vars.customClass || '' %>\">\n    <div class=\"alert alert-<%- vars.level %>\">\n        <i class=\"icon-alert\"></i>\n        <%- vars.message %>\n    </div>\n</div>"},2336:function(e,t,i){var n=i(2337);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2337:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".handle-search-messaging-mixin-container .alert{margin-bottom:0}",""])},2338:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}var a,s,l=i(241),o=n(l);a=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("shim/splunk.util"),i("views/shared/Modal"),i("views/shared/controls/ControlGroup"),i(1333),i(2254),i(2339),i(2344)],s=function(e,t,i,n,a,s,l,r,d,c){return s.extend({moduleId:String(n.id),initialize:function(e){return s.prototype.initialize.apply(this,arguments),this._originalStateModel=e.stateModel,this._stateModel=e.stateModel.clone(),this.children={},this.children._viewingOptionControl=new l({controlType:"SyntheticSelect",controlOptions:{model:this._stateModel,modelAttribute:"viewingOption",className:"dropdown-toggle",toggleClassName:"btn",items:[{value:"standard",label:t("Standard").t()},{value:"prominent",label:t("Prominent").t()}]},label:t("Viewing Option").t()}),this.children._dedupControl=new l({controlType:"SyntheticSelect",controlOptions:{model:this._stateModel,modelAttribute:"eventDeduplication",className:"dropdown-toggle",toggleClassName:"btn",items:[{value:!0,label:t("On").t()},{value:!1,label:t("Off").t()}]},label:t("Event Grouping").t()}),this.children._autoRefreshControl=new l({controlType:"SyntheticSelect",controlOptions:{model:this._stateModel,modelAttribute:"autoRefresh",className:"dropdown-toggle",toggleClassName:"btn",items:r.EVENT_MANAGEMENT_CONSOLE_AUTO_REFRESH},label:t("Auto Refresh Period").t()}),this.children._columnsControl=new c({selectedTerms:this._stateModel.getColumnsToShow(!0),availableTerms:[]}),this._fieldsDfd=d.getSearchFields(),this._fieldsDfd.done(function(e){var i=t.pluck(this._stateModel.mandatoryColumnsShown,"value"),n=t.filter((0,o.default)(e),function(n){var a=e[n],s=a.distinct_count>1||a.modes[0].value;return s&&!t.contains(i,n)&&!t.contains(r.INTERNAL_FIELDS_TO_OMIT,n)});n=t.map(n,function(e){return{label:e,value:e}}),0!==n.length&&n.push({label:t("All Tickets").t(),value:"all_tickets"}),n.push({label:t("Duration").t(),value:"_itsi_group_duration"},{label:t("Active Group").t(),value:"itsi_is_group_broken"},{label:t("Policy").t(),value:"policy_id"}),n.sort(function(e,t){return e.label.toLocaleLowerCase()<t.label.toLocaleLowerCase()?-1:e.label.toLocaleLowerCase()>t.label.toLocaleLowerCase()?1:0}),n=[{label:t("Severity").t(),value:"severity_label"}].concat(n),this.children._columnsControl.setAvailableTerms(n)}.bind(this)),s.prototype.initialize.apply(this,arguments)},events:e.extend({},s.prototype.events,{"click a.modal-btn-primary":function(e){e.preventDefault();var i={};this._stateModel.get("autoRefresh")!==this._originalStateModel.get("autoRefresh")&&(i.autoRefresh=this._stateModel.get("autoRefresh")),this._stateModel.set("columnsShown",this.children._columnsControl.getSelectedTerms());var n=this._stateModel.get("sortField");t.contains(t.pluck(this._stateModel.getColumnsToShow(),"value"),n)||this._stateModel.set("sortField","_time"),i.viewingOption=this._stateModel.get("viewingOption"),i.eventDeduplication=this._stateModel.get("eventDeduplication"),i.sortField=this._stateModel.get("sortField"),i.columnsShown=this._stateModel.get("columnsShown"),this._originalStateModel.set(i),this.hide(),this.remove()},"click a.modal-btn-cancel":function(e){e.preventDefault(),this.hide(),this.remove()}}),render:function(){return this.$el.html(s.TEMPLATE),this.$(s.HEADER_TITLE_SELECTOR).text(t("View Settings").t()),this.$(s.BODY_SELECTOR).append(s.FORM_HORIZONTAL),this.$(s.BODY_FORM_SELECTOR).append(this.children._viewingOptionControl.render().el),this.$(s.BODY_FORM_SELECTOR).append(this.children._dedupControl.render().el),this.$(s.BODY_FORM_SELECTOR).append(this.children._autoRefreshControl.render().el),this.$(s.BODY_FORM_SELECTOR).append('<div class="control-group column-picker-pseudo-group"><label class="control-label">'+t("Columns Shown").t()+'</label><div class="column-picker-control-container"></div></div>'),this.$(".column-picker-control-container").append(this.children._columnsControl.render().el),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_CANCEL),this.$(s.FOOTER_SELECTOR).append(s.BUTTON_DONE),this}})}.apply(t,a),!(void 0!==s&&(e.exports=s))},2339:function(e,t,i){var n,a;
n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("shim/jquery.ui.sortable"),i(129),i("views/shared/PopTart"),i(2340),i(2341),i(2342)],a=function(e,t,i,n,a,s,l,o,r){var d=t.template(l,null,{variable:"vars"}),c=t.template(o,null,{variable:"vars"}),v=s.extend({initialize:function(e){if(e=e||{},!(e.availableTerms instanceof Array))throw"availableFields must be passed to AvailableTermChoicesPopTartView";return this._availableTerms=e.availableTerms,e.mode="menu",e.onHiddenRemove=!0,s.prototype.initialize.apply(this,arguments)},events:t.extend({},s.prototype.events,{"click a.term-list-selector-available-term-choice":function(t){var i=e(t.currentTarget),n=i.data("term-value"),a=i.text();this.trigger("termselected",{value:n,label:a})}}),render:function(){return this.$el.html(s.prototype.template),this.$(".popdown-dialog-body").addClass("term-selector-popdown"),this.$(".popdown-dialog-body").removeClass("popdown-dialog-padded"),this.$(".popdown-dialog-body").append(d({_:t,availableTerms:this._availableTerms},{variable:"vars"})),e(".modal").append(this.el),this}}),h=i.View.extend({className:"term-selector-view",tagName:"div",initialize:function(e){if(e=e||{},!(e.selectedTerms instanceof Array))throw"Selected terms must be provided to TermSelectorView, even if an empty []";if(this._selectedTerms=e.selectedTerms,!(e.availableTerms instanceof Array))throw"Available terms must be provided to TermSelectorView, even if an empty []";this._availableTerms=e.availableTerms,this._popTartView=null,i.View.prototype.initialize.apply(this,arguments)},events:{"click a.term-list-selector-add-term":function(i){var n=t.pluck(this._selectedTerms,"value"),a=t.filter(this._availableTerms,function(e){return!t.contains(n,e.value)});this._popTartView=new v({availableTerms:a}),this.listenToOnce(this._popTartView,"termselected",this._addTerm),this._popTartView.render().show(e(i.currentTarget))},"click a.term-list-selector-selected-term-remove":function(t){var i=e(t.currentTarget).data("term-value"),n=a.indexWhere(this._selectedTerms,function(e){return e.value===i});n>-1&&this._selectedTerms.splice(n,1),this.render()}},render:function(){return this.$el.html(c({_:t,selectedTerms:this._selectedTerms},{variable:"vars"})),e(".term-list-selector-selected-terms-container",this.$el).sortable({handle:".term-list-selector-selected-term-pill",cancel:".term-list-selector-selected-term-remove",helper:"clone",items:".term-list-selector-selected-term-wrapper",axis:"y",delay:150,stop:this._onTermSortStop.bind(this)}),this},setAvailableTerms:function(e){this._availableTerms=e},getAvailableTerms:function(){return this._availableTerms},getSelectedTerms:function(){return this._selectedTerms},_addTerm:function(e){this._selectedTerms.push(e),this.render()},_onTermSortStop:function(){var i,n=this.$(".term-list-selector-selected-term-pill"),a=[],s=this._selectedTerms;n.each(function(){var n=e(this);i=n.data("term-value"),a.push(t.findWhere(s,{value:i}))}),this._selectedTerms=a}});return h}.apply(t,n),!(void 0!==a&&(e.exports=a))},2340:function(e,t){e.exports='<% if (vars.availableTerms.length > 0) { %>\n    <ul class="term-list-selector-available-term-choices">\n        <% vars._.each(vars.availableTerms, function(term) { %>\n            <li>\n                <a class="term-list-selector-available-term-choice" data-term-value="<%- term.value %>">\n                    <%- term.label %>\n                </a>\n            </li>\n        <% }); %>\n    </ul>\n<% } else { %>\n    <div class="alert alert-warning">\n        <i class="icon-alert"></i>\n        <%- vars._(\'No fields Available\').t() %>\n    </div>\n<% } %>'},2341:function(e,t){e.exports='<div class="term-list-selector-selected-terms-container">\n    <% vars._.each(vars.selectedTerms, function(term) { %>\n        <div class="term-list-selector-selected-term-wrapper">\n            <a class="btn btn-draggable term-list-selector-selected-term-pill" data-term-value="<%- term.value %>">\n                <%- term.label %>\n            </a>\n            <a class="term-list-selector-selected-term-remove" data-term-value="<%- term.value %>" style="visibility: <%= term.mandatory ? "hidden;" : "visible;"%>">\n                <i class="icon-x icon-large"></i>\n            </a>\n        </div>\n    <% }); %>\n</div>\n<div>\n    <a class="btn term-list-selector-add-term">\n        <i class="icon-plus"></i>\n        <%- vars._(\'Add Column\').t() %>\n        <span class="caret"></span>\n    </a>\n</div>'},2342:function(e,t,i){var n=i(2343);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2343:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".term-list-selector-selected-term-wrapper{margin-bottom:10px}.term-list-selector-selected-term-remove{padding-left:10px}.term-list-selector-available-term-choices{list-style:none;margin:0;min-width:90px;height:120px;overflow-y:auto}.term-list-selector-available-term-choices li>a:hover{color:#3863a0;background:rgba(0,0,0,.05);background-color:rgba(0,0,0,.05);background-image:-webkit-gradient(linear,0 0,0 100%,from(rgba(0,0,0,.05)),to(rgba(0,0,0,.05)));background-image:-webkit-linear-gradient(top,rgba(0,0,0,.05),rgba(0,0,0,.05));background-image:linear-gradient(180deg,rgba(0,0,0,.05),rgba(0,0,0,.05));background-repeat:repeat-x}.term-list-selector-available-term-choices li>a{border-top:1px dotted rgba(0,0,0,.2);color:#1e93c6;padding:5px 10px;white-space:normal;display:block;text-decoration:none}.term-list-selector-available-term-choices li:first-child>a{border-top:none}.term-list-selector-add-term .icon-plus:before{padding-right:5px}.popdown-dialog-body.term-selector-popdown{max-height:350px;overflow-y:auto;width:300px}.popdown-dialog-body.term-selector-popdown .alert{margin:10px}",""])},2344:function(e,t,i){var n=i(2345);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2345:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".column-picker-control-container{margin-left:180px}",""])},2346:function(e,t){e.exports='<div class="event-management-results-header-options">\n    <div class="event-management-results-header-sort-events-link control-group">\n        <i class="icon-itsi-icon-sortby icon-large icon-no-underline"></i><span class="event-management-results-header-sort-events-prefix"><%- vars._(\'Sorted by\').t() %><a href="#" class="sort-help-tooltip-link tooltip-link" title="<%- vars._(\'If not sorted on time, events will be secondarily sorted by time\').t() %>">?</a></span>\n        <a class="event-management-results-header-sort-events-direction">\n            <% if (vars.sortDir === \'-\') { %>\n                <i class="icon-large icon-arrow-down icon-no-underline"></i>\n            <% } else { %>\n                <i class="icon-large icon-arrow-up icon-no-underline"></i>\n            <% } %>\n        </a>\n        <span class="event-management-results-header-sort-events-container"></span>\n    </div>\n    <div class="event-management-results-header-message-container"></div>\n    <div class="event-management-results-header-actions-container">\n        <div class="event-management-results-header-reload-events-link">\n            <a>\n                <i class="icon-rotate-counter icon-large"></i>\n            </a>\n        </div>\n        <div class="event-management-results-header-viewing-options-link">\n            <a>\n                <i class="icon-gear icon-large icon-no-underline"></i>\n            </a>\n        </div>\n    </div>\n</div>\n<div class="event-management-results-header-bulk-options"></div>'},2347:function(e,t,i){var n=i(2348);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2348:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-results-header-bulk-options,.event-management-results-header-options{min-height:38px;display:flex;justify-content:space-between;align-items:center;padding-left:25px;padding-right:20px}.event-management-results-header-bulk-options{justify-content:flex-start}.event-management-results-header .event-management-results-header-bulk-options{display:none}.event-management-results-header-bulk-add-comment,.event-management-results-header-bulk-assignee-link,.event-management-results-header-bulk-severity-link,.event-management-results-header-bulk-status-link{margin-left:20px}.event-management-results-header.bulk-options .event-management-results-header-options{display:none}.event-management-results-header.bulk-options .event-management-results-header-bulk-options{display:flex}.event-management-results-header-sort-events-link.control-group{margin-bottom:0}.event-management-results-header-sort-events-link a.event-management-results-header-sort-events-direction:hover{text-decoration:none}.event-management-sort-field-control{display:inline-block}.event-management-results-header-bulk-options .event-management-results-header-bulk-extensible-actions-link{margin-left:20px}.event-management-results-header-options .event-management-results-header-reload-events-link,.event-management-results-header-options .event-management-results-header-viewing-options-link{display:inline-block;margin:0 5px}",""])},2349:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("shim/splunk.util"),i(2254),i(1333)],a=function(e,t,i,n,a,s){var l=t.template('<%= vars.SplunkUtil.sprintf(vars._("See %s new %s(s)").t(), vars.numberOfEvents, vars.objectName) %>',null,{variable:"vars"}),o=i.View.extend({tagName:"div",className:"event-management-detail-update-events",initialize:function(e){if(e=e||{},this._isVisible=!1,!e.eventManagementDetailListView)throw"Must provide eventManagementDetailListView to EventManagementDetailUpdateEventsView";this.eventManagementDetailListView=e.eventManagementDetailListView,this.numSortInProgressDispatches=0,this.listenTo(this.eventManagementDetailListView.eventManagementStateModel,"change:sortDirection change:sortField",function(){this.numSortInProgressDispatches++,this.handleButtonClick()})},handleButtonClick:function(){this.eventManagementDetailListView.eventData=a.getNotableEvents(),this.eventManagementDetailListView.renderListBody(),this._hide()},events:{click:function(e){e.preventDefault(),this.handleButtonClick(),this.trigger("fetcheventsclicked")}},_show:function(){this._isVisible=!0,this.$el.show()},_hide:function(){this._isVisible=!1,this.$el.hide()},isVisible:function(){return this._isVisible},render:function(){return this.$el.text(""),this._hide(),this.listenTo(a,"data",function(e){if(this.numSortInProgressDispatches)this.numSortInProgressDispatches--,this.numSortInProgressDispatches||this.handleButtonClick();else{if(this.eventManagementDetailListView.paginationInFlight)return;if(this.eventManagementDetailListView.eventManagementStateModel.get("autoRefresh")!==s.EVENT_MANAGEMENT_CONSOLE_AUTO_REFRESH[0].value&&this.eventManagementDetailListView._shouldNewEventsButtonBeVisible){for(var i=this.eventManagementDetailListView.eventManagementStateModel.get("eventDeduplication")?"event_identifier_hash":"event_id",a={},o=0;o<this.eventManagementDetailListView.eventData.length;o++)a[this.eventManagementDetailListView.eventData[o][i]]=1;var r=t.filter(e,function(e){return!a.hasOwnProperty(e[i])}),d=r.length;if(d||e.length<this.eventManagementDetailListView.eventData.length&&(d=e.length),d){var c=this.eventManagementDetailListView.eventManagementStateModel.get("eventDeduplication")===!0?"group":"event";this.$el.text(l({_:t,numberOfEvents:d,SplunkUtil:n,objectName:c})),this.$el.data("event_count",d),this._show()}else this._hide()}}}.bind(this)),this},remove:function(){return this.stopListening(a),i.View.prototype.remove.apply(this,arguments)}});return o}.apply(t,n),!(void 0!==a&&(e.exports=a))},2350:function(e,t){e.exports='<div class="event-management-detail-list-header"></div>\n<div class="event-management-detail-list-update-results"></div>\n<div class="event-management-detail-list-body-container">\n\t<div class="event-management-detail-list-body"></div>\n\t<div class="event-management-detail-list-infinite-scroll-message"></div>\n</div>'},2351:function(e,t){e.exports='<div class="event-management-detail-list-row-severity event-management-detail-list-row-cell" style="background-color: <%- vars.eventSeverity %>; border-bottom: 1px solid <%- vars.severityBorderBottomColor %>;"></div>\n\n<% if (vars.dupeEventCount) { %>\n\t<div class="event-management-detail-list-row-dupe-count-container event-management-detail-list-row-cell" style="border-bottom: 1px solid <%- vars.infoBorderBottomColor %>;">\n\t\t<div class="event-management-detail-list-row-dupe-count">\n\t\t\t<%- vars.dupeEventCount %>\n\t\t</div>\n\t</div>\n<% } %>\n\n<div class="event-management-detail-list-row-info event-management-detail-list-row-cell" style="border-bottom: 1px solid <%- vars.infoBorderBottomColor %>;">\n\t<div class="event-management-detail-list-row-info-header">\n\t\t<div class="event-management-detail-list-row-event-title ellipsis-text" title="<%- vars.eventTitle %>"><%- vars.eventTitle %></div>\n\t\t<div class="event-management-detail-list-row-event-timestamp ellipsis-text" title="<%- vars.eventTimestamp %>"><%- vars.eventTimestamp %></div>\n\t</div>\n\t<div class="event-management-detail-list-row-info-body">\n\t\t<div class="event-management-detail-list-row-info-body-text ellipsis-text">\n\t\t\t<% vars._.each(vars.eventInfo, function(currEventInfo, currEventIndex, eventInfoList) { %>\n\t\t\t\t<%  var truncatedEventInfo = currEventIndex === eventInfoList.length - 1 ? currEventInfo : vars.truncateString(currEventInfo); %>\n\t\t\t\t<span class="event-management-detail-list-row-event-field" title="<%- truncatedEventInfo.title %>"><%- truncatedEventInfo.field %></span>\n\t\t\t\t<span class="event-management-detail-list-row-event-value" title="<%- truncatedEventInfo.title %>"><%- truncatedEventInfo.value %></span>\n\t\t\t<% }); %>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="event-management-detail-list-avatar-cell-container" style="border-bottom: 1px solid <%- vars.infoBorderBottomColor %>;">\n\t<% if (vars.assigneeAvatarText) { %>\n\t<div class="event-management-detail-list-avatar-cell" title="<%- vars.ownerTitle %>">\n\t<% } else { %>\n\t<div class="event-management-detail-list-avatar-cell unassigned-owner" title="<%- vars.ownerTitle %>">\n\t<% } %>\n\t\t<span class="username-cell"><%- vars.assigneeAvatarText %></span>\n\t</div>\n</div>'},2352:function(e,t,i){var n=i(2353);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2353:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".ellipsis-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.event-management-detail-list{flex:1;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;min-width:40%;position:relative;background-color:#fff;z-index:1;border-right:1px solid #ddd}.event-management-detail-list-body-container{flex:1;overflow-y:scroll}.event-management-detail-list-body{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.event-management-detail-list-body-message{color:#878790;text-align:center;margin-top:20px}.event-management-detail-update-events{cursor:pointer;width:160px;color:#fff;border-radius:3px;text-align:center;padding-top:2px;padding-bottom:2px;position:absolute;left:50%;margin-top:-14px;margin-left:-68px;box-shadow:0 3px 7px 0 rgba(0,0,0,.3);height:24px;font-size:12px;background-color:#1e93c6;line-height:24px}.event-management-detail-list-infinite-scroll-message{text-align:center;font-size:16px;padding:15px;color:#888}",""])},2354:function(e,t,i){var n=i(2355);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2355:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,'.event-management-detail-list-row{height:53px;display:flex;align-items:stretch;cursor:pointer;color:#333}.event-management-detail-list-row:hover{background-color:#e4e4e4!important}.event-management-detail-list-row.active{background-color:#e1edff!important}.event-management-detail-list-body.prominent .event-management-detail-list-row.active .event-management-detail-list-avatar-cell-container,.event-management-detail-list-body.prominent .event-management-detail-list-row.active .event-management-detail-list-row-dupe-count-container,.event-management-detail-list-body.prominent .event-management-detail-list-row.active .event-management-detail-list-row-info{border-bottom:1px solid #c0d9ff!important}.event-management-detail-list-row-severity{width:15px}.event-management-detail-list-row-dupe-count-container{width:50px}.event-management-detail-list-row-dupe-count{border:1px solid #97999b;text-align:center;margin-left:10px;margin-top:17px;border-radius:19px}.event-management-detail-list-row-info{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex;flex-direction:column;align-items:stretch;padding-left:10px}.event-management-detail-list-row-info-header{display:flex;align-items:center;flex:1}.event-management-detail-list-row-event-title{width:200px}.event-management-detail-list-row-event-timestamp{margin-left:20px}.event-management-detail-list-row-event-field{font-weight:700}.event-management-detail-list-row-event-field:after{content:": "}.event-management-detail-list-row-event-value:after{content:"\\A0\\A0\\A0\\A0\\A0\\A0\\A0\\A0\\A0\\A0"}.event-management-detail-list-row-event-value:last-child:after{content:""}.event-management-detail-list-row-info-body{flex:1}.event-management-detail-list-avatar-cell-container{width:60px;display:flex;justify-content:center;align-items:center}.event-management-detail-list-avatar-cell{background-color:#555;width:30px;height:30px;border-radius:50%;display:flex;justify-content:center;align-items:center}.event-management-detail-list-avatar-cell.unassigned-owner{background-color:#fff;border:1px dashed #555}.username-cell{font-size:12px;color:#fff}',""])},2356:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2357),i(2419),i(2423),i(2427)],a=function(e,t,i,n,a,s){var l=i.View.extend({tagName:"div",className:"event-management-detail-panel",initialize:function(e){if(i.View.prototype.initialize.apply(this,arguments),e=e||{},!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementDetailPanelView";this.eventManagementStateModel=e.eventManagementStateModel,this.childViews={},this.listenTo(this.eventManagementStateModel.get("selectedEvents"),"reset",this.render)},render:function(){return this.$el.html(""),this._renderContent(),this},_renderContent:function(){this._safeRemoveView(this.childViews.activeContentView),this.eventManagementStateModel.get("selectedEvents").length?1===this.eventManagementStateModel.get("selectedEvents").length?this.childViews.activeContentView=new n({eventManagementStateModel:this.eventManagementStateModel,eventModel:this.eventManagementStateModel.get("selectedEvents").at(0)}):this.childViews.activeContentView=new a({eventManagementStateModel:this.eventManagementStateModel}):this.childViews.activeContentView=new s,this.$el.append(this.childViews.activeContentView.render().$el),this.listenTo(this.childViews.activeContentView,"all",function(){this.trigger.apply(this,arguments)}.bind(this))},remove:function(){return t.each(this.childViews,function(e){e.remove()}),i.View.prototype.remove.apply(this,arguments)},_safeRemoveView:function(e){e instanceof i.View&&(e.options&&e.options.tooltip&&(e.options.tooltip=!1),e.remove())}});return l}.apply(t,n),!(void 0!==a&&(e.exports=a))},2357:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}var a,s,l=i(2149),o=n(l),r=i(130),d=n(r);a=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("shim/splunk.util"),i("splunkjs/mvc/utils"),i("uri/route"),i(2358),i("views/shared/controls/SyntheticSelectControl"),i(129),i(902),i(473),i(2254),i(291),i(2255),i(2364),i(2377),i(2395),i(2399),i(2401),i(2408),i(2414),i(2415),i(2416),i(2417)],s=function(e,t,i,n,a,s,l,r,c,v,h,p,u,m,g,f,_,w,b,M,y,k,S,x){var T=t.template(x,null,{variable:"vars"}),V=i.View.extend({tagName:"div",className:"event-management-detail-panel-content",initialize:function(e){if(i.View.prototype.initialize.apply(this,arguments),e=e||{},!e.eventModel)throw"Must provide eventModel to EventManagementDetailPanelContentView";if(this.eventModel=e.eventModel,!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementDetailPanelContentView";this.eventManagementStateModel=e.eventManagementStateModel,this.userRole=this.eventManagementStateModel.get("isUserAdmin"),this.childViews={},this._firstRender=!0,this.childViews.loadingMask=new h,this.visibleServices=[],this.isServiceLevelRBACEnabled=!0,this.eventActionDispatcher=t.extend({},i.Events),this.listenTo(this.eventActionDispatcher,"notableEventActions:actionTaken",this._updateHeaderActivity),this.listenTo(this.eventActionDispatcher,"notableEventActions:actionCompleted",this._handleActionCompleted),this.listenTo(this.eventActionDispatcher,"notableEventActions:viewInActivityLinkVisited",this._viewActivityTabView),this.listenTo(this.eventModel,"change:severity",this._onSeverityChange),this.listenTo(this.eventModel,"change:status",this._onStatusChange),this.listenTo(this.eventModel,"change:owner",this._onOwnerChange),this.listenTo(this.eventModel,"change:all_tickets",this._onTicketsChange)},_handleGroupActions:function(i,n,s){var l=this.eventModel.get(this.eventManagementStateModel.getEventIDField()),o=function(i){var n=a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event_group"].join("/"));"status"===s&&this.eventModel.get(s)===this.eventModel.get("endStatus")&&i.status===this.eventModel.get("endStatus")&&(n+="?break_group_policy_id="+this.eventModel.get("policy_id"));var l=e.ajax({url:n,headers:{"Content-Type":"application/json"},type:"POST",data:(0,d.default)(i)});l.done(function(){var e=this.eventModel.toJSON();e[s]=this.eventModel.get(s),u.cacheEventUpdate(e),this.trigger("eventupdated");var t={};t[s]=this.eventModel.get(s),this.eventModel.set(t,{doPost:!1})}.bind(this)).fail(function(e){console.log("Failed to update "+s);var i=[a.sprintf(t("Could not update %s").t(),s)];this._showErrorModal(i,e)}.bind(this))}.bind(this),r=function(e){var t={group_id:e,severity:this.eventModel.get("severity"),status:this.eventModel.get("status"),owner:this.eventModel.get("owner")};return t[s]=this.eventModel.get(s),t}.bind(this),c=e.ajax({url:a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event_group",l].join("/"))});c.done(function(e){var t={};e?(t={_key:l},t[s]=this.eventModel.get(s)):t=r(l),o(t)}.bind(this)).fail(function(){var e=r(l);o(e)}.bind(this))},_onSeverityChange:function(i,n,s){if(!s||s.doPost!==!1){if(this.childViews.loadingMask.show(t("Updating severity value...").t()),this.eventModel.get("_duplicate_count"))return void this._handleGroupActions(i,n,this.severitySelectControl.options.modelAttribute);var l={severity:this.eventModel.get("severity"),event_id:this.eventModel.get("event_id")},o=a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event",this.eventModel.get("event_id")].join("/")),r={data:l,earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")},c=e.ajax({url:o,headers:{"Content-Type":"application/json"},type:"POST",data:(0,d.default)(r)});c.done(function(){u.cacheEventUpdate(this.eventModel.toJSON(),"severity"),this.trigger("eventupdated")}.bind(this)).error(function(e){var i=new p({errorMessage:t("Could not update severity.").t(),htmlResponse:e});i.show()}.bind(this)).always(function(){this.childViews.loadingMask.hide()}.bind(this))}},_onStatusChange:function(i,n,s){if(!s||s.doPost!==!1){if(this.childViews.loadingMask.show(t("Updating status value...").t()),this.eventModel.get("_duplicate_count"))return void this._handleGroupActions(i,n,this.statusSelectControl.options.modelAttribute);var l={status:this.eventModel.get("status"),event_id:this.eventModel.get("event_id")},o=a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event",this.eventModel.get("event_id")].join("/")),r={data:l,earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")},c=e.ajax({url:o,headers:{"Content-Type":"application/json"},type:"POST",data:(0,d.default)(r),async:!0});c.done(function(){u.cacheEventUpdate(this.eventModel.toJSON(),"status"),this.trigger("eventupdated")}.bind(this)).error(function(e){var i=new p({errorMessage:t("Could not update status.").t(),htmlResponse:e});i.show()}.bind(this)).always(function(){this.childViews.loadingMask.hide()}.bind(this))}},_onOwnerChange:function(i,n,s){if(!s||s.doPost!==!1){if(this.childViews.loadingMask.show(t("Updating Owner value...").t()),this.eventModel.get("_duplicate_count"))return void this._handleGroupActions(i,n,this.assigneeSelectControl.options.modelAttribute);var l={owner:this.eventModel.get("owner"),event_id:this.eventModel.get("event_id")},o=a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event",this.eventModel.get("event_id")].join("/")),r={data:l,earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")},c=e.ajax({url:o,headers:{"Content-Type":"application/json"},type:"POST",data:(0,d.default)(r),async:!0});c.done(function(){u.cacheEventUpdate(this.eventModel.toJSON(),"owner"),this.trigger("eventupdated")}.bind(this)).error(function(e){var i=new p({errorMessage:t("Could not update owner.").t(),htmlResponse:e});i.show()}.bind(this)).always(function(){this.childViews.loadingMask.hide()}.bind(this))}},_onTicketsChange:function(){u.cacheEventUpdate(this.eventModel.toJSON()),this.overviewTabView.contentView.renderTickets(),this.trigger("eventupdated")},_onAcknowledge:function(){return this.eventModel.get("_duplicate_count")?this._onGroupEventAcknowledge():this._onRawEventAcknowledge()},_onRawEventAcknowledge:function(){var i={status:"2",owner:a.getConfigValue("USERNAME")};this.childViews.loadingMask.show(t("Acknowledging event...").t());var n=t.extend({},i,{event_id:this.eventModel.get("event_id")}),s=a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event",this.eventModel.get("event_id")].join("/")),l={data:n,action_type:"acknowledge",earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")},o=e.ajax({url:s,headers:{"Content-Type":"application/json"},type:"POST",data:(0,d.default)(l)});o.done(function(){this.eventModel.set(i,{doPost:!1});var e=this.eventModel.toJSON();u.cacheEventUpdate(e,"status"),u.cacheEventUpdate(e,"owner"),this.trigger("eventupdated")}.bind(this)).error(function(e){var i=new p({errorMessage:t("Could not acknowledge event.").t(),htmlResponse:e});i.show()}.bind(this)).always(function(){this.childViews.loadingMask.hide()}.bind(this))},_onGroupEventAcknowledge:function(){var i=this.eventModel.get(this.eventManagementStateModel.getEventIDField()),n={status:"2",owner:a.getConfigValue("USERNAME"),action_type:"acknowledge"},s=function(i){var s=e.ajax({url:a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event_group"].join("/")),headers:{"Content-Type":"application/json"},type:"POST",data:(0,d.default)(i)});s.done(function(){var e=this.eventModel.toJSON();t.extend(e,n),u.cacheEventUpdate(e),this.trigger("eventupdated"),this.eventModel.set(n,{doPost:!1})}.bind(this)).fail(function(e){console.log("Failed to acknowledge group event");var i=[t("Could not acknowledge group event.").t()];this._showErrorModal(i,e)}.bind(this)).always(function(){this.childViews.loadingMask.hide()}.bind(this))}.bind(this),l=function(e){var i=t.extend({},n,{group_id:e,severity:this.eventModel.get("severity")});return i}.bind(this);this.childViews.loadingMask.show(t("Acknowledging event...").t());var o=e.ajax({url:a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event_group",i].join("/"))});o.done(function(e){var a={};a=e?t.extend({},n,{_key:i}):l(i),s(a)}.bind(this)).fail(function(){var e=l(i);s(e)}.bind(this))},_updateHeaderActivity:function(e){var t=this.eventManagementDetailPanelHeaderActivityView.addAction(e);u.setEventActionStatus(this.eventModel.get("event_id"),{activities:t})},_viewActivityTabView:function(){this.eventManagementDetailPanelHeaderActivityView.isActionsInProgress()||(u.setEventActionStatus(this.eventModel.get("event_id"),{visited:!0}),this.eventManagementDetailPanelHeaderActivityView.clearActivityQueue()),this.activityTabView.tabId===this._getCurrentActiveTab().data("tab-id")?this.activityTabView.activate():this.childViews.tabView.showTab(this.activityTabView.tabId)},_handleActionCompleted:function(e){var i=t.find(e,function(e){return"snow_incident"===e.get("action_type")});i&&this.overviewTabView&&this.overviewTabView.contentView&&this.overviewTabView.$el.hasClass("active")&&this.overviewTabView.contentView.renderTickets()},_getCurrentActiveTab:function(){return this.childViews.tabView.$el.find("li.active")},events:{"click .event-management-detail-panel-header-close-panel-link":function(e){e.preventDefault(),this.$el.hide(),this.trigger("panelclosed")},"click .event-management-detail-panel-header-event-extensible-actions-link":function(t){var i=new y({eventModel:this.eventModel,eventActionDispatcher:this.eventActionDispatcher,eventManagementStateModel:this.eventManagementStateModel});i.render().show(e(t.currentTarget))},"click .event-management-detail-panel-header-expand-time-range":function(e){e.preventDefault();var t=m.getGroupTimeRange(this.eventModel);this.eventManagementStateModel.set({earliest:t.earliest_time,latest:t.latest_time+3600})}},render:function(){this._firstRender&&(this.$el.html(S),this._firstRender=!1),e("body").append(this.childViews.loadingMask.render().el);var i=u.confAccess.fetchStatusCollection(),n=u.confAccess.fetchSeverityCollection(),a=u.getOwners(),s=u.lookupAccess.getTeamsLookup(),l=u.lookupAccess.getSecurityGroupLookup();return e.when(i,n,a,s,l).done(function(e,i,n,a,s){if(this.currentUsersTeams=(0,o.default)(a),this.isServiceLevelRBACEnabled=s,this.eventModel.get("event_id")){var l=e.map(function(e){return"1"===e.entry.content.get("end")&&this.eventModel.set("endStatus",e.entry.get("name")),{label:t(e.entry.content.get("label")).t(),value:e.entry.get("name")}}.bind(this));this.eventModel.get("endStatus")||this.eventModel.set("endStatus","5");var r=i.map(function(e){return{label:t(e.entry.content.get("label")).t(),value:e.entry.get("name")}}),d=n.map(function(e){return{label:e.text,value:e.id}});if(this.$(".event-management-detail-panel-header").html(""),this.$(".event-management-detail-panel-header").append(T({_:t},{variable:"vars"})),this._safeRemoveView(this.severitySelectControl),this.severitySelectControl=new c({model:this.eventModel,modelAttribute:"severity",items:r,className:"event-management-detail-panel-header-event-severity-link",popdownOptions:{attachDialogTo:"body"}}),this._safeRemoveView(this.statusSelectControl),this.statusSelectControl=new c({model:this.eventModel,modelAttribute:"status",items:l,className:"event-management-detail-panel-header-event-status-link",popdownOptions:{attachDialogTo:"body"}}),this._safeRemoveView(this.assigneeSelectControl),this.assigneeSelectControl=new c({model:this.eventModel,items:d,modelAttribute:"owner",className:"event-management-detail-panel-header-event-assignee-link",popdownOptions:{attachDialogTo:"body"}}),this._safeRemoveView(this.acknowledgeButtonView),0!==Number(this.eventModel.get("status"))&&1!==Number(this.eventModel.get("status"))||(this.acknowledgeButtonView=new k({clickCallback:this._onAcknowledge.bind(this)}),this.$(".event-management-detail-panel-event-actions-left-container").append(this.acknowledgeButtonView.render().$el)),this.$(".event-management-detail-panel-event-actions-right-content").prepend(this.assigneeSelectControl.render().$el),
this.$(".event-management-detail-panel-event-actions-right-content").prepend(this.statusSelectControl.render().$el),this.$(".event-management-detail-panel-event-actions-right-content").prepend(this.severitySelectControl.render().$el),this.eventModel.get("event_id"))this.renderPanelBody();else{var v='<div class="event-management-detail-panel-body-message">'+t("No event selected").t()+"</div>";this.$(".event-management-detail-panel-body").append(v)}}}.bind(this)).fail(function(){console.log("failed to fetch severity or status collection")}),this},renderPanelBody:function(){this.$(".event-management-detail-panel-body").html("");var e,i,n="",a="";if(this.eventModel.get("_duplicate_count")){e=v.convertEpochToTimezoneString(this.eventModel.get("_first_time"),!0)+" - "+v.convertEpochToTimezoneString(this.eventModel.get("_last_time"),!0);var s=this.eventManagementStateModel.get("latest"),l=Number(this.eventModel.get("_group_front_closed")),o=Number(this.eventModel.get("_group_back_closed")),d=t("Some events in this group are outside the selected time range.").t(),c=t("You may not have permissions to view some events in this group.").t();(0===l||0===o&&v.isNum(s)&&Number(s)<Date.now()/1e3)&&(n='<div class="alert alert-warning"><i class="icon-alert"></i>'+d+' <a class="event-management-detail-panel-header-expand-time-range">'+t("Fit time range to group.").t()+"</a></div>"),this.isServiceLevelRBACEnabled&&!this.userRole&&(a='<div class="alert alert-warning"><i class="icon-alert"></i>'+c+"</div>")}else e=v.convertEpochToTimezoneString(this.eventModel.get("_time"),!0);var h='<div class="event-management-detail-panel-body-header"><div class="event-management-detail-panel-body-header-event-details"><span class="event-management-detail-panel-event-title">'+t.escape(this.eventModel.get("title"))+'</span><span class="event-management-detail-panel-event-timestamp">'+t.escape(e)+'</span></div><div class="event-management-detail-panel-body-header-event-activity-details"></div></div>';a&&(h+='<div class="event-management-detail-panel-body-header-warnings">'+a+"</div>"),n&&(h+='<div class="event-management-detail-panel-body-header-warnings">'+n+"</div>"),this.$(".event-management-detail-panel-body").append(h);var p=this.$(".event-management-detail-panel-body-header-event-details");p&&p.length&&p.tooltip("destroy").tooltip({container:"body",title:t.escape(this.eventModel.get("title")),template:'<div class="tooltip event-management-detail-panel-body-header-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'});var m="";if(this.isServiceLevelRBACEnabled)if(this.userRole)m=" | search itsi_service_ids=* OR NOT itsi_service_ids=*";else{var g=this.currentUsersTeams.map(function(e){return"(sec_grp=*"+e+"*)"});m=" | `itsi_groups_compare_teams("+g.join("OR")+")`"}this._safeRemoveView(this.eventManagementDetailPanelHeaderActivityView),this.eventManagementDetailPanelHeaderActivityView=new M({eventActionDispatcher:this.eventActionDispatcher,eventActionStatus:u.getEventActionStatus(this.eventModel.get("event_id"))}),this.$(".event-management-detail-panel-body-header-event-activity-details").append(this.eventManagementDetailPanelHeaderActivityView.render().$el),this._safeRemoveView(this.overviewTabView),this.overviewTabView=new f({eventModel:this.eventModel,eventManagementStateModel:this.eventManagementStateModel,visibleSearchIdString:m}),this._safeRemoveView(this.groupedEventsTabView),this._safeRemoveView(this.commentsTabView),this.commentsTabView=new w({eventModel:this.eventModel,eventManagementStateModel:this.eventManagementStateModel,visibleSearchIdString:m}),this._safeRemoveView(this.activityTabView),this.activityTabView=new b({eventModel:this.eventModel,visibleSearchIdString:m}),this.eventManagementStateModel.get("eventDeduplication")?(this.groupedEventsTabView=new _({visibleSearchIdString:m,eventModel:this.eventModel,eventManagementStateModel:this.eventManagementStateModel}),i=[this.overviewTabView,this.groupedEventsTabView,this.commentsTabView,this.activityTabView]):i=[this.overviewTabView,this.commentsTabView,this.activityTabView],this.childViews.tabView&&this.childViews.tabView.remove(),this.childViews.tabView=new r({className:r.prototype.className+" event-management-detail-panel-body-content",tabs:i,events:t.extend({},r.prototype.events,{'shown.bs.tab a[data-toggle="tab"]':this._onTabShown.bind(this)})}),this.$(".event-management-detail-panel-body").append(this.childViews.tabView.render().$el),setTimeout(function(){this.childViews.tabView.showTab(this.overviewTabView.tabId)}.bind(this),0),v.detectIE()&&this.$(".event-management-detail-panel-body .tab-layout-container").css("height","600px")},_onTabShown:function(e){r.prototype._onTabShown.call(this.childViews.tabView,e),"activity"!==this._getCurrentActiveTab().data("tab-id")||this.eventManagementDetailPanelHeaderActivityView.isActionsInProgress()||(u.setEventActionStatus(this.eventModel.get("event_id"),{visited:!0}),this.eventManagementDetailPanelHeaderActivityView.clearActivityQueue())},remove:function(){return t.each(this.childViews,function(e){e.remove()}),i.View.prototype.remove.apply(this,arguments)},_showErrorModal:function(e,t){this.childViews.loadingMask.hide();var i=new p({errorMessage:e.join(" "),htmlResponse:t});i.show()},_safeRemoveView:function(e){e instanceof i.View&&(e.options&&e.options.tooltip&&(e.options.tooltip=!1),this.stopListening(e),e.remove())}});return V}.apply(t,a),!(void 0!==s&&(e.exports=s))},2364:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2365),i(2367),i(2371)],a=function(e,t,i,n,a,s){var l=n.extend({initialize:function(e){if(e=e||{},!(e.eventModel instanceof i.Model))throw"Must provide eventModel to EventManagementDetailOverviewTabView";if(!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementDetailOverviewTabView";e.tabId="overview",e.tabLabel=t("Overview").t(),e.contentViewOptions={eventModel:e.eventModel,eventManagementStateModel:e.eventManagementStateModel,visibleSearchIdString:e.visibleSearchIdString},e.ContentView=e.eventManagementStateModel.get("eventDeduplication")?s:a,n.prototype.initialize.apply(this,arguments)},activate:function(){return n.prototype.activate.apply(this,arguments),this._visited&&this.getContentView().render(),this._visited=!0,this}});return l}.apply(t,n),!(void 0!==a&&(e.exports=a))},2367:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}var a,s,l=i(241),o=n(l),r=i(130),d=n(r);a=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("splunkjs/mvc/utils"),i("shim/splunk.util"),i("uri/route"),i(1333),i(148),i(2365),i(473),i(970),i(2254),i(324),i(2368),i(2369)],s=function(e,t,i,n,a,s,l,r,c,v,h,p,u,m){var g=["title","orig_raw","owner","description","all_service_kpi_ids","service_ids","service_kpi_ids","ad_at_kpi_ids","entity_lookup_field","is_service_aggregate","is_entity_defined","search_type","search_name","itsi_service_id","itsi_kpi_id","indexed_itsi_service_id","indexed_itsi_service_id","gs_service_id","kpiid","occurances","timeDiffInMin","serviceid","indexed_is_service_aggregate","indexed_is_service_max_severity_event","total_occurrences","timeDiff","gs_search_source","scoretype"],f=t.template(m,null,{variable:"vars"}),_=t.template('<li><a class="ticket" target="_blank" data-ticket_system="<%- vars.ticket_system %>" data-ticket_id="<%- vars.ticket_id %>" href="<%- vars.ticket_url %>"><%- vars.ticket_system %> - <%- vars.ticket_id %></a> <a href="#" class="icon-x-circle ticket-remover"></a></li>',null,{variable:"vars"}),w=t.template('<div class="overview-row"><span class="overview-field"><%- vars._(\'Link:\').t() %></span><a class="drilldown-ad" target="_blank" href="<%- vars.url %>"><span class="link-title"> Drilldown to <%- vars.title %></span> <i class="icon-external"></i></a></div>',null,{variable:"vars"}),b=t.template('<div class="overview-row"><span class="overview-field"><%- vars._(\'Link:\').t() %></span><span class="alert alert-error"><i class="icon-alert"></i><%- vars._(\'Error Generating Link\').t() %></span></div>',null,{variable:"vars"}),M=i.View.extend({events:{"click .open-services":"_openServices","click .open-kpis":"_openKPIs","click .service-list .drilldown":"_openSingleService","click .kpi-list .drilldown":"_openSingleKPI","click .drilldown-search":"_openDrilldownSearch","click .ticket-remover":"_deleteExternalTicket","click .open-search":"_openSearchEdit","click .drilldown-ad":"_openDeepdiveForEventFromAD"},initialize:function(e){if(e=e||{},!(e.eventModel instanceof i.Model))throw"Must provide eventModel to EventManagementDetailOverviewContentView";if(this._eventModel=e.eventModel,!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementDetailOverviewContentView";this.eventManagementStateModel=e.eventManagementStateModel,this.serviceXhr=p.getServiceKPITitleAndKeys(),i.View.prototype.initialize.apply(this,arguments)},render:function(){this.$el.text(t("Loading...").t());var i=n.getPageInfo(),a=this._eventModel.get("event_id");a=a instanceof Array?a[0]:a;var l=s.splunkdNS(i.root,i.locale,"-",i.app,"search/jobs/export"),o='search `itsi_event_management_index_with_state("'+a+'")`';return this.eventSearchXhr=e.ajax({url:l,dataType:"text",data:{output_mode:"json",exec_mode:"oneshot",search:o}}),this.eventSearchXhr.fail(function(){this._renderErrorState()}.bind(this)),e.when.apply(this,[this.serviceXhr,this.eventSearchXhr]).done(function(e,t){if(t&&t[0]){var i=JSON.parse(t[0].split(/\r?\n/)[0]);if(i&&i.result&&i.result._raw){var n=JSON.parse(i.result._raw);this._renderEvent(n,e[0])}else this._renderErrorState()}else this._renderErrorState()}.bind(this)),this},_deleteExternalTicket:function(i){i.preventDefault();var n=e(i.currentTarget),s=n.closest("li"),l=e(".ticket",s).data("ticket_system"),o=e(".ticket",s).data("ticket_id"),r=new h({title:t("Unlink Ticket").t(),message:t("Are you sure you want to unlink").t()+" '"+t.escape(l)+" - "+t.escape(o)+"' ?",disableCancelButton:!0}),c={},p={};p["action.itsi_event_action_link_ticket.param.ticket_system"]=l,p["action.itsi_event_action_link_ticket.param.ticket_id"]=o,p["action.itsi_event_action_link_ticket.param.operation"]="delete",c.name="itsi_event_action_link_ticket",c.ids=[this._eventModel.get("event_id")],c.params=p;var u={data:c,earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")};r.on("confirm",function(){var i=a.make_url(["custom","SA-ITOA","event_management_interface","notable_event_actions","itsi_event_action_link_ticket"].join("/"));e.ajax({url:i,context:this,method:"POST",data:(0,d.default)(u),contentType:"application/json",success:function(){var e=this._eventModel.get("all_tickets");e?(e=e.split(", "),e=t.filter(e,function(e){return e!==l+" - "+o})):e=[],this._eventModel.set({all_tickets:e.join(", ")})},error:function(e){console.log("failed to delete ticket");var i=new v({errorMessage:t("Could not unlink ticket.").t(),htmlResponse:e});i.show()}})},this),r.show()},_renderEvent:function(i,n){function s(t,i){var n=e('<div class="overview-row"><span class="overview-field"></span><span class="overview-value"></span></div>');return e(".overview-field",n).text(t+": "),e(".overview-value",n).text(i),n}this.$el.html(f({_:t,description:i.description||t("None").t()},{variable:"vars"}));var c={};this.renderTickets();var v=this.$(".drilldown-container");if(i.drilldown_search_search&&"null"!==i.drilldown_search_search&&i.drilldown_search_title&&"null"!==i.drilldown_search_title){var h=this._eventModel.get("_time")||this._eventModel.get("_first_time"),p=this._eventModel.get("_time")||this._eventModel.get("_last_time");h=Number(h)+Number(i.drilldown_search_earliest_offset||"-300"),p=Number(p)+Number(i.drilldown_search_latest_offset||"300"),this.drilldownSearchData={search:i.drilldown_search_search,title:i.drilldown_search_title,earliest:h,latest:p};var u=e('<div class="overview-row"><span class="overview-field">'+t("Search: ").t()+'</span><a class="drilldown-search"><span class="search-title"></span> <i class="icon-external"></i></a></div>');e(".search-title",u).text(i.drilldown_search_title),v.append(u)}if(i.drilldown_title&&"null"!==i.drilldown_title&&i.drilldown_uri&&"null"!==i.drilldown_uri){var m=t.template('<div class="overview-row"><span class="overview-field"><%- vars._(\'Link:\').t() %></span><a class="drilldown-link" target="_blank" href="<%- vars.eventData.drilldown_uri.indexOf(\'javascript:\') > -1 ? \'#\' :  vars.eventData.drilldown_uri %>"><span class="link-title"><%- vars.eventData.drilldown_title %></span> <i class="icon-external"></i></a></div>',{_:t,eventData:i},{variable:"vars"});v.append(m)}var _=this.$(".overview-contents"),M=l.INTERNAL_FIELDS_TO_OMIT.concat(g),y=t.omit(i,M),k={},S=(0,o.default)(y).length;0!==S&&((0,o.default)(y).sort().forEach(function(e){k[e]=y[e]}),t.each(k,function(e,t){e=String(e),e&&e.trim()&&_.append(s(t,e))},this));var x,T,V=i.search_type;if(i.search_name){switch(V){case"basic":x=this._getCorrelationSearchEditUrl(i.search_name),T=t("Edit in Correlation Search Editor").t();break;case"composite_kpi_score_type":case"composite_kpi_percentage_type":x=this._getMultiAlertEditUrl(i.search_name),T=t("Edit in Multi-KPI Alerts Editor").t();break;default:console.log("search type not recognized")}var E=s("search_name",i.search_name);if(x){var D=e('<a class="open-search">');D.append(T).append('<i class="icon-external"></i></a>').attr("href",x),e(".overview-value",E).append(D)}_.append(E)}this.serviceDeepDive=[],this.kpiDeepDive=[];var C,A=[],$="";if(i.all_service_kpi_ids&&($=i.all_service_kpi_ids),i.service_kpi_ids&&($+=" "+i.service_kpi_ids),i.ad_at_kpi_ids&&($+=" "+i.ad_at_kpi_ids),$){var R=$.split(" ");for(C=0;C<R.length;++C){var O=R[C].split(":"),I=O[0],N=O[1];I&&N&&(c[I]&&c[I].indexOf(N)<0?c[I].push(N):c[I]=[N])}}if(i.service_ids)for(A=i.service_ids.split(","),C=0;C<A.length;++C)c[A[C]]||(c[A[C]]=[]);if(i.serviceid)for(A=i.serviceid.split(/\r?\n/),C=0;C<A.length;++C)c[A[C]]||(c[A[C]]=[]);var L=t.keys(c),F=t.object(t.map(n,function(e){return[e._key,e]}));if(i.anomaly_detection_type){var B,P=300;if(t.isString(i.ad_at_kpi_ids)){B=i.ad_at_kpi_ids.split(":")[1];var z=[{kpiId:B,kpiServiceId:i.service_ids,kpiAddToSummary:"yes",laneType:"kpi",searchSource:"kpi",thresholdIndicationEnabled:"enabled",thresholdIndicationType:"levelIndication",laneOverlaySettingsModel:{isEnabled:"yes",overlayType:"anomaly",graphType:"alert"}}];"cohesive"===i.anomaly_detection_type&&(z[0].laneOverlaySettingsModel.selectedEntities=[i.entity_title]);var j=F[i.service_ids],q=j?j.title:"",U={laneSettingsCollection:(0,d.default)(z)};U.earliest=+i.mod_time-P,U.latest=+i.mod_time+P;var H=a.make_full_url("/app/itsi/deep_dive",U);v.append(w({_:t,eventData:i,url:H,title:q},{variable:"vars"}))}else console.log("unexpected ad_at_kpi_ids format"),v.append(b({_:t},{variable:"vars"}))}if(0===v.text().length&&v.text(t("None").t()),L.length>0){for(C=0;C<L.length;++C){var G=F[L[C]];if(G){var K=t.findWhere(G.kpis,{type:r.ITSI_KPI_TYPE_SERVICE_HEALTH}),W=G.title;this.serviceDeepDive.push({serviceId:L[C],serviceName:W,kpiId:K._key,kpiName:K.title});var X=e('<li><a class="drilldown" data-id="'+(this.serviceDeepDive.length-1)+'"></li>');e(".drilldown",X).text(G.title),this.$(".service-list").append(X);for(var J=c[L[C]],Y=0;Y<J.length;++Y){var Q=t.findWhere(G.kpis,{_key:J[Y]});if(Q){this.kpiDeepDive.push({serviceId:L[C],serviceName:W,kpiId:J[Y],kpiName:Q.title});var Z=e('<li><a class="drilldown" data-id="'+(this.kpiDeepDive.length-1)+'"></a></li>');e(".drilldown",Z).text(Q.title),this.$(".kpi-list").append(Z)}else console.log("Could not find KPI.")}}else console.log("Could not find service.")}this.$(".list-container").show(),this.$(".deepdive-drilldown").show(),this.$(".no-affected-items").hide()}else this.$(".list-container").hide(),this.$(".deepdive-drilldown").hide(),this.$(".no-affected-items").show();i.orig_raw&&this.$(".raw-data-container").text(i.orig_raw)},_openSearchEdit:function(t){t.preventDefault();var i=e(t.currentTarget).attr("href");n.redirect(i,!0)},renderTickets:function(){var i=this.$(".ticket-info"),n=a.make_url(["custom","SA-ITOA","event_management_interface","ticketing",this._eventModel.get("event_id")].join("/")),s=e.ajax({url:n});e.when(s).done(function(n){if(n.length){i.show();var a=[];this.$(".tickets-list",i).empty(),t.each(n,function(n){t.each(n.tickets,function(t){var n=_(t,{variable:"vars"});e("ul",i).append(n),a.push(t.ticket_system+" - "+t.ticket_id)})}),this._eventModel.set("all_tickets",a.join(", "),{silent:!0})}else i.hide()}.bind(this)).fail(function(e){var i=new v({errorMessage:t("Could not load/save the ticket.").t(),htmlResponse:e});i.show()}.bind(this))},_renderErrorState:function(){this.$el.text(t("Could not fetch event. It may still be indexing. Try selecting again.").t())},_openServices:function(e){e.preventDefault(),u.openInDeepDive(!0,this.serviceDeepDive,this.eventManagementStateModel.get("earliest"),this.eventManagementStateModel.get("latest"))},_openKPIs:function(e){e.preventDefault(),u.openInDeepDive(!0,this.kpiDeepDive,this.eventManagementStateModel.get("earliest"),this.eventManagementStateModel.get("latest"))},_openDeepdiveForEventFromAD:function(t){t.preventDefault();var i=e(t.currentTarget).attr("href");n.redirect(i,!0)},_openSingleService:function(t){t.preventDefault();var i=e(t.target),n=i.data("id"),a=this.serviceDeepDive[n];u.openInDeepDive(!0,[a],this.eventManagementStateModel.get("earliest"),this.eventManagementStateModel.get("latest"))},_openDrilldownSearch:function(e){e.preventDefault();var t={q:this.drilldownSearchData.search,earliest:this.drilldownSearchData.earliest,latest:this.drilldownSearchData.latest},i=n.getPageInfo(),a=s.search(i.root,i.locale,i.app,{data:t});n.redirect(a,!0)},_openSingleKPI:function(t){t.preventDefault();var i=e(t.target),n=i.data("id"),a=this.kpiDeepDive[n];u.openInDeepDive(!0,[a],this.eventManagementStateModel.get("earliest"),this.eventManagementStateModel.get("latest"))},_getCorrelationSearchEditUrl:function(e){return a.make_full_url(["app","itsi","correlation_search_edit"].join("/"),{name:e})},_getMultiAlertEditUrl:function(e){return a.make_full_url(["app","itsi","alarm_console"].join("/"),{name:e})}});return M}.apply(t,a),!(void 0!==s&&(e.exports=s))},2368:function(e,t){e.exports='<div class="overview-container">\n\t<div class="description-container">\n\t\t<h5 class="description-header"><%- vars._("Description").t() %></h5>\n\t\t<div class="description-contents"><%- vars.description %></div>\n\t</div>\n\t<h5 class="ticket-info tickets-header"><%- vars._("All Tickets").t() %></h5>\n\t<div class="ticket-info tickets-contents">\n\t\t<ul class="tickets-list"></ul>\n\t</div>\n\t<div class="contributing-kpi-container">\n\t\t<h5 class="kpi-title"><%- vars._("Contributing KPIs").t() %></h5>\n\t\t<a class="open-kpis deepdive-drilldown"><%- vars._("Open all in Deep Dive").t() %> <i class="icon-external"></i></a>\n\t\t<div class="list-container" style="display: none;">\n\t\t\t<ul class="kpi-list"></ul>\n\t\t</div>\n\t\t<div class="no-affected-items"><%- vars._("None").t() %></div>\n\t</div>\n\t<div class="affected-service-container">\n\t\t<h5 class="service-title"><%- vars._("Possible Affected Services").t() %></h5>\n\t\t<a class="open-services deepdive-drilldown"><%- vars._("Open all in Deep Dive").t() %> <i class="icon-external"></i></a>\n\t\t<div class="list-container" style="display: none;">\n\t\t\t<ul class="service-list"></ul>\n\t\t</div>\n\t\t<div class="no-affected-items"><%- vars._("None").t() %></div>\n\t</div>\n\t<h5 class="drilldown-title"><%- vars._("Drilldowns").t() %></h5>\n\t<div class="drilldown-container"></div>\n\t<h5 class="all-details"><%- vars._("Details").t() %></h5>\n\t<div class="overview-contents"></div>\n\t<h5><%- vars._("Raw Event").t() %></h5>\n\t<div class="raw-data-container"></div>\n</div>\n'},2369:function(e,t,i){var n=i(2370);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2370:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".overview-container .kpi-title,.overview-container .service-title{display:inline-block}.overview-container .deepdive-drilldown{display:inline-block;padding-left:5px}.overview-container h5{margin-bottom:5px}.description-contents,.overview-container .overview-row,.raw-data-container{margin-left:25px}.overview-container .list-container ul{margin-bottom:0}.overview-container .overview-field{font-weight:600}.overview-container .affected-service-container,.overview-container .contributing-kpi-container,.overview-container .description-container,.overview-container .drilldown-container,.overview-container .overview-contents,.overview-container .tickets-contents{margin-bottom:15px}.overview-container .drilldown-container .overview-row .alert{padding-left:15px}.overview-container .drilldown-container .overview-row .icon-alert{font-size:15px}.overview-container .raw-data-container{padding:5px;margin-top:5px;margin-bottom:20px;border:1px solid #ddd;font-family:Droid Sans Mono,Consolas,Monaco,Courier New,Courier,monospace;overflow-y:auto}.ticket-info{display:none}.ticket-remover{margin-left:10px}.ticket-remover:hover{text-decoration:none}",""])},2371:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}var a,s,l=i(130),o=n(l);a=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("splunkjs/mvc/utils"),i("splunkjs/mvc/searchmanager"),i("splunkjs/mvc/simplesplunkview"),i("shim/splunk.util"),i("uri/route"),i("views/shared/waitspinner/Master"),i(148),i(1333),i(291),i(2372),i(2365),i(473),i(970),i(2254),i(324),i(2260),i(2373),i(2374),i(2375)],s=function(e,t,i,n,a,s,l,r,d,c,v,h,p,u,m,g,f,_,w,b,M){var y=t.template(b,null,{variable:"vars"}),k=t.template('<li><a class="ticket" target="_blank" data-ticket_system="<%- vars.ticket_system %>" data-ticket_id="<%- vars.ticket_id %>" href="<%- vars.ticket_url %>"><%- vars.ticket_system %> - <%- vars.ticket_id %></a> <a href="#" class="icon-x-circle ticket-remover"></a></li>',null,{variable:"vars"}),S=t.template('<a class="edit-policy-link"><%- vars.policyTitle %><i class="icon-external"></i></a>',null,{variable:"vars"}),x=t.template('<div class="event-severity-container"><div class="event-severity-circle" style="background-color: <%- vars.severityColor %>"></div><div class="event-severity-text"><%- vars.eventCount %></div></div>',null,{variable:"vars"}),T=t.template(M,null,{variable:"vars"}),V=p.extend({initialize:function(e){if(s.prototype.initialize.apply(this,arguments),e=e||{},!e.eventModel)throw"Must provide eventModel to SeverityBreakdownView";this._eventModel=e.eventModel},events:{"click .edit-policy-link":"handlePolicyDrilldown"},updateView:function(e,i){var n=0;if(i&&i.fields.length&&i.rows.length){var a=i.fields.indexOf("total");a>-1&&(n=i.rows[0][a])}this.$el.html(l.sprintf(t("%s Notable Events are grouped based on the aggregation policy: ").t(),n)+'<div class="edit-policy-link-container">'+t("Loading policy...").t()+'</div><div class="group-event-severity-breakdown-container"></div>');var s=new w({_key:this._eventModel.get("policy_id")});s.fetch().done(function(e){this.$(".edit-policy-link-container").html(S({policyTitle:e.title},{variable:"vars"}))}.bind(this)).fail(function(){this.$(".edit-policy-link-container").html(t("Unknown policy").t())}.bind(this)),f.confAccess.fetchSeverityCollection().done(function(e){for(var t={},n=0;n<e.length;n++){var a=e.at(n);t[a.entry.get("name")]=a.entry.content.toJSON()}for(var s=this.$(".group-event-severity-breakdown-container"),l=i.fields.indexOf("severity"),o=i.fields.indexOf("count"),r=0;r<i.rows.length;r++){var d=i.rows[r],c=x({severityColor:t[d[l]].color,eventCount:d[o]},{variable:"vars"});s.append(c)}}.bind(this))},handlePolicyDrilldown:function(e){e.preventDefault();var t=l.make_full_url(["app","itsi","notable_event_aggregation_policy_detail_view"].join("/"),{savedAggregationPolicyId:this._eventModel.get("policy_id")});n.redirect(t,!0)}}),E=p.extend({tagName:"div",initialize:function(e){s.prototype.initialize.apply(this,arguments),e=e||{},this._eventModel=e.eventModel},displayMessage:function(e){return"no-results"===e?(this.clearView(),this.$el.text(t("None").t()),this.$el.addClass("empty-list-message")):s.prototype.displayMessage.apply(this,arguments),this},updateView:function(e,t){if(t&&t.fields&&t.fields.length&&t.rows&&t.rows.length){var i=t.fields.indexOf("tickets.ticket_id"),n=t.fields.indexOf("tickets.ticket_system"),a=t.fields.indexOf("tickets.ticket_url");if(i>-1&&n>-1&&a>-1){this.clearView(),this.$el.append('<ul class="ticket-list"></ul>');for(var s=this.$(".ticket-list"),l=[],o=0;o<t.rows.length;o++){var r=t.rows[o],d={ticket_id:r[i],ticket_system:r[n],ticket_url:r[a]},c=k(d,{variable:"vars"});s.append(c),l.push(d.ticket_system+" - "+d.ticket_id)}this._eventModel&&this._eventModel.set("all_tickets",l.join(", "),{silent:!0})}else this.displayMessage("no-results")}else this.displayMessage("no-results")}}),D=p.extend({initialize:function(e){if(s.prototype.initialize.apply(this,arguments),e=e||{},!e.serviceXhr)throw"Must provide serviceXhr to ServicesListView";if(this.serviceXhr=e.serviceXhr,!e.serviceDeepDive)throw"Must provide serviceDeepDive to ServicesListView";this.serviceDeepDive=e.serviceDeepDive},displayMessage:function(e){return"no-results"===e?(this.clearView(),this.$el.text(t("None").t()),this.$el.addClass("empty-list-message")):s.prototype.displayMessage.apply(this,arguments),this},updateView:function(i,n){var a=h.getServiceKPIDict(n);this.serviceXhr.done(function(i){this.clearView(),this.$el.append('<ul class="service-list"></ul>');var n=t.object(t.map(i,function(e){return[e._key,e]}));for(var s in a)if(a.hasOwnProperty(s)){var l=n[s];if(!l)continue;var o=t.findWhere(l.kpis,{type:c.ITSI_KPI_TYPE_SERVICE_HEALTH});this.serviceDeepDive.push({serviceId:s,serviceName:l.title,kpiId:o._key,kpiName:o.title});var r=e('<li><a class="drilldown" data-id="'+(this.serviceDeepDive.length-1)+'">'+t.escape(l.title)+"</li>");this.$(".service-list").append(r)}}.bind(this))}}),C=p.extend({initialize:function(e){if(s.prototype.initialize.apply(this,arguments),e=e||{},!e.serviceXhr)throw"Must provide serviceXhr to ServicesListView";if(this.serviceXhr=e.serviceXhr,!e.kpiDeepDive)throw"Must provide kpiDeepDive to ServicesListView";this.kpiDeepDive=e.kpiDeepDive},displayMessage:function(e){return"no-results"===e?(this.clearView(),this.$el.text(t("None").t()),this.$el.addClass("empty-list-message")):s.prototype.displayMessage.apply(this,arguments),this},updateView:function(i,n){var a=h.getServiceKPIDict(n);this.serviceXhr.done(function(i){this.clearView(),this.$el.append('<ul class="kpi-list"></ul>');var n=t.object(t.map(i,function(e){return[e._key,e]}));for(var s in a)if(a.hasOwnProperty(s)){var l=n[s];if(!l)continue;for(var o=a[s],r=n[s].kpis,d=0;d<o.length;d++){var c=t.findWhere(r,{_key:o[d]});if(c){this.kpiDeepDive.push({serviceId:s,serviceName:l.title,kpiId:o[d],kpiName:c.title});var v=e('<li><a class="drilldown" data-id="'+(this.kpiDeepDive.length-1)+'">'+t.escape(c.title)+"</a></li>");this.$(".kpi-list").append(v)}else console.log("Could not find KPI with id: "+o[d])}}}.bind(this))}}),A=p.extend({initialize:function(e){if(s.prototype.initialize.apply(this,arguments),e=e||{},!e.eventModel)throw"Must provide eventModel to CommonFieldsView";this._eventModel=e.eventModel},displayMessage:function(e){return"no-results"===e?(this.clearView(),this.$el.text(t("No common fields").t())):s.prototype.displayMessage.apply(this,arguments),this},updateView:function(e,i){if(i&&i.fields&&i.fields.length&&i.rows&&i.rows.length){var n=i.fields.indexOf("field"),a=i.fields.indexOf("values"),s=i.fields.indexOf("total");if(n>-1&&a>-1&&s>-1){this.clearView(),this.$el.append('<ul class="common-fields-list"></ul>');for(var o=0;o<i.rows.length;o++){var r=i.rows[o],d=JSON.parse(r[a]),c={_:t,splunkUtil:l,fieldValues:d.slice(0,15),fieldValuesStr:l.sprintf(t("%s values (expand for details)").t(),d.slice(0,15).length),fieldName:r[n],fieldNameStr:l.sprintf(t("%s:").t(),r[n]),eventTotal:r[s]},v=T(c,{variable:"vars"});this.$(".common-fields-list").append(v)}}else this.displayMessage("no-results")}else this.displayMessage("no-results")}}),$=i.View.extend({initialize:function(e){if(e=e||{},!(e.eventModel instanceof i.Model))throw"Must provide eventModel to EventManagementDetailGroupOverviewContentView";if(this._eventModel=e.eventModel,!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementDetailGroupOverviewContentView";this.eventManagementStateModel=e.eventManagementStateModel,this.visibleSearchIdString=e.visibleSearchIdString||"",this.serviceXhr=f.getServiceKPITitleAndKeys(),this.childViews={},this.searchManagers={},i.View.prototype.initialize.apply(this,arguments)},events:{"click .open-services":"_openServices","click .open-kpis":"_openKPIs","click .service-list .drilldown":"_openSingleService","click .kpi-list .drilldown":"_openSingleKPI","click .drilldown-search":"_openDrilldownSearch","click .smart-mode-groups-show-all":"_showAll","click .common-fields-expandable":"_toggleFields","click .group-detail-commonality-fields-show-all":"_showAllValues","click .ticket-remover":"_deleteGroupTicket"},_parseACEvalues:function(e){return e?(e=(e||"").split(";;"),e.map(function(e){return e=(""+e).split("="),{field:e[0]?e[0]:"",value:e[1]?e[1]:""}})):[]},_showAll:function(t){t.preventDefault();var i=e(t.currentTarget);i.siblings(".smart-mode-group-values").find("li").removeClass("smart-mode-groups-item"),i.hide()},_toggleFields:function(t){t.preventDefault();var i=e(t.currentTarget);i.is("#fieldIcon")?i.toggleClass("icon-chevron-right icon-chevron-down"):i.siblings("#fieldIcon").toggleClass("icon-chevron-right icon-chevron-down"),"none"===i.siblings(".common-field-values-list").css("display")?i.siblings(".common-field-values-list").css("display","table"):i.siblings(".common-field-values-list").css("display","none"),"none"===i.siblings(".common-field-values-list").children(".group-detail-commonality-fields-show-all").css("display")&&(i.siblings(".common-field-values-list").children(".group-detail-commonality-fields-show-all").show(),i.siblings(".common-field-values-list").children(".extra-common-field-value-item").css("display","none"))},_showAllValues:function(t){t.preventDefault();var i=e(t.currentTarget);i.siblings(".extra-common-field-value-item").css("display","table-row"),i.hide()},_deleteGroupTicket:function(i){i.preventDefault();var n=e(i.currentTarget),a=n.closest("li"),s=e(".ticket",a).data("ticket_system"),r=e(".ticket",a).data("ticket_id"),c=new g({title:t("Unlink Ticket").t(),message:t("Are you sure you want to unlink").t()+" '"+t.escape(s)+" - "+t.escape(r)+"' ?",disableCancelButton:!0}),v={},h={};h["action.itsi_event_action_link_ticket.param.ticket_system"]=s,h["action.itsi_event_action_link_ticket.param.ticket_id"]=r,h["action.itsi_event_action_link_ticket.param.operation"]="delete";var p=this._eventModel.get(this.eventManagementStateModel.getEventIDField());v._is_group=!0,v.name="itsi_event_action_link_ticket",v.ids=[p],v.params=h;var u={data:v,earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")};c.on("confirm",function(){var i=new d;n.after(i.render().$el),n.hide(),i.start();var a=l.make_url(["custom","SA-ITOA","event_management_interface","notable_event_actions","itsi_event_action_link_ticket"].join("/"));e.ajax({url:a,context:this,method:"POST",data:(0,o.default)(u),contentType:"application/json",success:function(){i.stop();var e=this._eventModel.get("all_tickets");e?(e=e.split(", "),e=t.filter(e,function(e){return e!==s+" - "+r})):e=[],this._eventModel.set({all_tickets:e.join(", ")})},error:function(e){i.stop(),n.show();var a=new m({errorMessage:t("Could not unlink ticket.").t(),htmlResponse:e});a.show()}})},this),c.show()},render:function(){var i=this._parseACEvalues(this._eventModel.get("itsi_group_ace_text_values")),n=this._parseACEvalues(this._eventModel.get("itsi_group_ace_category_values")),a=this._eventModel.get("description")?"None"===this._eventModel.get("description")?t("None").t():this._eventModel.get("description"):t("None").t();
this.$el.html(y({_:t,description:a,ace_text_values:i,ace_category_values:n,is_ace_enabled:"True"===this._eventModel.get("is_ace_enabled")},{variable:"vars"})),this.serviceDeepDive=[],this.kpiDeepDive=[];var s=this._eventModel.get(this.eventManagementStateModel.getEventIDField()),l=h.getGroupTimeRange(this._eventModel);return this._groupFilterDfd=h.getGroupedEventsFilter(s,l.earliest_time,l.latest_time),this._groupWithServiceFilterDfd=h.getGroupedEventsFilter(s,l.earliest_time,l.latest_time,this.visibleSearchIdString),this.groupFilters=e.when(this._groupFilterDfd,this._groupWithServiceFilterDfd),this.groupFilters.fail(function(){this._renderErrorState()}.bind(this)),this.groupFilters.done(function(e,t){e?(this._renderSeverityBreakdown(e),this._renderTickets(t),this._renderServicesKPIs(e),this._renderCommonFields(t)):this._renderErrorState()}.bind(this)),this},_safeRemoveView:function(e){e&&e instanceof i.View&&(this.stopListening(e),e.remove())},remove:function(){return t.each(this.childViews,function(e){e.remove()}),this._dispose(),i.View.prototype.remove.apply(this,arguments)},_dispose:function(){t.each(this.searchManagers,function(e){e.dispose()})},_renderSeverityBreakdown:function(e){this.searchManagers.severityBreakdownSearchManager||(this.searchManagers.severityBreakdownSearchManager=new a({preview:!0,status_buckets:0,cancelOnUnload:!0,auto_cancel:90,id:"event-management-group-severity-breakdown-manager"},{replace:!0}));var t=h.getGroupTimeRange(this._eventModel);this.searchManagers.severityBreakdownSearchManager.set({search:'`itsi_event_management_index_with_state("'+e+'")` | stats count BY severity | sort -severity | eventstats sum(count) AS total',earliest_time:t.earliest_time,latest_time:t.latest_time}),this._safeRemoveView(this.childViews.severityBreakdownView),this.childViews.severityBreakdownView=new V({managerid:this.searchManagers.severityBreakdownSearchManager.id,el:this.$(".group-aggregation-details-container .description-contents"),eventModel:this._eventModel})},_renderCommonFields:function(e){f.confAccess.fetchGroupBlacklistedFieldsCollection().done(function(t){this.searchManagers.commonFieldsSearchManager||(this.searchManagers.commonFieldsSearchManager=new a({preview:!0,status_buckets:0,cancelOnUnload:!0,auto_cancel:90,id:"event-management-group-common-fields-manager"},{replace:!0}));var i=h.getGroupTimeRange(this._eventModel);this.searchManagers.commonFieldsSearchManager.set({search:"`itsi_event_management_index` "+e+" | fields - "+t+' | fieldsummary | eventstats max(count) as total | search values!="[]" field!=source | head 50 | fields field, values, count total',earliest_time:i.earliest_time,latest_time:i.latest_time}),this._safeRemoveView(this.childViews.commonFieldsView),this.childViews.commonFieldsView=new A({managerid:this.searchManagers.commonFieldsSearchManager.id,el:this.$(".group-fields-commonality-container .common-group-fields-container"),eventModel:this._eventModel})}.bind(this))},renderTickets:function(){"resolved"===this._groupFilterDfd.state()&&this._groupFilterDfd.done(this._renderTickets.bind(this))},_renderTickets:function(e){this.searchManagers.allTicketsSearchManager?this.searchManagers.allTicketsSearchManager.startSearch():this.searchManagers.allTicketsSearchManager=new a({preview:!0,status_buckets:0,cancelOnUnload:!0,auto_cancel:90,id:"event-management-group-ticket-manager"},{replace:!0});var t=h.getGroupTimeRange(this._eventModel);this.searchManagers.allTicketsSearchManager.set({search:"| inputlookup itsi_notable_event_external_ticket WHERE "+e+"| dedup ticket_system, tickets.ticket_id",earliest_time:t.earliest_time,latet_time:t.latest_time}),this._safeRemoveView(this.childViews.allTicketsView),this.childViews.allTicketsView=new E({managerid:this.searchManagers.allTicketsSearchManager.id,eventModel:this._eventModel}),this.$(".ticket-list-container").append(this.childViews.allTicketsView.el)},_renderServicesKPIs:function(e){this.searchManagers.servicesKPIsSearchManager||(this.searchManagers.servicesKPIsSearchManager=new a({preview:!0,status_buckets:0,cancelOnUnload:!0,auto_cancel:90,id:"event-management-group-services-kpis-manager"},{replace:!0}));var t=h.getGroupTimeRange(this._eventModel);this.searchManagers.servicesKPIsSearchManager.set({search:"`itsi_event_management_index` "+e+" | table all_service_kpi_ids, service_kpi_ids, ad_at_kpi_ids, service_ids, serviceid",earliest_time:t.earliest_time,latest_time:t.latest_time}),this._safeRemoveView(this.childViews.servicesView),this.childViews.servicesView=new D({managerid:this.searchManagers.servicesKPIsSearchManager.id,el:this.$(".services-list-container")[0],serviceXhr:this.serviceXhr,serviceDeepDive:this.serviceDeepDive}),this._safeRemoveView(this.childViews.kpisView),this.childViews.kpisView=new C({managerid:this.searchManagers.servicesKPIsSearchManager.id,el:this.$(".kpis-list-container")[0],serviceXhr:this.serviceXhr,kpiDeepDive:this.kpiDeepDive})},_renderErrorState:function(){this.$el.text(t("Could not fetch constituent events of group. It may still be indexing. Try selecting again.").t())},_openServices:function(e){e.preventDefault(),_.openInDeepDive(!0,this.serviceDeepDive,this.eventManagementStateModel.get("earliest"),this.eventManagementStateModel.get("latest"))},_openKPIs:function(e){e.preventDefault(),_.openInDeepDive(!0,this.kpiDeepDive,this.eventManagementStateModel.get("earliest"),this.eventManagementStateModel.get("latest"))},_openSingleService:function(t){t.preventDefault();var i=e(t.target),n=i.data("id"),a=this.serviceDeepDive[n];_.openInDeepDive(!0,[a],this.eventManagementStateModel.get("earliest"),this.eventManagementStateModel.get("latest"))},_openDrilldownSearch:function(e){e.preventDefault();var t={q:this.drilldownSearchData.search,earliest:this.drilldownSearchData.earliest,latest:this.drilldownSearchData.latest},i=n.getPageInfo(),a=r.search(i.root,i.locale,i.app,{data:t});n.redirect(a,!0)},_openSingleKPI:function(t){t.preventDefault();var i=e(t.target),n=i.data("id"),a=this.kpiDeepDive[n];_.openInDeepDive(!0,[a],this.eventManagementStateModel.get("earliest"),this.eventManagementStateModel.get("latest"))}});return $}.apply(t,a),!(void 0!==s&&(e.exports=s))},2372:function(e,t,i){var n,a;n=[i("splunkjs/mvc/simplesplunkview")],a=function(e){var t=e.extend({formatResults:function(t){if(t){var i=t.data(),n=this.output_mode||this.outputMode;return"json_rows"===n?{fields:i.fields,rows:i.rows}:e.prototype.formatResults.apply(this,arguments)}},createView:function(){return{}}});return t}.apply(t,n),!(void 0!==a&&(e.exports=a))},2373:function(e,t){e.exports='<div class="overview-container">\n\t<div class="overview-section description-container">\n\t\t<h5 class="description-header"><%- vars._("Description").t() %></h5>\n\t\t<div class="description-contents"><%- vars.description %></div>\n\t\t<div class="description-additional-contents"></div>\n\t</div>\n\t<div class="overview-section group-aggregation-details-container">\n\t\t<h5 class="description-header"><%- vars._("Group Aggregation Details").t() %></h5>\n\t\t<div class="description-contents"></div>\n\t</div>\n\t<% if (vars.is_ace_enabled) { %>\n\t\t<div class="overview-section smart-mode-group-details-container">\n\t\t\t<h5 class="description-header"><%- vars._("Smart Mode Group Details").t() %></h5>\n\t\t\t<div class="description-contents">\n\t\t\t\t<div class="smart-mode-group-values-container">\n\t\t\t\t\t<span><%- vars.ace_text_values.length === 0 ? vars._(\'No\').t() : vars.ace_text_values.length %> <%- vars._(\'Similar Text Values\').t() %></span>\n\t\t\t\t\t<ul class="smart-mode-group-values">\n\t\t\t\t\t\t<% vars._.each(vars.ace_text_values, function(text, i) { %>\n\t\t\t\t\t\t<li class="<%- i > 4 ? \'smart-mode-groups-item\': \'\'%>"><span class="field" title="<%- text.field %>"><%- text.field %></span>=<span class="value" title="<%- text.value %>"><%- text.value %></span></li>\n\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<% if (vars.ace_text_values.length > 5) { %>\n\t\t\t\t\t\t<a href="#" class="smart-mode-groups-show-all"><%- vars._(\'Show all\').t() %></a>\n\t\t\t\t\t<% } %>\n\t\t\t\t</div>\n\t\t\t\t<div class="smart-mode-group-values-container">\n\t\t\t\t\t<span><%- vars.ace_category_values.length === 0 ? vars._(\'No\').t() : vars.ace_category_values.length %> <%- vars._(\'Similar Category Values\').t() %></span>\n\t\t\t\t\t<ul class="smart-mode-group-values">\n\t\t\t\t\t\t<% vars._.each(vars.ace_category_values, function(category, i) { %>\n\t\t\t\t\t\t<li class="<%- i > 4 ? \'smart-mode-groups-item\': \'\'%>"><span class="field" title="<%- category.field %>"><%- category.field %></span>=<span class="value" title="<%- category.value %>"><%- category.value %></span></li>\n\t\t\t\t\t\t<% }) %>\n\t\t\t\t\t</ul>\n\t\t\t\t\t<% if (vars.ace_category_values.length > 5) { %>\n\t\t\t\t\t\t<a href="#" class="smart-mode-groups-show-all"><%- vars._(\'Show all\').t() %></a>\n\t\t\t\t\t<% } %>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t<% } %>\n\t<div class="overview-section ticket-info-container">\n\t\t<h5 class="tickets-title"><%- vars._("All Tickets").t() %></h5>\n\t\t<div class="ticket-list-container"></div>\n\t</div>\n\t<div class="overview-section contributing-kpi-container">\n\t\t<h5 class="kpi-title"><%- vars._("Contributing KPIs").t() %></h5>\n\t\t<a class="open-kpis deepdive-drilldown"><%- vars._("Open all in Deep Dive").t() %> <i class="icon-external"></i></a>\n\t\t<div class="kpis-list-container"></div>\n\t</div>\n\t<div class="overview-section affected-service-container">\n\t\t<h5 class="service-title"><%- vars._("Possible Affected Services").t() %></h5>\n\t\t<a class="open-services deepdive-drilldown"><%- vars._("Open all in Deep Dive").t() %> <i class="icon-external"></i></a>\n\t\t<div class="services-list-container"></div>\n\t</div>\n    <div class="overview-section group-fields-commonality-container">\n        <h5 class="common-group-fields-header"><%- vars._("Common Fields").t() %></h5>\n        <div class="common-group-fields-container"></div>\n    </div>\n</div>\n'},2374:function(e,t){e.exports='<div class="common-fields-row">\n    <% if (vars.fieldValues.length > 1) { %>\n        <i id="fieldIcon" class="icon-chevron-right<%- vars.fieldValues.length > 1 ? \' common-fields-expandable\': \'\' %>"></i>\n    <% } %>\n    <span class="common-fields-name<%- vars.fieldValues.length > 1 ? \' common-fields-expandable\': \'\' %>" id="<%- vars.fieldName %>">\n        <%- vars.fieldNameStr %>\n    </span>\n    <span class="common-fields-value<%- vars.fieldValues.length > 1 ? \' common-fields-expandable\': \'\' %>">\n        <% if (vars.fieldValues.length > 1) { %>\n            <%- vars.fieldValuesStr %>\n        <% } else { %>\n            <%- vars.fieldValues[0].value %>\n        <% } %>\n    </span>\n    <ul class="common-field-values-list">\n        <li class="common-field-values-list-row">\n            <span class="field-value common-field-value-table-header"><%- vars._(\'Value\').t() %></span>\n            <span class="field-value-count common-field-value-table-header"><%- vars._(\'Frequency\').t() %></span>\n        </li>\n        <% if (vars.fieldValues.length > 1) { %>\n            <% vars._.each(vars.fieldValues, function(fieldValue, i) { %>\n            <li class="common-field-values-list-row <%- i > 4 ? \'extra-common-field-value-item\': \'\' %>">\n                <span class="field-value"><%- fieldValue.value %></span>\n                <span class="field-value-count">\n                    <%- vars.splunkUtil.sprintf(_("%s/%s events").t(), fieldValue.count, vars.eventTotal) %>\n                </span>\n            </li>\n            <% }) %>\n        <% } %>\n        <% if (vars.fieldValues.length > 5) { %>\n            <a href="#" class="group-detail-commonality-fields-show-all"><%- vars._(\'Show all\').t() %></a>\n        <% } %>\n    </ul>\n</div>'},2375:function(e,t,i){var n=i(2376);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2376:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".overview-container .kpi-title,.overview-container .service-title,.overview-container .tickets-title{display:inline-block}.overview-container .deepdive-drilldown{display:inline-block;padding-left:5px}.overview-container h5{margin-bottom:5px}.overview-container .overview-section{margin-bottom:15px}.group-aggregation-details-container .splunk-message-container{padding:0 0 0 1px;margin-left:-25px}.group-aggregation-details-container .icon-external{margin-left:3px}.group-aggregation-details-container .event-severity-container{display:inline-block;margin-right:8px}.group-aggregation-details-container .group-event-severity-breakdown-container{padding-top:8px}.group-aggregation-details-container .event-severity-circle{display:inline-block;width:10px;height:10px;border-radius:5px}.group-aggregation-details-container .event-severity-text{display:inline-block;margin-left:5px;margin-right:5px}.group-aggregation-details-container .edit-policy-link-container{display:inline-block}.kpis-list-container .splunk-message-container,.services-list-container .splunk-message-container,.ticket-info-container .splunk-message-container{padding:0 0 0 1px}.overview-container .overview-contents .overview-row .open-search{margin-left:5px}.overview-container .overview-contents .overview-row .open-search .icon-external{margin-left:2px}.description-additional-contents,.empty-list-message{margin-left:25px}.smart-mode-group-details-container .description-contents{display:flex;flex-direction:row}.smart-mode-group-details-container .smart-mode-group-values span{max-width:100px;display:inline-block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom}.smart-mode-group-details-container .smart-mode-group-values .field{padding-right:5px}.smart-mode-group-details-container .smart-mode-group-values .value{padding-left:5px}.smart-mode-group-details-container .smart-mode-group-values-container{flex:1}.smart-mode-group-details-container .smart-mode-groups-item{display:none}.common-group-fields-container .common-fields-name{font-weight:600;padding-right:3px}.common-group-fields-container .common-fields-value{margin-bottom:15px}.common-field-values-list{list-style-type:none;display:none}.common-field-values-list-row{line-height:20px;display:table-row}.common-fields-expandable:hover{cursor:pointer}.common-field-values-list-row .common-field-value-table-header{font-weight:600;border-bottom:1px solid}.common-field-values-list-row .field-value{display:table-cell;max-width:550px;word-wrap:break-word}.common-field-values-list-row .field-value-count{display:table-cell;padding-left:15px;max-width:110px}.common-field-values-list .extra-common-field-value-item{display:none}.ticket-list-container .shared-waitspinner{display:inline-block}",""])},2377:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}var a,s,l=i(241),o=n(l);a=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("shim/splunk.util"),i("splunkjs/mvc/searchmanager"),i("splunkjs/mvc/tableview"),i(151),i(156),i(129),i(2372),i(2365),i(473),i(2378),i(2254),i(291),i(2382),i(2392),i(2393)],s=function(e,t,i,n,a,s,l,r,d,c,v,h,p,u,m,g,f){var _=t.template(f,null,{variable:"vars"}),w=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments),e(window).on("resize.eventDistributionChart",t.debounce(this._updateView,250).bind(this))},output_mode:"json",resultOptions:{output_time_format:"%s.%Q"},updateView:function(e,i){i?u.lookupAccess.getSeverityLookup().done(function(e){1!==this.$("svg").length&&this.$el.html('<svg class="notable-event-distribution-chart"></svg>');var n=u.getTimezoneId(),a=this.tipView;a||(this.tipView=a=new p({attrs:{series:t("Count").t(),node:this},timezone:n}));var s=t.filter(i,function(i){return t.some((0,o.default)(e),function(e){return Number(i[e])>0})}),c=r.select(this.el).select("svg"),v=this.$("svg").width()||300,h=this.$("svg").height()||200,m=80,g=50,f=10,_=(0,o.default)(e).length,w=(h-g)/_/1.5-2*_+2,b=w+15,M=r.extent(s,function(e){return Number(e._time)}),y=r.scale.linear().domain(M).range([0,v-m-b]),k=r.scale.linear().domain(r.extent((0,o.default)(e),Number)).range([h-g-w-f,w]),S=c.select("g.notable-event-distribution-chart-time-axis-container");S.empty()&&(S=c.append("g").attr("class","notable-event-distribution-chart-time-axis-container"));var x=r.time.scale().domain([d.convertEpochToDate(M[0]),d.convertEpochToDate(M[1])]).range([0,v-m-b]),T=r.svg.axis().scale(x).tickFormat(function(e){return l.default.newSplunkTime({time:e.getTime()}).format("LT")}.bind(this)).ticks(6).innerTickSize(1).outerTickSize(1);S.attr("transform","translate("+m.toString()+","+(h-g).toString()+")").call(T);var V=c.select("g.notable-event-distribution-chart-y-axis-container");V.empty()&&(V=c.append("g").attr("class","notable-event-distribution-chart-y-axis-container")),V.attr("transform","translate(0,"+f.toString()+")");var E=V.selectAll("text.notable-event-distribution-chart-y-axis-labels").data((0,o.default)(e));E.enter().append("text").attr("class","notable-event-distribution-chart-y-axis-labels").attr("font-size",12).text(function(t){return e[t].label}),E.attr("y",function(e){return k(Number(e))+3}),E.exit().remove();var D=c.select("g.notable-event-distribution-chart-area");D.empty()&&(D=c.append("g").attr("class","notable-event-distribution-chart-area")),D.attr("transform","translate("+m.toString()+","+f.toString()+")");var C=D.selectAll("g.notable-event-distribution-chart-bucket").data(s,function(e){return e._time});C.enter().append("g").attr("class","notable-event-distribution-chart-bucket"),C.attr("transform",function(e){return"translate("+y(Number(e._time))+",0)"}),C.exit().remove();var A=0,$=C.selectAll("circle.notable-event-distribution-chart-marker").data(function(i){var n=[];return t.each(i,function(t,a){e.hasOwnProperty(a)&&Number(t)>0&&(n.push({severity:a,count:Number(t),time:i._time}),Number(t)>A&&(A=Number(t)))}),n}),R=r.scale.linear().domain([0,A]).range([2,w]);$.enter().append("circle").attr("r",1).attr("cursor","pointer").attr("stroke","#BBBBBB").attr("stroke-width",0).on("mouseover",function(e){a.tipModel.set({node:this,time:e.time,value:e.count}),a.render(),r.select(this).attr("stroke-width",1)}).on("mouseout",function(){a.hide(),r.select(this).attr("stroke-width",0)}),$.exit().remove(),$.attr("r",function(e){return R(e.count)}).attr("cy",function(e){return k(Number(e.severity))}).attr("fill",function(t){return e[t.severity].color||"#DDDDDD"}).attr("stroke-width",0)}.bind(this)):this.displayMessage("no-results")},remove:function(){return e(window).off("resize.eventDistributionChart"),this.tipView&&this.tipView.remove(),c.prototype.remove.apply(this,arguments)}}),b=i.View.extend({initialize:function(e){if(e=e||{},!e.eventModel)throw"Must provide event to EventManagementDetailGroupedEventsContentView";this._eventModel=e.eventModel,this._eventManagementStateModel=e.eventManagementStateModel,this._visibleSearchIdString=e.visibleSearchIdString||"";var t=this._eventModel.get(this._eventManagementStateModel.getEventIDField()),n=m.getGroupTimeRange(this._eventModel);return this._groupFilterDfd=m.getGroupedEventsFilter(t,n.earliest_time,n.latest_time,this._visibleSearchIdString),this._filterSnippet="",i.View.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.html(_({_:t},{variable:"vars"})),this._groupFilterDfd.done(function(e){this._filterSnippet=e,this._renderContent()}.bind(this)),this._groupFilterDfd.fail(this._renderErrorState.bind(this)),this},_renderContent:function(){this._children=[];var e=m.getGroupTimeRange(this._eventModel);this._children._graphSearchManager=new a({id:"event_management_detail_panel_grouped_events_chart_search_manager",search:'`itsi_event_management_index_with_state("'+this._filterSnippet+'")` | timechart bins=100 count BY severity',latest_time:e.latest_time,earliest_time:e.earliest_time,cancelOnUnload:!0,auto_cancel:90,preview:!0},{replace:!0}),this._children._groupedEventsTable=new g({filterSnippet:this._filterSnippet,eventModel:this._eventModel,earliestTime:e.earliest_time,latestTime:e.latest_time}),this._children._groupedEventsChart=new w({id:"event-management-detail-panel-grouped-events-chart",managerid:"event_management_detail_panel_grouped_events_chart_search_manager"},{replace:!0}),this.$(".event-management-detail-panel-grouped-events-table-container").append(this._children._groupedEventsChart.render().el),this.$(".event-management-detail-panel-grouped-events-table-container").append(this._children._groupedEventsTable.render().el)},_renderErrorState:function(){this.$el.text(t("Could not fetch constituent events of group. It may still be indexing. Try selecting again.").t())},_disposeChildren:function(){this._children instanceof Array&&t.each(this._children,function(e){t.isFunction(e.remove)&&e.remove(),t.isFunction(e.dispose)&&e.dispose()})},restartSearches:t.debounce(function(){this._children&&this._children._graphSearchManager&&this._children._graphSearchManager.startSearch(),this._children&&this._children._groupedEventsTable&&this._children._groupedEventsTable.restartSearches()},6e4,!0),refresh:function(){this._children&&this._children._groupedEventsChart&&this._children._groupedEventsChart._updateView()},remove:function(){return this._disposeChildren(),i.View.prototype.remove.apply(this,arguments)}}),M=v.extend({initialize:function(e){if(e=e||{},!e.eventModel)throw"Must provide event to EventManagementDetailGroupedEventsTabView";e.tabId="grouped-events",e.tabLabel=t("Grouped Events").t(),e.contentViewOptions={visibleSearchIdString:e.visibleSearchIdString,eventModel:e.eventModel,eventManagementStateModel:e.eventManagementStateModel},e.ContentView=b,v.prototype.initialize.apply(this,arguments)},activate:function(){return this.getContentView().refresh(),this}});return M}.apply(t,a),!(void 0!==s&&(e.exports=s))},2382:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2386),i(2387),i(2388),i(2383),i(2389),i("splunkjs/mvc/searchmanager"),i("splunkjs/mvc/tableview"),i("splunkjs/mvc/utils"),i(2390)],a=function(e,t,i,n,a,s,l,o,r,d,c){var v=i.View.extend({events:{"click td.drilldown-search a":"_openDrilldownSearch","click td.drilldown-link a":"_openDrilldownLink"},searchTemplate:t.template('`itsi_event_management_index_with_state("<%= vars.filterSnippet %>")`<%= vars.visibleServiceIds %> | replace "null" WITH "" IN <%= vars.tableFields %> | table <%= vars.tableFields %> | rename <%= vars.renameFields %>',null,{variable:"vars"}),initialize:function(e){this.options=t.extend({earliestTime:null,eventModel:null,filterSnippet:null,latestTime:null,visibleServiceIds:null},e,{_hiddenClass:"hidden",_rowDataKey:"rowData",_tableViewId:"event-management-detail-panel-grouped-events-table"}),this._children={},this._tableFields=[["severity","Severity"],["title","Title"],["_time","Time"],["drilldown_search_search"],["drilldown_search_earliest_offset"],["drilldown_search_latest_offset"],["drilldown_search_title","Drilldown Search"],["drilldown_uri"],["drilldown_title","Drilldown Link"],["event_id","Search"]],this.localizedLabels=[t("Drilldown Search").t(),t("Drilldown Link").t()],this._drilldownSearchTableField=this._getColumnName("drilldown_search_title"),this._drilldownLinkTableField=this._getColumnName("drilldown_title")},render:function(){return this._removeChild(this._children.tableSearchManager),this._children._tableSearchManager=this.createTableSearchManager(),this._removeChild(this._children._tableView),this._children._tableView=this.createTableView(),this.$el.append(this._children._tableView.render().el),this},createTableSearchManager:function(){var e=this._getTableSearchQuery(),t=new r({id:"event_management_detail_panel_grouped_events_table_search_manager",search:e,earliest_time:this.options.earliestTime,latest_time:this.options.latestTime,cancelOnUnload:!0,auto_cancel:90,preview:!0},{replace:!0});return t},getTableSearchManager:function(){return this._children._tableSearchManager},_getTableSearchQuery:function(){var e=this._tableFields.map(function(e){return e[0]}).join(","),t=this._tableFields.map(function(e){return 1===e.length?"":'"'+e[0]+'" AS "'+e[1]+'"'}).join(" "),i=this.searchTemplate({filterSnippet:this.options.filterSnippet,visibleServiceIds:this.options.visibleServiceIds,tableFields:e,renameFields:t},{variable:"vars"});return i},createTableView:function(){var i=new d({id:this.options._tableViewId,count:10,dataOverlayMode:"none",drilldown:"none",rowNumbers:!1,wrap:!0,managerid:this.getTableSearchManager().id,sortableFieldsExcluded:["Search"]},{replace:!0});i.$el.addClass(this.options._tableViewId),this.listenTo(i.viz,"rendered",function(){i.$("th").each(t.bind(function(t,i){var n=this._tableFields[t][0];e(i).addClass(n)},this))}),i.addCellRenderer(new o),i.addCellRenderer(new l),i.addCellRenderer(new a({earliest_time:this.options.earliestTime,latest_time:this.options.latestTime}));var n=new s({fields:["drilldown_search_search","drilldown_search_earliest_offset","drilldown_search_latest_offset",this._drilldownSearchTableField],render:this._getDrilldownCellRender({cellField:this._drilldownSearchTableField,cellClass:"drilldown-search",validate:t.bind(this._validateDrilldownSearchCell,this)})});i.addCellRenderer(n);var r=new s({fields:["drilldown_uri",this._drilldownLinkTableField],render:this._getDrilldownCellRender({cellField:this._drilldownLinkTableField,cellClass:"drilldown-link",validate:t.bind(this._validateDrilldownLinkCell,this)})});return i.addCellRenderer(r),i},_getDrilldownCellRender:function(i){var n=i.cellField,a=i.cellClass,s=i.validate,l=t.bind(function(i,l,o){var r=l.field===n?a:this.options._hiddenClass;i.addClass(r),i.data(this.options._rowDataKey,o);var d=e("<a/>");if(d.attr({href:"#",target:"_blank"}),s(i,l,o,d)===!0){var c=t.escape(l.value);d.html(c),i.append(d)}},this);return l},_validateDrilldownSearchCell:function(e,i,n){if(i.field!==this._drilldownSearchTableField)return!1;var a=t.result(n.drilldown_search_search,"value",""),s=i.value,l=!t.isEmpty(a)&&!t.isEmpty(s);return l},_validateDrilldownLinkCell:function(e,i,n,a){if(i.field!==this._drilldownLinkTableField)return!1;var s=t.result(n.drilldown_uri,"value","")||"";return!t.isEmpty(s.trim())&&(a.attr("href",s),this._isSafeUrl(s)===!0)},_openDrilldownSearch:function(i){i.preventDefault();var a=e(i.target).parent().data(this.options._rowDataKey),s=t.result(a.drilldown_search_search,"value",""),l=t.result(a.drilldown_search_earliest_offset,"value",""),o=t.result(a.drilldown_search_latest_offset,"value",""),r=new n;r.open({earliestOffset:l,latestOffset:o,search:s,eventModel:this.options.eventModel})},_openDrilldownLink:function(i){i.preventDefault();var n=e(i.target).parent().data(this.options._rowDataKey),a=t.result(n.drilldown_uri,"value","");this._isSafeUrl(a)===!0&&c.redirect(a,!0)},_isSafeUrl:function(e){var t=document.createElement("a");t.href=e;var i=t.protocol,n="http:"===i||"https:"===i;return n},_getColumnName:function(e){var i=t.find(this._tableFields,function(t){return t[0]===e});return i.length>=1?i[1]:i[0]||null},restartSearches:function(){var e=this.getTableSearchManager();e&&e.startSearch()},remove:function(){return t.each(this._children,function(e){this._removeChild(e)},this),this._children={},i.View.prototype.remove.apply(this,arguments)},_removeChild:function(e){e&&(this.stopListening(e),t.isFunction(e.remove)&&e.remove(),t.isFunction(e.dispose)&&e.dispose())}});return v}.apply(t,n),!(void 0!==a&&(e.exports=a))},2383:function(e,t,i){var n,a;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc/tableview"),i(2254),i(2384)],a=function(e,t,i,n,a){var s={},l=a.lookupAccess.getSeverityLookup();l.done(function(e){s=e});var o=n.BaseCellRenderer.extend({initialize:function(t){this.attr="Severity",this.localizedAttr=e("Severity").t(),t&&t.attr&&(this.attr=t.attr)},canRender:function(e){return e.field===this.attr},render:function(t,i){var n=i.value,a=s[n]||{};t.html('<div class="event-management-severity-indicator-circle"/><div class="event-management-severity-indicator-text"></div><div>'),t.find(".event-management-severity-indicator-text").text(e(a.label).t()||e("Unknown Severity").t()),t.find(".event-management-severity-indicator-circle").css("background-color",a.color||"#DDDDDD")}});return o}.apply(t,n),!(void 0!==a&&(e.exports=a))},2386:function(e,t,i){var n,a;n=[i("require/underscore"),i("splunkjs/mvc/utils"),i("uri/route")],a=function(e,t,i){function n(){this._defaultEarliestOffset=-300,this._defaultLatestOffset=300}return e.extend(n.prototype,{open:function(e){var t=this._toNumber(e.earliestOffset,this._defaultEarliestOffset),i=this._toNumber(e.latestOffset,this._defaultLatestOffset),n=e.eventModel,a={q:e.search,earliest:this._getDrilldownEarliestTime(n,t),latest:this._getDrilldownLatestTime(n,i)};this.openSplunkSearch(a)},openSplunkSearch:function(e){var n=t.getPageInfo(),a=i.search(n.root,n.locale,n.app,{data:e});t.redirect(a,!0)},_toNumber:function(e,t){var i=parseInt(e,10);return isNaN(i)?t:i},_getDrilldownEarliestTime:function(e,t){var i=this._getDrilldownTime(e,t,"_first_time");return i},_getDrilldownLatestTime:function(e,t){var i=this._getDrilldownTime(e,t,"_last_time");return i},_getDrilldownTime:function(e,t,i){var n=e.get("_time")||e.get(i),a=Number(n)+t;return a}}),n}.apply(t,n),!(void 0!==a&&(e.exports=a))},2388:function(e,t,i){var n,a;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("splunkjs/mvc/utils"),i("uri/route"),i("splunkjs/mvc/tableview")],a=function(e,t,i,n,a,s){var l=s.BaseCellRenderer.extend({initialize:function(t){this.options=e.extend({fields:[],render:function(){}},t),this._rowData={},this._renderableFields=e.reduce(this.options.fields,function(e,t){return e[t]=!0,e},{})},canRender:function(e){var t=e.field,i=this._rowData.hasOwnProperty(t);return i&&(this._rowData={}),this._rowData[t]=e,this._renderableFields[t]===!0},render:function(e,t){return this.options.render(e,t,this._rowData),this}});return l}.apply(t,n),!(void 0!==a&&(e.exports=a))},2389:function(e,t,i){var n,a;n=[i("require/underscore"),i("shim/jquery"),i("splunkjs/mvc/tableview"),i(151),i(149)],a=function(e,t,i,n,a){var s=i.BaseCellRenderer.extend({initialize:function(t){this.attr="Time",this.localizedAttr=e("Time").t(),t&&t.attr&&(this.attr=t.attr)},canRender:function(e){return e.field===this.attr},render:function(e,t){e.html(a.getLocalizedDate(n.default.newSplunkTime({time:1e3*t.value})))}});return s}.apply(t,n),!(void 0!==a&&(e.exports=a))},2390:function(e,t,i){var n=i(2391);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2391:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-detail-panel-grouped-events-table th._time,.event-management-detail-panel-grouped-events-table th.severity{text-align:left}.event-management-detail-panel-grouped-events-table th.severity{width:100px}.event-management-detail-panel-grouped-events-table td.hidden,.event-management-detail-panel-grouped-events-table th[data-sort-key=drilldown_search_earliest_offset],.event-management-detail-panel-grouped-events-table th[data-sort-key=drilldown_search_latest_offset],.event-management-detail-panel-grouped-events-table th[data-sort-key=drilldown_search_search],.event-management-detail-panel-grouped-events-table th[data-sort-key=drilldown_uri]{display:none}.event-management-detail-panel-grouped-events-table td.drilldown-link,.event-management-detail-panel-grouped-events-table td.drilldown-search,.event-management-detail-panel-grouped-events-table th.drilldown_search_title,.event-management-detail-panel-grouped-events-table th.drilldown_title{width:20%}.event-management-detail-panel-grouped-events-table th.event_id{width:50px}",""])},2392:function(e,t){e.exports='<div class="event-management-detail-panel-grouped-events-chart-container">\n</div>\n<div class="event-management-detail-panel-grouped-events-table-container">\n</div>'},2393:function(e,t,i){var n=i(2394);"string"==typeof n&&(n=[[e.id,n,""]]);
i(15)(n,{});n.locals&&(e.exports=n.locals)},2394:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".notable-event-distribution-chart{min-width:300px;width:100%;height:250px;margin:5px}",""])},2395:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}var a,s,l=i(130),o=n(l);a=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("shim/splunk.util"),i("splunkjs/mvc/searchmanager"),i("splunkjs/mvc/tableview"),i(2365),i(473),i(291),i(2396),i(2397)],s=function(e,t,i,n,a,s,l,r,d,c){var v=t.template(c,null,{variable:"vars"}),h=i.View.extend({initialize:function(t){if(t=t||{},!t.eventModel)throw"Must provide eventModel to EventManagementDetailCommentsContentView";this.eventModel=t.eventModel,this.eventManagementStateModel=t.eventManagementStateModel,this.visibleSearchIdString=t.visibleSearchIdString||"";var n=this.eventManagementStateModel.getEventIDField(),a="";if(this.eventSearchXhr=e.Deferred(),this.eventManagementStateModel.get("eventDeduplication")){var s=d.getGroupTimeRange(this.eventModel);this.eventSearchXhr=d.getGroupedEventsFilter(this.eventModel.get(n),s.earliest_time,s.latest_time,this.visibleSearchIdString)}else a='event_id="'+this.eventModel.get(n)+'"',this.eventSearchXhr.resolve(a);return i.View.prototype.initialize.apply(this,arguments)},renderCommentsList:function(e){var t="| inputlookup itsi_notable_event_comment_lookup | search "+e+' | sort -mod_time | eval mod_time=strftime(mod_time, "%Y-%m-%d %H:%M:%S"), create_time=strftime(create_time, "%Y-%m-%d %H:%M:%S") | table user, mod_time, comment | rename mod_time AS Time user AS User comment AS Comment';this.commentsSearchManager=new a({id:"event_management_detail_panel_comments_search_manager",search:t,latest_time:"now",earliest_time:0,cancelOnUnload:!0,auto_cancel:90,preview:!0}),this.commentsTable=new s({id:"event-management-detail-panel-comments-list",count:10,dataOverlayMode:"none",drilldown:"none",rowNumbers:!1,wrap:!0,managerid:this.commentsSearchManager.id}),this.$(".event-management-detail-panel-comments-list").html(""),this.$(".event-management-detail-panel-comments-list").append(this.commentsTable.render().$el)},render:function(){return this.$el.html(v({_:t},{variable:"vars"})),this.$(".event-management-detail-panel-post-comment-btn").removeClass("disabled"),this.eventSearchXhr.done(function(e){this.renderCommentsList(e)}.bind(this)).fail(function(e){if(!e){var t=this.eventManagementStateModel.getEventIDField();console.log("Unable to fetch comments for group_id: "+this.eventModel.get(t))}}.bind(this)),this},events:{"click a.event-management-detail-panel-post-comment-btn":function(i){if(i.preventDefault(),!this.$(".event-management-detail-panel-post-comment-btn").hasClass("disabled")){var a=this.$(".event-management-detail-panel-post-comment-input").val().trim();if(a){var s=(new Date).getTime();s/=1e3;var l=this.eventManagementStateModel.getEventIDField(),d={event_id:this.eventModel.get(l),user:n.getConfigValue("USERNAME"),comment:a,create_time:s,mod_time:s},c=n.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event_comment"].join("/")),v=e.ajax({url:c,headers:{"Content-Type":"application/json"},type:"POST",data:(0,o.default)(d)});v.done(function(){this.commentsSearchManager&&(this.commentsSearchManager.cancel(),this.commentsSearchManager.createSearch()),this.$(".event-management-detail-panel-post-comment-input").val("")}.bind(this)).error(function(e){console.log("post comment xhr error"),console.log(e);var i=new r({errorMessage:t("Could not add comment.").t(),htmlResponse:e});i.show()})}}}},remove:function(){return this.eventSearchXhr&&"resolved"!==this.eventSearchXhr.state()&&this.eventSearchXhr.reject(!0),this.commentsSearchManager&&(this.commentsSearchManager.cancel(),this.commentsSearchManager.dispose()),this.commentsTable&&this.commentsTable.remove(),i.View.prototype.remove.apply(this,arguments)}}),p=l.extend({initialize:function(e){if(e=e||{},!e.eventModel)throw"Must provide eventModel to EventManagementDetailCommentsTabView";e.tabId="comments",e.tabLabel=t("Comments").t(),e.contentViewOptions={eventModel:e.eventModel,eventManagementStateModel:e.eventManagementStateModel,visibleSearchIdString:e.visibleSearchIdString},e.ContentView=h,l.prototype.initialize.apply(this,arguments)},activate:function(){return this.getContentView().commentsSearchManager&&this.getContentView().commentsSearchManager.startSearch(),this}});return p}.apply(t,a),!(void 0!==s&&(e.exports=s))},2396:function(e,t){e.exports='<div class="event-management-detail-panel-post-comment-container">\n\t<table class="event-management-detail-panel-post-comment-content-container">\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<textarea class="event-management-detail-panel-post-comment-input"></textarea>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div class="event-management-detail-panel-post-comment-btn-container">\n\t\t\t\t\t<a class="event-management-detail-panel-post-comment-btn btn"><%- vars._(\'Comment\').t() %></a>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n<div class="event-management-detail-panel-comments-list-container">\n\t<div class="event-management-detail-panel-comments-list"></div>\n</div>'},2397:function(e,t,i){var n=i(2398);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2398:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-detail-panel-post-comment-container{margin-bottom:10px}table.event-management-detail-panel-post-comment-content-container{width:100%}.event-management-detail-panel-post-comment-input{border:1px solid #bfbfbf;border-radius:0;width:100%;min-height:100px;box-sizing:border-box}.event-management-detail-panel-post-comment-btn-container{margin-bottom:10px;text-align:right}",""])},2399:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("splunkjs/mvc/utils"),i("uri/route"),i(2365),i("splunkjs/mvc/tableview"),i("splunkjs/mvc/searchmanager"),i(2254),i(291),i(2400)],a=function(e,t,i,n,a,s,l,o,r,d,c){var v=t.template(c,{_:t},{variable:"vars"}),h=i.View.extend({initialize:function(t){if(t=t||{},!t.eventModel)throw"Must provide event model to EventManagementDetailOverviewTabView";this.eventModel=t.eventModel,this.searchId="event_management_detail_panel_activity_detail_search_manager",this.visibleSearchIdString=t.visibleSearchIdString||"",this.searchInitDfd=e.Deferred();var n=r.getStateModel(),a=n.getEventIDField();if(n.get("eventDeduplication")){var s=d.getGroupTimeRange(this.eventModel);this.eventSearchXhr=d.getGroupedEventsFilter(this.eventModel.get(a),s.earliest_time,s.latest_time,this.visibleSearchIdString),this.eventSearchXhr.done(function(e){this.search='index="itsi_notable_audit" '+e+' | eval mod_time=strftime(_time, "%Y-%m-%d %H:%M:%S") | table activity_type mod_time user activity | rename activity_type AS "Activity Type" mod_time AS Time user AS User activity AS Activity',this.searchInitDfd.resolve()}.bind(this))}else this.search='index="itsi_notable_audit" event_id='+this.eventModel.get(a)+'| eval mod_time=strftime(_time, "%Y-%m-%d %H:%M:%S") | table activity_type mod_time user activity | rename activity_type AS "Activity Type" mod_time AS Time user AS User activity AS Activity',this.searchInitDfd.resolve();return this.searchInitDfd.done(function(){this.searchManager=new o({id:this.searchId,preview:!0,status_buckets:0,search:this.search,cancelOnUnload:!0,auto_cancel:90,earliest_time:0,latest_time:"now"})}.bind(this)),this.tableView=new l({id:"event-management-detail-panel-activity-detail-list",managerid:this.searchId,dataOverlayMode:"none",rowNumbers:!1,drilldown:"none",wrap:!0}),i.View.prototype.initialize.apply(this,arguments)},render:function(){return this.$el.html(v),this.$(".activity-detail-table-view").append(this.tableView.render().$el),this},events:{"click a.run-search":function(e){e.preventDefault();var t={q:this.search,earliest:0,latest:"now"},i=n.getPageInfo(),s=a.search(i.root,i.locale,i.app,{data:t});n.redirect(s,!0)}},remove:function(){return this.searchInitDfd&&"resolved"!==this.searchInitDfd.state()&&this.searchInitDfd.reject(),this.searchManager&&(this.searchManager.cancel(),this.searchManager.dispose()),this.tableView&&this.tableView.remove(),i.View.prototype.remove.apply(this,arguments)}}),p=s.extend({initialize:function(e){if(e=e||{},!e.eventModel)throw"Must provide event model to EventManagementDetailActivityTabView";e.tabId="activity",e.tabLabel=t("Activity").t(),e.contentViewOptions={eventModel:e.eventModel,visibleSearchIdString:e.visibleSearchIdString},e.ContentView=h,s.prototype.initialize.apply(this,arguments)},activate:function(){var e=this.getContentView().searchManager;return e&&e.startSearch(),this},remove:function(){return this.contentView.remove(),i.View.prototype.remove.apply(this,arguments)}});return p}.apply(t,n),!(void 0!==a&&(e.exports=a))},2400:function(e,t){e.exports='<div class="activity-detail-table-view">\n\n</div>\n<a class="run-search"><%- vars._(\'Open in search\').t() %> <i class="icon-external"></i></a>'},2401:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("views/shared/waitspinner/Master"),i("splunkjs/mvc/searchmanager"),i("views/shared/PopTart"),i(2402),i(2404),i(2405),i(2406)],a=function(e,t,i,n,a,s,l,o,r){var d=t.template(r,null,{variable:"vars"}),c=s.extend({initialize:function(e){return e=e||{},e.mode="menu",e.onHiddenRemove=!0,this.activityCollection=e.activityCollection,this.pointTo=e.pointTo,this._rowViews=[],this._firstRender=!0,s.prototype.initialize.apply(this,arguments)},template:'<ul class="event-management-detail-panel-body-header-event-activity-list"></ul>',events:t.extend({},s.prototype.events),render:function(){return this._firstRender&&(this.$el.html(s.prototype.template),this.$el.addClass("event-management-detail-panel-header-activity-popdown-dialog"),this.$(".popdown-dialog-body").addClass("event-management-detail-panel-header-activity-popdown-body"),this.$(".popdown-dialog-body").removeClass("popdown-dialog-padded"),this.$(".popdown-dialog-body").append(this.template),this.renderRows(),this._firstRender=!1),e("body").append(this.el),this.show(this.pointTo),this},renderRows:function(){this.$(".event-management-detail-panel-body-header-event-activity-list").empty(),this.activityCollection.each(this.addRow,this)},addRow:function(e){var t=new l({model:e});this.$(".event-management-detail-panel-body-header-event-activity-list").append(t.render().el)}}),v=i.Collection.extend({model:o}),h=i.View.extend({className:"event-management-panel-header-activity-list",initialize:function(e){e=e||{},this.visited=!1,e.eventActionStatus&&(this.visited=e.eventActionStatus.visited),this.eventActionDispatcher=e.eventActionDispatcher,this.waitSpinner=new n,this.activityCollection=new v(e.eventActionStatus.activities||[]),this.listenTo(this.activityCollection,"change reset",this.render)},addAction:function(e){var t=new o({sid:e.sid,action_type:e.action_type,action_data:e.action_data,action_label:e.action_label});return this.activityCollection.add(t),t},events:{mouseover:function(t){e(t.currentTarget).hasClass("event-management-panel-header-activity-list")&&(t.preventDefault(),this.popTartView||(this.popTartView=new c({activityCollection:this.activityCollection,pointTo:e(t.currentTarget)})),this.popTartView.render())},mouseout:"_hidePopTart","click a.event-management-detail-panel-body-header-event-activity-view-in-activity-link":function(e){e.preventDefault(),this.eventActionDispatcher.trigger("notableEventActions:viewInActivityLinkVisited"),this.clearActivityQueue()}},clearActivityQueue:function(){this.activityCollection.reset()},_hidePopTart:function(){this.popTartView&&this.popTartView.hide()},isActionsInProgress:function(){return 0!==this.activityCollection.where({action_status:"progress"}).length},hide:function(){this.isActionsInProgress()||this.activityCollection.reset()},render:function(){var e=this.activityCollection.length,i={_:t,numberOfActions:e};if(0===e)return this.$el.html(d(i,{variable:"vars"})),this;if(this.isActionsInProgress())i.status="progress";else{var n=this.activityCollection.where({action_status:"done"}),a=n.length,s=e-a;i.status="done",i.failed=s,i.success=a,a&&this.eventActionDispatcher.trigger("notableEventActions:actionCompleted",n)}return this.popTartView&&this.popTartView.renderRows(),this.$el.html(d(i,{variable:"vars"})),this.waitSpinner.prependTo(this.$(".event-management-panel-header-activity-list-spinner")),this.waitSpinner.start(),this},remove:function(){return this.popTartView&&this.popTartView.remove(),t.each(this.activityCollection.models,function(e){e.trigger("remove")}),i.View.prototype.remove.apply(this,arguments)}});return h}.apply(t,n),!(void 0!==a&&(e.exports=a))},2402:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2403)],a=function(e,t,i,n){var a=t.template(n,null,{variable:"vars"}),s=i.View.extend({initialize:function(){this.listenTo(this.model,"remove",this.remove)},tagName:"li",actionLabels:{itsi_sample_event_action_ping:{done:t("Pinged").t(),progress:t("Pinging").t(),fail:t("ping").t()},script:{done:t("Ran").t(),progress:t("Running").t(),fail:t("run").t()},email:{done:t("Sent").t(),progress:t("Sending").t(),fail:t("send").t()},itsi_event_action_snow_ticket:{done:t("Created").t(),progress:t("Creating").t(),fail:t("create").t()},default:{done:t("Ran").t(),progress:t("Running").t(),fail:t("run").t()}},_getActionLabel:function(e,t){return"cancel"!==t&&"error"!==t||(t="fail"),this.actionLabels.hasOwnProperty(e)?this.actionLabels[e][t]:this.actionLabels.default[t]},render:function(){var e={_:t,action_type:this.model.get("action_type"),action_status:this.model.get("action_status"),action_label:this._getActionLabel(this.model.get("action_type"),this.model.get("action_status"))};switch(e.action_type){case"itsi_sample_event_action_ping":e.action_item=t("host").t();break;case"script":var i=this.model.get("action_data"),n=i.params?i.params:{"action.script.filename":t("script").t()},s=n["action.script.filename"];e.action_item=s;break;case"email":e.action_item=t("email").t();break;case"itsi_event_action_snow_ticket":e.action_item=t("ticket").t();break;default:e.action_item=this.model.get("action_label")}return this.$el.html(a(e,{variable:"vars"})),this}});return s}.apply(t,n),!(void 0!==a&&(e.exports=a))},2403:function(e,t){e.exports="<div class=\"event-management-detail-panel-body-header-event-activity-container\">\n\t<div class=\"event-management-detail-panel-body-header-event-activity-status\">\n\t\t<% if (vars.action_status === 'progress') { %>\n\t\t\t<div class=\"event-management-detail-panel-body-header-event-activity-spinner\"></div>\n\t\t<% } else if (vars.action_status === 'error' || vars.action_status === 'fail' || vars.action_status === 'cancel') { %>\n\t\t\t<i class=\"event-management-detail-panel-body-header-event-activity-icon icon-alert\"></i>\n\t\t<% } else if (vars.action_status === 'done') { %>\n\t\t\t<i class=\"event-management-detail-panel-body-header-event-activity-icon icon-check\"></i>\n\t\t<% } %>\n\t</div>\n\t<div class=\"event-management-detail-panel-body-header-event-activity-label\">\n\t\t<a class=\"event-management-detail-panel-body-header-event-activity\">\n\t\t\t<%- vars.action_status === 'error' || vars.action_status === 'fail' || vars.action_status === 'cancel' ? vars._('Failed to ').t() : ''%><%- vars.action_label %> <%- vars.action_item %>\n\t\t</a>\n\t</div>\n</div>"},2404:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("splunkjs/mvc/searchmanager")],a=function(e,t,i,n){var a=i.Model.extend({defaults:{sid:null,action_status:"",action_type:"",action_data:"",action_label:""},initialize:function(){"done"!==this.get("action_status")&&this._initSearchManager()},_initSearchManager:function(){this._searchManagerInstance=new n({sid:this.get("sid")}),this._searchManagerInstance.on("search:error",function(e){this.set("action_status","error"),this._dispose()}.bind(this)),this._searchManagerInstance.on("search:cancelled",function(e){this.set("action_status","cancel"),this._dispose()}.bind(this)),this._searchManagerInstance.on("search:failed",function(e){this.set("action_status","fail"),this._dispose()}.bind(this)),this._searchManagerInstance.on("search:progress",function(e){if(e&&e.content){var t=e.content;if(t.messages.length&&("ERROR"===t.messages[0].type||"FATAL"===t.messages[0].type))return this.set("action_status","error"),void this._dispose()}this.set("action_status","progress")}.bind(this)),this._searchManagerInstance.on("search:done",function(e){var t=e.content;return this._dispose(),t.messages.length&&"ERROR"===t.messages[0].type?void this.set("action_status","error"):void this.set("action_status","done")}.bind(this))},_dispose:function(){null!==this._searchManagerInstance&&this._searchManagerInstance.dispose()}});return a}.apply(t,n),!(void 0!==a&&(e.exports=a))},2405:function(e,t){e.exports='<% if(vars.numberOfActions !== 0) { %>\n\t<% if(vars.status === \'progress\') { %>\n\t\t<div class="event-management-panel-header-activity-list-spinner"></div>\n\t\t<span><%- vars._(\'Running actions...\').t() %></span>\n\t<% } else if(vars.failed !== 0) { %>\n\t\t<i class="event-management-detail-panel-body-header-event-activity-icon icon-alert"></i> <%- vars._(\'Errors running actions.\').t() %> <a href="#" class="event-management-detail-panel-body-header-event-activity-view-in-activity-link"><%- vars._(\'View in Activity\').t() %></a>\n\t<% } else { %>\n\t\t<i class="event-management-detail-panel-body-header-event-activity-icon icon-check"></i> <%- vars._(\'Successfully dispatched actions.\').t() %> <a href="#" class="event-management-detail-panel-body-header-event-activity-view-in-activity-link"><%- vars._(\'View in Activity\').t() %></a>\n\t<% } %>\n<% } %>'},2406:function(e,t,i){var n=i(2407);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2407:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,'.event-management-detail-panel-body-header-event-activity-container{padding:8px}.event-management-detail-panel-body-header-event-activity-list{list-style:none;margin:0;min-width:90px;background:#222}.event-management-detail-panel-body-header-event-activity-list li a{border-top:1px dotted rgba(0,0,0,.2);color:#fff;white-space:normal;display:block;text-decoration:none;cursor:default}.event-management-detail-panel-body-header-event-activity-list li:first-child a{border-top:none}.event-management-detail-panel-body-header-event-activity-list .alert{padding:0 10px 0 12px}.event-management-detail-panel-body-header-event-activity-list .alert .icon-alert{top:0}.event-management-detail-panel-header-activity-popdown-dialog .arrow:before{border-bottom:8px solid #222}.event-management-detail-panel-header-activity-popdown-dialog.up>.arrow:before{border-top:8px solid #222}.popdown-dialog-body.event-management-detail-panel-header-activity-popdown-body{max-height:350px;overflow-y:auto;min-width:200px}.event-management-panel-header-activity-list-spinner{float:left;padding-right:5px}.event-management-detail-panel-body-header-event-activity-label,.event-management-detail-panel-body-header-event-activity-status{display:inline-block;vertical-align:top}.event-management-detail-panel-body-header-event-activity-status{width:22px}.event-management-detail-panel-body-header-event-activity-spinner{background:url("/static/img/skins/default/loading_white.gif") no-repeat;width:16px;height:16px;background-size:16px}.event-management-detail-panel-body-header-event-activity-icon{font-size:18px}.event-management-detail-panel-body-header-event-activity-icon.icon-check{color:#65a637}.event-management-detail-panel-body-header-event-activity-icon.icon-alert{color:#d85d3c}',""])},2408:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("shim/splunk.util"),i("splunkjs/mvc/sharedmodels"),i("views/shared/PopTart"),i(291),i(2409),i(2411),i(2412)],a=function(e,t,i,n,a,s,l,o,r){var d=t.template(r,null,{variable:"vars"}),c=function(e){for(var t=e.length-1;t>=0;t--)e[t].custom_action=!1;return e},v=a.get("user"),h=!0,p=s.extend({initialize:function(e){if(e=e||{},e.eventModel instanceof i.Model)this._eventModel=e.eventModel;else{if(!(e.eventCollection instanceof i.Collection))throw"the event against which to run actions must be provided to EventManagementExtensibleActionsMenuView";this._eventCollection=e.eventCollection,this._eventModel=this._eventCollection.at(0)}return e.mode="menu",e.onHiddenRemove=!0,this.eventManagementStateModel=e.eventManagementStateModel,l.getSecurityGroupLookup().done(function(e){h=e}),this._actions=e.actions||[],this._firstRender=!0,this._loadingActions=!0,this._insufficientPermissions=!1,s.prototype.initialize.apply(this,arguments)},events:t.extend({},s.prototype.events,{"click a.event-management-extensible-action":function(t){var i,a=e(t.currentTarget),s=a.data("action-name"),l={onHiddenRemove:!0,actionName:s,actionLabel:n.lowerTrimStr(a.text()),eventActionDispatcher:this.options.eventActionDispatcher,eventManagementStateModel:this.eventManagementStateModel,isRBACEnabled:h};this._eventCollection?l.eventCollection=this._eventCollection:l.eventModel=this._eventModel,i=new o(l),i.render().show()}}),render:function(){if(this._firstRender){if(v.hasCapability("execute-notable_event_action"))if(this._actions.length){var i=t.sortBy(c(this._actions),"label");this.setActions(i),this._loadingActions=!1}else{var n=l.getNotableEventsActions();n.done(function(e){var i=t.sortBy(c(e),"label");this.setActions(i),this._loadingActions=!1,this.render()}.bind(this))}else this._loadingActions=!1,this._insufficientPermissions=!0;this._firstRender=!1}return this.$el.html(s.prototype.template),this.$(".popdown-dialog-body").addClass("event-management-extensible-actions-popdown"),this.$(".popdown-dialog-body").removeClass("popdown-dialog-padded"),this.$(".popdown-dialog-body").append(d({_:t,availableActions:this._actions,loading:this._loadingActions,insufficientPermissions:this._insufficientPermissions},{variable:"vars"})),e("body").append(this.el),this},setActions:function(e){this.eventManagementStateModel.get("eventDeduplication")?e=t.filter(e,function(e){return e.is_group_compatible}):this._eventCollection&&this._eventCollection.length>1&&(e=t.filter(e,function(e){return e.is_bulk_compatible})),this._actions=e}});return p}.apply(t,n),!(void 0!==a&&(e.exports=a))},2411:function(e,t){e.exports='<% if (vars.availableActions.length > 0) { %>\n    <ul class="event-management-extensible-actions-menu-list">\n        <% vars._.each(vars.availableActions, function(action) { %>\n            <li>\n                <a class="event-management-extensible-action" data-action-name="<%- action.action_name %>" data-custom-action="<%- action.custom_action%>">\n                    <%- action.label %>\n                </a>\n            </li>\n        <% }); %>\n    </ul>\n<% } else if (vars.loading === true) { %>\n    <div class="alert alert-info">\n        <i class="icon-alert"></i>\n        <%- vars._(\'Fetching Actions\').t() %>\n    </div>\n<% } else if (vars.insufficientPermissions) { %>\n    <div class="alert alert-warning">\n        <i class="icon-alert"></i>\n        <%- vars._(\'Insufficient permissions\').t() %>\n    </div>\n<% } %>'},2412:function(e,t,i){var n=i(2413);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2413:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-extensible-actions-menu-list{list-style:none;margin:0;min-width:90px}.event-management-extensible-actions-menu-list li>a:hover{color:#3863a0;background:rgba(0,0,0,.05);background-color:rgba(0,0,0,.05);background-image:-webkit-gradient(linear,0 0,0 100%,from(rgba(0,0,0,.05)),to(rgba(0,0,0,.05)));background-image:-webkit-linear-gradient(top,rgba(0,0,0,.05),rgba(0,0,0,.05));background-image:linear-gradient(180deg,rgba(0,0,0,.05),rgba(0,0,0,.05));background-repeat:repeat-x}.event-management-extensible-actions-menu-list li>a{border-top:1px dotted rgba(0,0,0,.2);color:#1e93c6;padding:5px 10px;white-space:normal;display:block;text-decoration:none}.event-management-extensible-actions-menu-list li:first-child>a{border-top:none}.popdown-dialog-body.event-management-extensible-actions-popdown{max-height:350px;overflow-y:auto;width:200px}.popdown-dialog-body.event-management-extensible-actions-popdown .alert{margin:10px;padding-right:20px}",""])},2414:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone")],a=function(e,t,i){var n=t.template('<a class="btn btn-primary event-management-detail-panel-bulk-header-acknowledge-button"><%- vars._("Acknowledge").t() %></a>',null,{variable:"vars"}),a=i.View.extend({initialize:function(e){if(e=e||{},!e.clickCallback)throw"Must provide clickCallback to AcknowledgeButtonView";this.clickCallback=t.isFunction(e.clickCallback)?e.clickCallback:t.noop,i.View.prototype.initialize.apply(this,arguments)},className:"event-management-detail-panel-bulk-header-acknowledge-event-container",events:{click:function(e){e.preventDefault(),this.clickCallback()}},render:function(){var e=n({_:t},{variable:"vars"});return this.$el.html(e),this}});return a}.apply(t,n),!(void 0!==a&&(e.exports=a))},2415:function(e,t){e.exports='<div class="event-management-detail-panel-header">\n\t<div class="event-management-detail-panel-event-actions-left-container"></div>\n\t<div class="event-management-detail-panel-event-actions-right-container"></div>\n</div>\n<div class="event-management-detail-panel-body"></div>'},2416:function(e,t){e.exports='<div class="event-management-detail-panel-event-actions-left-container">\n</div>\n<div class="event-management-detail-panel-event-actions-right-container">\n\t<div class="event-management-detail-panel-event-actions-right-content">\n\t\t<div class="event-management-detail-panel-header-event-extensible-actions-link">\n\t\t\t<a><%- vars._("Actions").t() %><span class="caret"></span></a>\n\t\t</div>\n\t</div>\n\t<div class="event-management-detail-panel-header-close-panel-link">\n\t\t<i class="icon-x icon-large icon-no-underline"></i>\n\t</div>\n</div>\n'},2417:function(e,t,i){var n=i(2418);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2418:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-detail-panel-content{flex:1;min-width:0;display:flex;flex-direction:column}.event-management-detail-panel-header{min-height:38px;height:38px;border-bottom:1px solid #ddd;display:flex;justify-content:space-between;align-items:center;padding-left:20px;padding-right:20px}.event-management-detail-panel-event-actions-left-container,.event-management-detail-panel-event-actions-right-container{display:flex}.event-management-detail-panel-event-actions-right-content{display:flex;flex-wrap:wrap;margin-left:10px}.event-management-detail-panel-event-actions-right-content .dropdown-toggle.disabled{cursor:not-allowed!important;color:#999;text-decoration:initial}.event-management-detail-panel-event-actions-right-content .event-management-detail-panel-header-event-severity-link{color:#1e93c6;cursor:pointer;display:inline-block;margin-right:20px}.event-management-detail-panel-event-actions-right-content.disabled .event-management-detail-panel-header-event-severity-link{cursor:not-allowed}.event-management-detail-panel-event-actions-right-content .event-management-detail-panel-header-event-status-link{color:#1e93c6;cursor:pointer;display:inline-block;margin-right:20px}.event-management-detail-panel-event-actions-right-content .event-management-detail-panel-event-actions-link{margin-right:20px}.event-management-detail-panel-event-actions-right-content.disabled .event-management-detail-panel-header-event-status-link{cursor:not-allowed}.event-management-detail-panel-event-actions-right-content .event-management-detail-panel-header-event-assignee-link{color:#1e93c6;cursor:pointer;display:inline-block;margin-right:20px}.event-management-detail-panel-event-actions-right-content.disabled .event-management-detail-panel-header-event-assignee-link{cursor:not-allowed}.event-management-detail-panel-header-event-extensible-actions-link{color:#1e93c6;cursor:pointer;display:inline-block;padding-right:15px}.event-management-detail-panel-header-event-extensible-actions-link:hover{color:#3863a0}.event-management-detail-panel-header-close-panel-link{color:#1e93c6;cursor:pointer;display:inline-block}.event-management-detail-panel-body-header{display:flex;justify-content:space-between;align-items:center;padding-left:20px;flex-shrink:0;height:52px}.event-management-detail-panel-body-header-event-details{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:800px}.event-management-detail-panel-body-header-tooltip .tooltip-inner{max-width:800px}.event-management-detail-panel-body-content .nav-tabs{min-height:24px}.event-management-detail-panel-body-header-warnings{padding:0 0 5px 20px}.event-management-detail-panel-body-header-warnings .alert{margin-bottom:0}.event-management-detail-panel-event-title{font-size:18px;margin-right:5px}.event-management-detail-panel-event-timestamp{color:#878790;display:block}.event-management-detail-panel-body{flex:1;display:flex;flex-direction:column;min-height:0}.event-management-detail-panel-body .tab-content-scroll-wrapper{padding:20px}.event-management-detail-panel-body-message{color:#878790;text-align:center}.modal.group-event-acknowledge-modal,.modal.group-event-update-modal{width:570px}.group-event-acknowledge-modal .group-event-acknowledge-label{margin-bottom:20px}.group-event-acknowledge-control{margin-left:80px}.group-event-acknowledge-control>.control-label{display:inline-block;text-align:left;width:90px}.group-event-acknowledge-control>.controls{display:inline-block;margin-left:0}",""])},2419:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}var a,s,l=i(130),o=n(l);a=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),e,i("shim/splunk.util"),i("views/shared/controls/SyntheticSelectControl"),i("views/shared/controls/ControlGroup"),i("views/shared/Modal"),i("collections/shared/FlashMessages"),i("views/shared/FlashMessagesLegacy"),i(2254),i(473),i(902),i(2408),i(2401),i(2414),i(2420),i(2421)],s=function(e,t,i,n,a,s,l,r,d,c,v,h,p,u,m,g,f){var _=r.extend({moduleId:String(n.id),initialize:function(e){if(e=e||{},!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementDetailPanelBulkContentView";this.eventManagementStateModel=e.eventManagementStateModel,this.loadingMaskView=e.loadingMaskView,this.selectedEvents=e.selectedEvents||[],r.prototype.initialize.apply(this,arguments),this.readOnlyMode=this.options.readOnlyMode||!1,this.flashMessagesCollection=new d,this.children.flashMessage=new c({collection:this.flashMessagesCollection,escape:!1}),this.commentControl=new l({controlType:"Textarea",controlClass:"bulk-options-comments-textarea",required:!0,label:t("Comment").t()})},events:e.extend({},r.prototype.events,{"click .btn-primary":function(i){i.preventDefault();var n=this.commentControl.$(".bulk-options-comments-textarea textarea").val().trim();if(!n){var s=t("Comment cannot be empty.").t();return void this.flashMessagesCollection.add([{key:"emptyCommentWarning",type:"error",html:s}])}var l=(new Date).getTime();l/=1e3;for(var r=this.eventManagementStateModel.getEventIDField(),d=this.selectedEvents,c=[],v=d.length-1;v>=0;v--)c.push({event_id:d.at(v).get(r),user:a.getConfigValue("USERNAME"),comment:n,create_time:l,mod_time:l});var h=a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event_comment"].join("/")),p=e.ajax({url:h,headers:{"Content-Type":"application/json"},type:"POST",data:(0,o.default)(c)});this.hide(),this.remove(),this.loadingMaskView.show(t("Updating comments...").t()),p.always(function(){this.loadingMaskView.hide()}.bind(this)).error(function(e){console.log("post comment xhr error"),console.log(e);
var i=[t("Could not add comment.").t()];this._showErrorModal(i,e)}.bind(this))}}),render:function(){if(this.$el.html(r.TEMPLATE),this.$(r.HEADER_TITLE_SELECTOR).html(t("Add Comment").t()),this.$(r.BODY_SELECTOR).addClass("modal-body-scrolling"),this.$(r.BODY_SELECTOR).append(r.FORM_HORIZONTAL),this.$(r.BODY_FORM_SELECTOR).append(this.children.flashMessage.render().el),this.$(r.BODY_FORM_SELECTOR).append(this.commentControl.render().$el),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_CANCEL),this.$(r.FOOTER_SELECTOR).append(r.BUTTON_SAVE),this.selectedEvents.length>25){var e=t("Adding comment to more than 25 events could take a while to propagate the change through the system.").t();this.flashMessagesCollection.reset([{key:"addCommentWarning",type:"warning",html:e}])}return this}}),w=m.extend({render:function(){return m.prototype.render.apply(this,arguments),this.$(".event-management-detail-panel-body-header-event-activity-view-in-activity-link").hide(),this}}),b=i.View.extend({tagName:"div",className:"event-management-detail-panel-bulk-content",initialize:function(n){if(i.View.prototype.initialize.apply(this,arguments),n=n||{},!n.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementDetailPanelBulkContentView";this.eventManagementStateModel=n.eventManagementStateModel,this._phonyEventModel=new i.Model({severity:"",status:"",owner:""}),this._notableEventUrl=this.eventManagementStateModel.get("eventDeduplication")?a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event_group"].join("/")):a.make_url(["custom","SA-ITOA","event_management_interface","nobody","notable_event"].join("/")),this.eventActionDispatcher=t.extend({},i.Events),this._eventDeduplication=this.eventManagementStateModel.get("eventDeduplication");var s=v.confAccess.fetchStatusCollection(),l=v.confAccess.fetchSeverityCollection(),o=v.getOwners();this.getDetailsDfd=e.when(s,l,o),this.listenTo(this.eventActionDispatcher,"notableEventActions:actionTaken",this._updateHeaderActivity),this.listenTo(this._phonyEventModel,"change:severity",this._onSeverityChange),this.listenTo(this._phonyEventModel,"change:status",this._onStatusChange),this.listenTo(this._phonyEventModel,"change:owner",this._onOwnerChange)},events:{"click .event-management-detail-panel-bulk-add-comment":function(){var t=this._validateBulkEventSelection();if(t.length)return void this._showErrorModal(t);var i=new _({eventManagementStateModel:this.eventManagementStateModel,selectedEvents:this.getSelectedEvents(),loadingMaskView:this.loadingMaskView});e("body").append(i.render().el),i.show()},"click .event-management-detail-panel-bulk-close-panel-link":function(e){e.preventDefault(),this.$el.hide(),this.trigger("panelclosed")},"click .event-management-detail-panel-bulk-extensible-actions-link":function(t){t.preventDefault();var i=new u({eventCollection:this.getSelectedEvents(),eventActionDispatcher:this.eventActionDispatcher,eventManagementStateModel:this.eventManagementStateModel});i.render().show(e(t.currentTarget))}},render:function(){return this.$el.html(f),this._safeRemoveView(this.loadingMaskView),this.loadingMaskView=new p,e("body").append(this.loadingMaskView.render().$el),this._renderPanelHeader(),this._renderPanelBody(),this},_renderPanelBody:function(){var e=this._eventDeduplication?a.sprintf(t("%s Groups Selected").t(),this.eventManagementStateModel.get("selectedEvents").length):a.sprintf(t("%s Events Selected").t(),this.eventManagementStateModel.get("selectedEvents").length),i="<div>"+e+"</div>";this._safeRemoveView(this.EventManagementDetailPanelBulkHeaderActivityView);var n=this.getSelectedEvents().at(0).get("event_id");this.EventManagementDetailPanelBulkHeaderActivityView=new w({eventActionDispatcher:this.eventActionDispatcher,eventActionStatus:v.getEventActionStatus(n)}),this.$(".event-management-detail-panel-bulk-body").html('<div class="event-management-detail-panel-bulk-body-info-container"></div>'),this.$(".event-management-detail-panel-bulk-body-info-container").append(i),this.$(".event-management-detail-panel-bulk-body-info-container").append(this.EventManagementDetailPanelBulkHeaderActivityView.render().$el)},_renderPanelHeader:function(){this.$(".event-management-detail-panel-bulk-event-actions-left-container").html(""),this.$(".event-management-detail-panel-bulk-event-actions-right-content").html("");var e="<div>"+t("Loading...").t()+"</div>";this.$(".event-management-detail-panel-bulk-event-actions-right-content").append(e),this.getDetailsDfd.done(function(e,i,n){var a=this.getSelectedEvents(),l=e.map(function(e){return"1"===e.entry.content.get("end")&&this.eventManagementStateModel.set("endStatus",e.entry.get("name")),{label:t(e.entry.content.get("label")).t(),value:e.entry.get("name")}}.bind(this));this.eventManagementStateModel.get("endStatus")||this.eventManagementStateModel.set("endStatus","5");var o=a.pluck("status"),r=t.uniq(o);1===r.length?this._phonyEventModel.set("status",r[0],{silent:!0}):l.splice(0,0,{value:-1,label:t("Original Statuses").t()});var d=i.map(function(e){return{label:t(e.entry.content.get("label")).t(),value:e.entry.get("name")}}),c=a.pluck("severity"),v=t.uniq(c);1===v.length?this._phonyEventModel.set("severity",v[0],{silent:!0}):d.splice(0,0,{value:-1,label:t("Original Severities").t()});var h=n.map(function(e){return{label:e.text,value:e.id}}),p=a.pluck("owner"),u=t.uniq(p);1===u.length?this._phonyEventModel.set("owner",u[0],{silent:!0}):h.splice(0,0,{value:-1,label:t("Original Owners").t()}),this._safeRemoveView(this.severitySelectControl),this.severitySelectControl=new s({model:this._phonyEventModel,modelAttribute:"severity",items:d,className:"event-management-detail-panel-bulk-severity-link",popdownOptions:{attachDialogTo:"body"}}),this._safeRemoveView(this.statusSelectControl),this.statusSelectControl=new s({model:this._phonyEventModel,modelAttribute:"status",items:l,className:"event-management-detail-panel-bulk-status-link",popdownOptions:{attachDialogTo:"body"}}),this._safeRemoveView(this.assigneeSelectControl),this.assigneeSelectControl=new s({model:this._phonyEventModel,items:h,icon:"icon-user",modelAttribute:"owner",className:"event-management-detail-panel-bulk-assignee-link",popdownOptions:{attachDialogTo:"body"}});var m=a.filter(function(e){return 0===Number(e.get("status"))||1===Number(e.get("status"))});if(this._safeRemoveView(this.acknowledgeButtonView),m.length&&(this.acknowledgeButtonView=new g({clickCallback:this._onAcknowledge.bind(this)})),this.$(".event-management-detail-panel-bulk-event-actions-left-container").html(""),this.$(".event-management-detail-panel-bulk-event-actions-right-content").html(""),this.acknowledgeButtonView&&this.$(".event-management-detail-panel-bulk-event-actions-left-container").append(this.acknowledgeButtonView.render().$el),this.$(".event-management-detail-panel-bulk-event-actions-right-content").append(this.severitySelectControl.render().$el),this.$(".event-management-detail-panel-bulk-event-actions-right-content").append(this.statusSelectControl.render().$el),this.$(".event-management-detail-panel-bulk-event-actions-right-content").append(this.assigneeSelectControl.render().$el),!this._eventDeduplication){var f='<div class="event-management-detail-panel-bulk-add-comment"><a>'+t("Add Comment").t()+"</a></div>",_='<div class="event-management-detail-panel-bulk-extensible-actions-link"><a>'+t("Actions").t()+'<span class="caret"></span></a></div>',w='<div class="event-management-detail-panel-bulk-extensible-actions-status-container"></div>';this.$(".event-management-detail-panel-bulk-event-actions-right-content").append(f),this.$(".event-management-detail-panel-bulk-event-actions-right-content").append(_),this.$(".event-management-detail-panel-bulk-event-actions-right-content").append(w)}}.bind(this))},_updateHeaderActivity:function(e){var t=this.EventManagementDetailPanelBulkHeaderActivityView.addAction(e);v.setEventActionStatus(this.getSelectedEvents().at(0).get("event_id"),{activities:t})},getSelectedEvents:function(){return this.eventManagementStateModel.get("selectedEvents")},_validateBulkEventSelection:function(){var e=this.getSelectedEvents(),i=100,n=e.length,s=[];return n>i&&s.push(a.sprintf(t("You have selected %s events. Cannot edit more than %s events.").t(),n,i)),s},_updateEvents:function(e,t){v.cacheEventUpdate(e,t),this.trigger("eventupdated"),this.loadingMaskView.hide()},_onAcknowledge:function(){var i=this._validateBulkEventSelection();if(i.length)return this._showErrorModal(i),void this._phonyEventModel.clear();var n={status:"2",owner:a.getConfigValue("USERNAME")};this.loadingMaskView.show(t("Acknowledging events...").t());for(var s=this.eventManagementStateModel.getEventIDField(),l=this.getSelectedEvents(),r=[],d=0;d<l.length;d++)if(0===Number(l.at(d).get("status"))||1===Number(l.at(d).get("status"))){var c={};c.status=n.status,c.owner=n.owner,c[s]=l.at(d).get(s),c.group_id=l.at(d).get(s),r.push(c)}var v={data:r,action_type:"acknowledge",earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")},h=e.ajax({url:this._notableEventUrl,headers:{"Content-Type":"application/json"},type:"POST",data:(0,o.default)(v)});h.done(function(){this._phonyEventModel.set(n,{doPost:!1}),this._updateEvents(r,"status"),this._updateEvents(r,"owner")}.bind(this)).error(function(e){var i=[t("Could not acknowledge events.").t()];this._showErrorModal(i,e)}.bind(this)).always(function(){this.loadingMaskView.hide()}.bind(this))},_onSeverityChange:function(i,n,a){if(this._phonyEventModel.get("severity")&&this._phonyEventModel.get("severity")!==-1&&(!a||a.doPost!==!1)){var s=this._validateBulkEventSelection();if(s.length)return this._showErrorModal(s),void this._phonyEventModel.clear();this.loadingMaskView.show(t("Updating severity values...").t());for(var l=this.eventManagementStateModel.getEventIDField(),r=this.getSelectedEvents(),d=[],c=0;c<r.length;c++){var v={};v.severity=this._phonyEventModel.get("severity"),v[l]=r.at(c).get(l),v.group_id=r.at(c).get(l),d.push(v)}var h={data:d,earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")},p=e.ajax({url:this._notableEventUrl,headers:{"Content-Type":"application/json"},type:"POST",data:(0,o.default)(h)});p.done(function(){this._updateEvents(d,"severity")}.bind(this)).error(function(e){this.loadingMaskView.hide();var i=[t("Could not update severity.").t()];this._showErrorModal(i,e)}.bind(this))}},_onStatusChange:function(i,n,a){if(this._phonyEventModel.get("status")&&this._phonyEventModel.get("status")!==-1&&(!a||a.doPost!==!1)){var s=this._validateBulkEventSelection();if(s.length)return this._showErrorModal(s),void this._phonyEventModel.clear();var l=this._notableEventUrl;this.loadingMaskView.show(t("Updating status values...").t());for(var r=this.eventManagementStateModel.getEventIDField(),d=this.getSelectedEvents(),c=[],v=!1,h=d.length-1;h>=0;h--){var p={};p.status=this._phonyEventModel.get("status"),p[r]=d.at(h).get(r),p.group_id=d.at(h).get(r),this._phonyEventModel.get("status")===this.eventManagementStateModel.get("endStatus")&&n===this.eventManagementStateModel.get("endStatus")&&d.at(h).get("status")!==this.eventManagementStateModel.get("endStatus")&&this.eventManagementStateModel.get("eventDeduplication")&&(p.break_group_policy_id=d.at(h).get("policy_id"),v||(v=!0)),c.push(p)}v&&(l+="?break_multiple_groups=true");var u={data:c,earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")},m=e.ajax({url:l,headers:{"Content-Type":"application/json"},type:"POST",data:(0,o.default)(u)});m.done(function(){this._updateEvents(c,"status")}.bind(this)).error(function(e){this.loadingMaskView.hide();var i=[t("Could not update status.").t()];this._showErrorModal(i,e)}.bind(this))}},_onOwnerChange:function(i,n,a){if(this._phonyEventModel.get("owner")&&this._phonyEventModel.get("owner")!==-1&&(!a||a.doPost!==!1)){var s=this._validateBulkEventSelection();if(s.length)return this._showErrorModal(s),void this._phonyEventModel.clear();this.loadingMaskView.show(t("Updating owner values...").t());for(var l=this.eventManagementStateModel.getEventIDField(),r=this.getSelectedEvents(),d=[],c=r.length-1;c>=0;c--){var v={};v.owner=this._phonyEventModel.get("owner"),v[l]=r.at(c).get(l),v.group_id=r.at(c).get(l),d.push(v)}var h={data:d,earliest_time:this.eventManagementStateModel.get("earliest"),latest_time:this.eventManagementStateModel.get("latest")},p=e.ajax({url:this._notableEventUrl,headers:{"Content-Type":"application/json"},type:"POST",data:(0,o.default)(h)});p.done(function(){this._updateEvents(d,"owner")}.bind(this)).error(function(e){this.loadingMaskView.hide();var i=[t("Could not update owner.").t()];this._showErrorModal(i,e)}.bind(this))}},_showErrorModal:function(e,t){var i=new h({errorMessage:e.join(" "),htmlResponse:t});i.show()},remove:function(){t.each(this.children,function(e){e instanceof i.View&&e.remove()}),i.View.prototype.remove.apply(this,arguments)},_safeRemoveView:function(e){e instanceof i.View&&(e.options&&e.options.tooltip&&(e.options.tooltip=!1),e.remove())}});return b}.apply(t,a),!(void 0!==s&&(e.exports=s))},2420:function(e,t){e.exports='<div class="event-management-detail-panel-bulk-header">\n\t<div class="event-management-detail-panel-bulk-event-actions-left-container"></div>\n\t<div class="event-management-detail-panel-bulk-event-actions-right-container">\n\t\t<div class="event-management-detail-panel-bulk-event-actions-right-content"></div>\n\t\t<div class="event-management-detail-panel-bulk-close-panel-link"><i class="icon-x icon-large icon-no-underline"></i></div>\n\t</div>\n</div>\n<div class="event-management-detail-panel-bulk-body"></div>'},2421:function(e,t,i){var n=i(2422);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2422:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-detail-panel-bulk-content{flex:1;min-width:0;display:flex;flex-direction:column}.event-management-detail-panel-bulk-header{min-height:38px;height:38px;border-bottom:1px solid #ddd;display:flex;justify-content:space-between;align-items:center;padding-left:20px;padding-right:20px}.event-management-detail-panel-bulk-header .event-management-detail-panel-bulk-event-actions-left-container{display:flex}.event-management-detail-panel-bulk-header .event-management-detail-panel-bulk-event-actions-right-container{display:flex;margin-left:10px}.event-management-detail-panel-bulk-event-actions-right-content{display:flex;flex-wrap:wrap}.event-management-detail-panel-bulk-event-actions-right-content .event-management-detail-panel-bulk-add-comment,.event-management-detail-panel-bulk-event-actions-right-content .event-management-detail-panel-bulk-assignee-link,.event-management-detail-panel-bulk-event-actions-right-content .event-management-detail-panel-bulk-extensible-actions-status-container,.event-management-detail-panel-bulk-event-actions-right-content .event-management-detail-panel-bulk-severity-link,.event-management-detail-panel-bulk-event-actions-right-content .event-management-detail-panel-bulk-status-link{margin-right:20px}.event-management-detail-panel-bulk-content .event-management-detail-panel-bulk-body{padding:20px}.event-management-detail-panel-bulk-event-actions-right-container .event-management-detail-panel-bulk-close-panel-link{color:#1e93c6;cursor:pointer;display:inline-block}.event-management-detail-panel-bulk-body .event-management-detail-panel-bulk-body-info-container{display:flex;justify-content:space-between}.event-management-detail-panel-body-header-event-activity-details{margin-right:20px}",""])},2423:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2424),i(2425)],a=function(e,t,i,n){var a=t.template(n,null,{variable:"vars"}),s=i.View.extend({tagName:"div",className:"event-management-detail-panel-no-event-content",events:{"click .event-management-detail-panel-no-event-header-close-panel-link":function(e){e.preventDefault(),this.$el.hide(),this.trigger("panelclosed")}},render:function(){var e=a({_:t},{variable:"vars"});return this.$el.html(e),this}});return s}.apply(t,n),!(void 0!==a&&(e.exports=a))},2424:function(e,t){e.exports='<div class="event-management-detail-panel-no-event-header">\n\t<div class="event-management-detail-panel-no-event-header-close-panel-link">\n\t\t<i class="icon-x icon-large icon-no-underline"></i>\n\t</div>\n</div>\n<div class="event-management-detail-panel-no-event-body">\n\t<%- vars._(\'0 Events Selected\').t() %>\n</div>'},2425:function(e,t,i){var n=i(2426);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2426:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-detail-panel-no-event-content{flex:1;min-width:0;display:flex;flex-direction:column}.event-management-detail-panel-no-event-header{flex-direction:row-reverse;min-height:38px;height:38px;border-bottom:1px solid #ddd;display:flex;justify-content:space-between;align-items:center;padding-left:20px;padding-right:20px}.event-management-detail-panel-no-event-body{flex:1;display:flex;flex-direction:column;min-height:0;padding:20px}.event-management-detail-panel-no-event-header-close-panel-link{color:#1e93c6;cursor:pointer;display:inline-block}",""])},2427:function(e,t,i){var n=i(2428);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2428:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-detail-panel{flex:1;display:flex;min-width:60%}",""])},2429:function(e,t,i){var n=i(2430);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2430:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-detail-container{display:flex;width:100%}",""])},2431:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(458),i(463),i(1057),i(2254),i(2333),i(2349),i(2432),i(1333),i(2435),i(2436)],a=function(e,t,i,n,a,s,l,o,r,d,c,v){var h={},p=i.View.extend({tagName:"div",className:"event-management-overview-view",initialize:function(e){if(e=e||{},!e.eventManagementStateModel)throw"Must provide eventManagementStateModel to EventManagementOverviewView";return this.eventManagementStateModel=e.eventManagementStateModel,this._lazyHandleResize=t.debounce(this._handleResize,100).bind(this),this.MINIMUM_HEIGHT_TO_ENABLE_NEW_EVENTS_BUTTON=50,this._firstRender=!0,this.eventData=[],this.eventManagementOverviewTableEvent=t.extend({},i.Events),this.eventManagementNewEventsButtonView=new r({eventManagementDetailListView:this}),this.listenTo(this.eventManagementNewEventsButtonView,"fetcheventsclicked",function(){this._shouldNewEventsButtonBeVisible=!1}),this._paginationInFlight=!1,this.selectedEvent=e.selectedEvent||null,this.serviceXhr=l.getServiceKPITitleAndKeys(),this._shouldNewEventsButtonBeVisible=!1,this.listenTo(l,"search:start search:cancelled search:error search:fail",t.throttle(function(){this.$(".event-management-overview-infinite-scroll-message")&&this.$(".event-management-overview-infinite-scroll-message").text("")},1e3)),i.View.prototype.initialize.apply(this,arguments)},updateData:function(e,t){t=t||{},t.reset?this._updateTable(e):this.eventManagementStateModel.get("autoRefresh")?t.pagination?this._updateTable(e):this.eventManagementNewEventsButtonView.isVisible()||this._shouldNewEventsButtonBeVisible||this._updateTable(e):this._updateTable(e)},_updateTable:function(e){this.eventData=l.getNotableEvents(),this.eventManagementOverviewTableView&&this.eventManagementOverviewTableView.setState({tableData:e})},renderListBody:function(){this.eventManagementOverviewTableView&&this.eventManagementOverviewTableView.setState({tableData:this.eventData})},render:function(){return this._firstRender&&(this.$el.html(v),e(window).on("resize",this._lazyHandleResize),this.$(".event-management-overview-body-container").scroll(this._handleScroll.bind(this)),this._lazyHandleResize(),this._firstRender=!1,this.listenTo(l,"data",this.updateData)),this.serviceXhr.done(function(t){this._safeRemoveView(this.eventManagementResultsHeaderView),this.eventManagementResultsHeaderView=new o({eventManagementStateModel:this.eventManagementStateModel}),this.$el.append(this.eventManagementNewEventsButtonView.render().$el),this.$el.prepend(this.eventManagementResultsHeaderView.render().$el),this.$eventManagementOverviewTableMountNode=e("<div></div>"),this.$(".event-management-overview-body-container").prepend(this.$eventManagementOverviewTableMountNode),this.eventManagementOverviewTableView=a.render(n.createElement(d,{stateModel:this.eventManagementStateModel,serviceList:t,eventBus:this.eventManagementOverviewTableEvent}),this.$eventManagementOverviewTableMountNode.get(0)),this.listenTo(this.eventManagementOverviewTableEvent,"all",function(e){h.hasOwnProperty(e)&&(e=h[e]),this.trigger.apply(this,arguments)})}.bind(this)),this},_handleResize:function(){if(this.eventManagementOverviewTableView){var e=c.SEVERITY_COLUMN_WIDTH,t=c.EVENT_COUNT_COLUMN_WIDTH,i=this.eventManagementStateModel.get("eventDeduplication"),n=i?e+t:e,a=window.innerWidth-n;this.eventManagementOverviewTableView.setState({resizableTableWidth:a})}var s=500,l=this.$(".event-management-results-header").outerHeight(!0),o=this.$el.parent().innerHeight(),r=o-l;r>s?this.$(".event-management-overview-body-container").height(r):this.$(".event-management-overview-body-container").height(s),this._handleScroll()},_handleScroll:function(){var e,i,n=this.$(".event-management-overview-body-container");this.eventManagementStateModel.get("eventDeduplication")?(e=t("Loading more notable event groups...").t(),i=t("No more notable event groups.").t()):(e=t("Loading more notable events...").t(),i=t("No more notable events.").t()),n.scrollTop()>this.MINIMUM_HEIGHT_TO_ENABLE_NEW_EVENTS_BUTTON?this._shouldNewEventsButtonBeVisible=!0:this._shouldNewEventsButtonBeVisible=!1;var a=n.scrollTop()+n.height();if(this.$eventManagementOverviewTableMountNode){var s=a>this.$eventManagementOverviewTableMountNode.height()-300;if(s&&!this._paginationInFlight&&l.canPaginate())this.$(".event-management-overview-infinite-scroll-message").text(e),this._paginationInFlight=!0,this.listenToOnce(l,"data",function(){this._paginationInFlight=!1,this.$(".event-management-overview-infinite-scroll-message").text("")}),l.paginateNotableEvents();else if(!l.canPaginate()){var o=l.getTotalNotableEventCount()>0?i:"";this.$(".event-management-overview-infinite-scroll-message").text(o)}}},scrollSelectedEventPosition:function(){var e=this.eventManagementStateModel.getEventIDField(),t=this.$('.event-management-overview-row[data-eventid="'+this.selectedEvent[e]+'"]');if(t.length){var i=t.offset().top,n=this.$(".event-management-overview-body-container");n.scrollTop(i-210)}},stopListening:function(t){return"undefined"!=typeof t&&null!==t||e(window).off("resize",this._lazyHandleResize),i.View.prototype.stopListening.apply(this,arguments)},remove:function(){return a.unmountComponentAtNode(this.$eventManagementOverviewTableMountNode.get(0)),this._safeRemoveView(this.eventManagementResultsHeaderView),this._safeRemoveView(this.eventManagementNewEventsButtonView),this.stopListening(l),i.View.prototype.remove.apply(this,arguments)},_safeRemoveView:function(e){e&&e instanceof i.View&&(e.remove(),this.stopListening(e))}});return p}.apply(t,n),!(void 0!==a&&(e.exports=a))},2432:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,i,n,a,s,l,o,r){var d=void 0,c=void 0;return k.default.map(t,function(t){var l=t.value,v=e[a]+"-cell-"+l,h=void 0,p={color:"#333"},u={};if(u.className=z.default.overviewCell,"prominent"===o?p.borderColor=e.severity_color:p.borderColor="#DDDDDD","severity"===l)p=k.default.extend(p,{backgroundColor:e.severity_color}),h=f.default.createElement("div",null),u.className=u.className+" "+z.default.severity;else if("status"===l)h=B.default.getStatusLabel(e.status_label);else if("severity_label"===l)h=B.default.getSeverityLabel(e.severity_label);else if("policy_id"===l)h=e.policy_label;else if("_time"===l)h=r?R.default.convertEpochToTimezoneString(e[t.dedupValue[0]],!0)+" - "+R.default.convertEpochToTimezoneString(e[t.dedupValue[1]],!0):R.default.convertEpochToTimezoneString(e._time,!0);else if(k.default.includes(I.default.SERVICE_ID_FIELDS,l)){if(e[l]){var m=e[l].split(","),g="";for(d=0,c=m.length;d<c;++d)if(n.hasOwnProperty(m[d])){var _=n[m[d]].title;g.indexOf(_)===-1&&(g+=","+_)}","===g.charAt(0)&&(g=g.slice(1)),h=g}}else if(k.default.includes(I.default.KPI_ID_FIELDS,l))e[l]&&!function(){var t=e[l].split(" "),n="",a=function(){var e=t[d].split(":")[0],a=t[d].split(":")[1];t[d].indexOf(":")===-1&&(a=t[d]),i.forEach(function(t){if(t._key===e){var i=t.kpis;i.forEach(function(e){e._key===a&&n.indexOf(e.title)===-1&&(n+=","+e.title)})}})};for(d=0,c=t.length;d<c;++d)a();","===n.charAt(0)&&(n=n.slice(1)),h=n}();else if("owner"===l)h=e.owner,s&&s[e.owner]&&(h=s[e.owner]),h="Unassigned"===h?gettext("Unassigned"):h;else if("all_tickets"===l){var w=e[l];k.default.isArray(w)&&(w=w.join(", ")),h=w}else if("_duplicate_count"===l){var b=parseInt(e[l],10);b>100&&(b=gettext("100+")),h=f.default.createElement("div",{className:z.default.duplicateCount},b)}else if("_itsi_group_duration"===l){var M="";M=r?e._first_time:e._time;var y=R.default.convertEpochToDate(parseInt(M)),S=new Date;h=R.default.getDuration(y,S)}else h="itsi_is_group_broken"===l?r?"0"===e._itsi_is_group_broken?gettext("Yes"):gettext("No"):gettext("N/A"):"description"===l&&"None"===e[l]?gettext("None"):e[l];return u.style=p,u.key=v,f.default.createElement(x.default.Cell,u,h)})}function s(e){return e.show?f.default.createElement(A.default,{onRequestClose:e.onErrorClose,open:e.show,style:{width:"400px"}},f.default.createElement(A.default.Header,{title:gettext("Error"),onRequestClose:e.onErrorClose}),f.default.createElement(A.default.Body,null,f.default.createElement(V.default,{type:"error"},e.message)),f.default.createElement(A.default.Footer,null,f.default.createElement(D.default,{appearance:"primary",onClick:e.onErrorClose,label:gettext("OK")}))):null}Object.defineProperty(t,"__esModule",{value:!0});var l=i(479),o=n(l),r=i(482),d=n(r),c=i(483),v=n(c),h=i(484),p=n(h),u=i(485),m=n(u),g=i(458),f=n(g),_=i(490),w=n(_),b=i("require/backbone"),M=n(b),y=i(152),k=n(y),S=i(2277),x=n(S),T=i(505),V=n(T),E=i(494),D=n(E),C=i(511),A=n(C),$=i(129),R=n($),O=i(1333),I=n(O),N=i(2254),L=n(N),F=i(291),B=n(F),P=i(2433),z=n(P);i(591);var j={stateModel:w.default.instanceOf(M.default.Model).isRequired,serviceList:w.default.array,eventBus:w.default.object},q={serviceList:[],eventBus:k.default.extend(M.default.Events)};s.propTypes={show:w.default.bool.isRequired,onErrorClose:w.default.func.isRequired,message:w.default.string.isRequired};var U=function(e){function t(e){(0,d.default)(this,t);var i=(0,p.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));i._stateModel=e.stateModel;var n=i._stateModel.getColumnsToShow(),a=k.default.reject(n,function(e){return"severity"===e.value||"_duplicate_count"===e.value}),s=k.default.mapValues(k.default.keyBy(a,"value"),"width"),l=i._stateModel.get("eventDeduplication"),r=I.default.SEVERITY_COLUMN_WIDTH,c=I.default.EVENT_COUNT_COLUMN_WIDTH,v=l?r+c:r,h=window.innerWidth-v;return i.state={tableData:null,userNameMap:"",errorMessageOpen:!1,errorMessage:"",resizableTableWidth:h,columnWidths:s},i._serviceList=e.serviceList,i._eventBus=e.eventBus,i._serviceDict=k.default.fromPairs(k.default.map(i._serviceList,function(e){return[e._key,e]})),i._lazySaveColumnWidths=k.default.debounce(i._saveColumnWidths,100).bind(i),i.handleErrorMessageClose=i.handleErrorMessageClose.bind(i),i.handleResizeColumn=i.handleResizeColumn.bind(i),i}return(0,m.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){this._stateModel.on("change:viewingOption change:columnsShown",function(){this._stateModel.hasChanged("eventDeduplication")?this.updateData():this.updateData(L.default.getNotableEvents())},this),this.state.tableData instanceof Array||this.updateData(L.default.getNotableEvents())}},{key:"updateData",value:function(e){var t=this;L.default.getOwners().done(function(i){if(0===i.length)return void t.setState({errorMessageOpen:!0,errorMessage:gettext("Error fetching user info. Please try again")});var n=k.default.fromPairs(k.default.map(i,function(e){return[e.id,e.text]})),a=t._stateModel.getColumnsToShow(),s=k.default.reject(a,function(e){return"severity"===e.value||"_duplicate_count"===e.value}),l=k.default.mapValues(k.default.keyBy(s,"value"),"width");k.default.isEqual(k.default.keys(l),k.default.keys(t.state.columnWidths))?t.setState({tableData:e,userNameMap:n}):t.setState({tableData:e,userNameMap:n,columnWidths:l})}).fail(function(){console.log("error fetching owners"),t.setState({errorMessageOpen:!0,errorMessage:gettext("Error fetching user info. Please try again")})})}},{key:"handleErrorMessageClose",value:function(){this.setState({errorMessageOpen:!1,errorMessage:""})}},{key:"rowClickHandler",value:function(e){this._eventBus&&this._eventBus.trigger("eventselected",e)}},{key:"handleColumnSort",value:function(e,t){var i=t.sortKey,n=this.state.sortKey,a=n===i?this.state.sortDir:"none",s="asc"===a?"desc":"asc";this.setState({sortKey:i,sortDir:s})}},{key:"_generateColumnHeaderText",value:function(e){return k.default.includes(I.default.SERVICE_ID_FIELDS,e.value)?gettext("Services")+"("+e.value+")":k.default.includes(I.default.KPI_ID_FIELDS,e.value)?gettext("KPIs")+"("+e.value+")":"severity"===e.value?"":e.label}},{key:"_saveColumnWidths",value:function(){var e=this.state.columnWidths,t=this._stateModel.getColumnsToShow(),i=k.default.reject(t,function(e){return"severity"===e.value||"_duplicate_count"===e.value}),n=k.default.map(i,function(t){return t.width=e[t.value],t});this._stateModel.set("columnsShown",n)}},{key:"handleResizeColumn",value:function(e,t){var i=t.columnId,n=t.width,a=this.state,s=a.columnWidths,l=a.resizableTableWidth,o=this._stateModel.getColumnsToShow(),r=k.default.findIndex(o,{value:i}),d=o[r+1].value,c=.05,v=s[i]+s[d]-c,h=Math.min(Math.max(n/l,c),v);s[d]-=h-s[i],s[i]=h,this.setState({columnWidths:s}),this._lazySaveColumnWidths()}},{key:"render",value:function(){var e=this,t=this.state,i=t.tableData,n=t.userNameMap,l=t.resizableTableWidth,o=t.columnWidths,r=this._stateModel.getColumnsToShow(),d=this._stateModel.get("viewingOption"),c=L.default.getTimezoneId(),v=this._stateModel.getEventIDField(),h=this._stateModel.get("eventDeduplication"),p=L.default.getRBACFLag(),u=this._stateModel.get("isUserAdmin"),m=L.default.returnServices(),g=k.default.map(i,function(t){if(h&&p&&!u)if("string"==typeof t._group_service_ids){if(t._group_service_ids.indexOf(",")!==-1){var i=t._group_service_ids.split(","),s=k.default.intersection(i,m);if(0===s.length)return void e._stateModel.set("canViewAll",!1)}else if(m.indexOf(t._group_service_ids)===-1)return void e._stateModel.set("canViewAll",!1)}else if(t._group_service_ids instanceof Array){for(var l=!1,o=0;o<t._group_service_ids.length;o++){var g=t._group_service_ids[o];if(g.indexOf(",")!==-1){var _=g.split(","),w=k.default.intersection(_,m);if(w.length>0){l=!0;break}}else if(m.indexOf(g)!==-1){l=!0;break}}if(!l)return void e._stateModel.set("canViewAll",!1)}var b={};return"prominent"===d?(b.borderColor=t.severity_color,b.backgroundColor=t.severity_light_color):b.borderColor="#DDDDDD",f.default.createElement(x.default.Row,{className:z.default.row,style:b,key:t[v],onClick:e.rowClickHandler.bind(e,t)},a(t,r,e._serviceList,e._serviceDict,v,n,c,d,h))}),_=k.default.map(r,function(t,i){var n={};return n.key=t.value,n.columnId=t.value,"severity"===t.value?(n.width=I.default.SEVERITY_COLUMN_WIDTH,n.resizable=!1):"_duplicate_count"===t.value?(n.width=I.default.EVENT_COUNT_COLUMN_WIDTH,n.resizable=!1):(n.width=o[t.value]*l,i===r.length-1&&(n.resizable=!1)),f.default.createElement(x.default.HeadCell,n,e._generateColumnHeaderText(t));
});return f.default.createElement("div",null,f.default.createElement(s,{show:this.state.errorMessageOpen,message:this.state.errorMessage,onErrorClose:this.handleErrorMessageClose}),f.default.createElement(x.default,{className:z.default.table,onRequestResizeColumn:this.handleResizeColumn},f.default.createElement(x.default.Head,null,_),f.default.createElement(x.default.Body,{className:z.default.tbody},g)))}},{key:"componentWillUnmount",value:function(){L.default.off(null,null,this),this._stateModel.off(null,null,this)}}]),t}(g.Component);t.default=U,U.propTypes=j,U.defaultProps=q,e.exports=t.default},2433:function(e,t,i){var n=i(2434);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2434:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".table------dev---1JySG{width:100%}.table------dev---1JySG tbody{border:0 solid #ddd;border-top-width:1px}.table------dev---1JySG tr.row------dev---ZfpPs:hover{background-color:#e4e4e4!important}.table------dev---1JySG th.header------dev---1WYWf{text-align:left;padding-left:5px}.table------dev---1JySG td.overviewCell------dev---2O0tB{border:0 solid #ddd;border-bottom-width:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:10px 5px;cursor:pointer}.table------dev---1JySG td.overviewCell------dev---2O0tB.severity------dev---2FJMV{padding:0;max-width:12px;width:12px}.table------dev---1JySG td.overviewCell------dev---2O0tB.severity------dev---2FJMV div{width:12px}.table------dev---1JySG td{max-width:250px}.table------dev---1JySG .duplicateCount------dev---13_G4{border:1px solid #97999b;border-radius:10px;width:40px;text-align:center}",""]),t.locals={table:"table------dev---1JySG",row:"row------dev---ZfpPs",header:"header------dev---1WYWf",overviewCell:"overviewCell------dev---2O0tB",severity:"severity------dev---2FJMV",duplicateCount:"duplicateCount------dev---13_G4",prominent:"prominent------dev---1u58Y"}},2435:function(e,t){e.exports='<div class="event-management-overview-body-container">\n    <div class="event-management-overview-infinite-scroll-message"></div>\n</div>'},2436:function(e,t,i){var n=i(2437);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2437:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-overview-view{flex:1;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;min-width:0}.event-management-overview-body-container{overflow-y:scroll}.event-management-overview-infinite-scroll-message{text-align:center;font-size:16px;padding:15px;color:#888}",""])},2438:function(e,t,i){var n=i(2439);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2439:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-layout{overflow:hidden;display:flex;width:100%;min-height:500px}",""])},2440:function(e,t,i){var n,a;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("shim/splunk.util"),i("splunkjs/mvc"),i("splunkjs/mvc/timerangeview"),i(843),i(473),i(902),i(1042),i(1044),i(2254),i(2441)],a=function(e,t,i,n,a,s,l,o,r,d,c,v){var h=c.extend({initialize:function(e){if(e=e||{},!(e.stateModel instanceof i.Model))throw"State Model passed to EventManagementPageHeaderView must be a valid model!";if(this.setStateModel(e.stateModel),!(e.urlTokenModel instanceof i.Model))throw"urlTokenModel should be passed into EventManagementPageHeaderView";return this._urlTokenModel=e.urlTokenModel,this._firstRender=!0,c.prototype.initialize.apply(this,[{appPageHeaderModel:e.stateModel,displayTimeRangePicker:!1}])},setStateModel:function(e){e instanceof i.Model&&(this._stateModel instanceof i.Model&&this.stopListening(this._stateModel),this._stateModel=e,this.listenTo(this._stateModel,"change",this._updateUrl))},render:function(){return this._firstRender&&(c.prototype.render.apply(this,arguments),this._urlTokenModel.get("emid")&&this._disableSave(),this._firstRender=!1),this},events:function(){return e.extend({},c.prototype.events,{"click .btn-save-header":function(){this.loadingMask=new r,this.loadingMask.show(e("Saving...").t()),t("body").append('<div id="event-management-save-action-backdrop" class="modal-backdrop fade in">');var i=this._stateModel.save();if(i)i.done(function(){var e=a.Components.get("url");e.set("emid",this._stateModel.get("_key")),e.save(),this.loadingMask.hide(),t("#event-management-save-action-backdrop").remove(),this._disableSave()}.bind(this)),i.fail(function(i){this.loadingMask.hide();var n=new o({errorMessage:e("Could not Save.").t(),htmlResponse:i});n.show(),t("#event-management-save-action-backdrop").remove()}.bind(this));else{this.loadingMask.hide(),t("#event-management-save-action-backdrop").remove();var s=new o({errorMessage:n.sprintf(e("Validation failed. Details: %s").t(),this._stateModel.validationError)});s.show()}},"click .btn-saveas-header":function(e){e.preventDefault();var i=this._stateModel.clone();i.unset("_key");var n=new l({model:{savedPage:i},onHiddenRemove:!0});i.once("sync",function(){v.setStateModel(i),v.getStateModel().trigger("sync",v.getStateModel()),this._disableSave()}.bind(this)),t("body").append(n.render().el),n.show()}})},_updateUrl:function(){this._urlTokenModel instanceof i.Model&&this._urlTokenModel.save({emid:this._stateModel.id,earliest:this._stateModel.get("earliest"),latest:this._stateModel.get("latest_time")}),this._stateModel.hasChanged()&&this._enableSave()},_enableSave:function(){this.isSaveDisabled()&&(t(".btn-save-header",this.$el).removeClass("disabled"),t(".btn-save-header",this.$el).prop("disabled",!1))},_disableSave:function(){this.isSaveDisabled()||(t(".btn-save-header",this.$el).addClass("disabled"),t(".btn-save-header",this.$el).prop("disabled",!0))}});return h}.apply(t,n),!(void 0!==a&&(e.exports=a))},2441:function(e,t,i){var n=i(2442);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2442:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".application-page-header-right-container .splunk-timerange{display:inline-block;margin-right:10px}",""])},2443:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("util/time"),i("shim/splunk.util"),i("splunkjs/mvc/searchmanager"),i("collections/services/data/ui/Times"),i("views/shared/controls/SyntheticSelectControl"),i(849),i(1333),i(1332),i(2254),i(2334),i(2444),i("splunkjs/mvc/timelineview"),i("splunkjs/mvc/timerangeview"),i(2081),i(2448),i(2452),i(2453)],a=function(e,t,i,n,a,s,l,o,r,d,c,v,h,p,u,m,g,f,_){var w=t.template(_,null,{variable:"vars"}),b=i.View.extend({tagName:"div",className:"filter-link-container",initialize:function(e){if(i.View.prototype.initialize.apply(this,arguments),e=e||{},!(e.filterModel instanceof i.Model))throw"Must provide filterModel to FilterLinkView";if(this.filterModel=e.filterModel,!e.choicesFetch)throw"Must provide choicesFetch to FilterLinkView";this.choicesFetch=e.choicesFetch,this.sortByValue=e.sortByValue,this._firstRender=!0,this.children={},this.itemCollection=new i.Collection,this.listenTo(this.itemCollection,"add remove",function(){var e=[],t=[];this.itemCollection.each(function(i){e.push(i.get("value")),t.push(i.get("label"))});var i=a.fieldListToString(e),n=a.fieldListToString(t);this.filterModel.set({value:i,text:n}),this.render()})},render:function(){this._firstRender&&(this.$el.html('<a class="filter-link"><div class="filter-text"></div><div class="caret"></div></a><i class="icon-x-circle"></i>'),this._firstRender=!1);var e=t("All").t(),i=this.filterModel.get("label");this.renderText(i,e);var n=this._fetchLabelsFromValues(this.getValues());return n.done(function(e){var n=[];if(e.length)for(var a=0;a<e.length;a++){var s=e[a],l=this.itemCollection.findWhere({value:s.value});l||this.itemCollection.add(s,{silent:!0}),n.push(s.label)}else n.push(t("All").t());n=n.join(", "),this.renderText(i,n)}.bind(this)),this},renderText:function(e,t){var i=this.$(".filter-text");i&&i.length&&i.text(e+": "+t).tooltip("destroy").tooltip({container:"body",title:t})},events:{"click .filter-link":"renderDropdown","click .icon-x-circle":"removeFilter"},renderDropdown:function(e){e&&e.preventDefault(),this._safeRemoveView(this.children.filterSelectDropdownView),this.children.filterSelectDropdownView=new g({selectionCollection:this.itemCollection,choicesFetch:this.choicesFetch,choicesStatic:!0,sortByValue:this.sortByValue}),this.children.filterSelectDropdownView.render().show(this.$el)},removeFilter:function(e){e&&e.preventDefault(),this.filterModel.collection.remove(this.filterModel)},getValues:function(){return a.stringToFieldList(this.filterModel.get("value"))},_fetchLabelsFromValues:function(i){var n=e.Deferred(),a=[];return this.choicesFetch().done(function(e){if(e&&e.length)for(var s=0;s<i.length;s++)for(var l=i[s],o=0;o<e.length;o++){var r=e[o];if(r.id===l){a.push({value:l,label:r.text});break}}a=t.sortBy(a,function(e){return String(e.label).toLocaleLowerCase()}),n.resolve(a)}.bind(this)),n},_safeRemoveView:function(e){e instanceof i.View&&(this.stopListening(e),e.remove())},remove:function(){for(var e=t.keys(this.children),n=0;n<e.length;n++){var a=this.children[e[n]];this._safeRemoveView(a)}return i.View.prototype.remove.apply(this,arguments)}}),M=i.View.extend({tagName:"div",className:"event-management-timeline-header",initialize:function(e){if(e=e||{},!e.stateModel)throw"Must provide eventManagementStateModel to EventManagementTimelineView";this.setStateModel(e.stateModel),this._firstRender=!0,this.children={},this.children.filterLinks=[],this.resultCount=0,this.showTimeline=!1,this.listenTo(v,"data",this._updateResultCount),i.View.prototype.initialize.apply(this,arguments)},events:{"click .event-management-timeline-header-toggleTimeline-container":"_toggleTimeline"},_updateResultCount:function(){this.resultCount=v.getTotalNotableEventCount(),this._firstRender?this.render():this._renderEventCount()},setStateModel:function(e){this._stateModel instanceof c&&this.stopListening(this._stateModel),this._stateModel=e,this.listenTo(this._stateModel.get("filterCollection"),"remove",function(e){for(var t=0;t<this.children.filterLinks.length;t++){var i=this.children.filterLinks[t];if(i.filterModel===e){this._safeRemoveView(i),this.children.filterLinks.splice(t,1);break}}}),this.listenTo(this._stateModel.get("filterCollection"),"reset",t.debounce(this.render)),this.listenTo(this._stateModel,"change:eventDeduplication",function(){this.render();for(var e=0;e<this.children.filterLinks.length;e++){var i=this.children.filterLinks[e];!this._stateModel.get("eventDeduplication")&&t.contains(d.EVENT_MANAGEMENT_FILTER_CHOICES_FOR_GROUP_MODE,i.filterModel.id)&&(this.children.filterLinks.splice(e,1),this._safeRemoveView(i),this._stateModel.get("filterCollection").remove(i.filterModel.id),e--)}})},_toggleTimeline:function(){this.showTimeline?(this.$(".timeline-show").show(),this.$(".timeline-hide").hide()):(this.$(".timeline-show").hide(),this.$(".timeline-hide").show()),this.showTimeline=!this.showTimeline,this.$(".event-management-timeline-header-splunk-timeliner").toggle(),this.render(),e(window).trigger("resize")},render:function(){this._firstRender&&(this.$el.html(w({_:t},{variable:"vars"})),this.eventManagementTimelineSearchId=v.getSearchManagerId(),this.eventManagementTimeline=new u({id:"event-management-timeline",managerid:this.eventManagementTimelineSearchId,el:this.$(".event-management-timeline-header-splunk-timeliner")}),this.eventManagementTimeline.render(),this.eventManagementTimeline.on("change",function(){this._stateModel.set({earliest:this.eventManagementTimeline.val().earliest_time,latest:this.eventManagementTimeline.val().latest_time})}.bind(this)),this._firstRender=!1,this.showTimeline?(this.$(".timeline-show").hide(),this.$(".timeline-hide").show()):(this.$(".timeline-show").show(),this.$(".timeline-hide").hide()),this.$(".event-management-timeline-header-splunk-timeliner").toggle(this.showTimeline)),this._renderEventCount(),this._safeRemoveView(this.children.timeRangeView),this.children.timeRangeView=new m({className:"event-management-timeline-header-timepicker"}),this.children.timeRangeView.val({earliest_time:this._stateModel.get("earliest"),latest_time:this._stateModel.get("latest")});for(var e=0;e<this.children.filterLinks.length;e++)this._safeRemoveView(this.children.filterLinks[e]);this.children.filterLinks=[],this._stateModel.get("filterCollection").each(function(e){var t=e.get("id"),i=v.filterChoices[t];if(i){var n=!1;"status"!==t&&"severity"!==t||(n=!0);var a=new b({filterModel:e,choicesFetch:i,sortByValue:n});this.children.filterLinks.push(a)}}.bind(this)),this._safeRemoveView(this.children.addFilterView),this.children.addFilterView=new f({filterCollection:this._stateModel.get("filterCollection"),eventDeduplication:this._stateModel.get("eventDeduplication")}),this._safeRemoveView(this.children.searchFilterView),this._safeDestroyModel(this.proxyModel),this.proxyModel=new i.Model,this.proxyModel.state=new i.Model({search:this._stateModel.get("arbitrarySearch")}),this.proxyModel.rawSearch=new i.Model({rawSearch:this._stateModel.get("arbitrarySearch")}),this.children.searchFilterView=new r({model:this.proxyModel}),this.$(".event-management-timeline-header-filterpills-container").html(""),this.$(".event-management-timeline-header-filterpills-container").append(this.children.timeRangeView.render().$el),this.$(".event-management-timeline-header-timepicker .splBorder.btn").removeClass("btn");for(var n=0;n<this.children.filterLinks.length;n++){var a=this.children.filterLinks[n];this.$(".event-management-timeline-header-filterpills-container").append(a.render().$el)}return this.$(".event-management-timeline-header-filterpills-container").append(this.children.addFilterView.render().$el),this.$(".event-management-timeline-header-filterpills-container").append(this.children.searchFilterView.render().$el),this.children.searchFilterView.$(".search-query").attr("placeholder",t("search").t()),this.listenTo(this.children.timeRangeView,"change",function(e){e=e.earliest_time&&e.latest_time?e:this.children.timeRangeView.val(),this._stateModel.set({earliest:e.earliest_time,latest:e.latest_time})}),this.listenTo(this.children.addFilterView,"filterselected",function(e){var t=this._stateModel.get("filterCollection").add({id:e.value,label:e.label}),i=v.filterChoices[e.value],n=new b({filterModel:t,choicesFetch:i});this.children.filterLinks.push(n),this.children.addFilterView.$el.before(n.render().$el),n.renderDropdown()}),this.listenTo(this.proxyModel.rawSearch,"change:rawSearch",function(){this._stateModel.set({arbitrarySearch:this.proxyModel.rawSearch.get("rawSearch")})}),this},_renderEventCount:function(){var e=v.getTotalNotableEventCount(),i=1===e?a.sprintf(t("%s event").t(),e):a.sprintf(t("%s events").t(),e);this._stateModel.get("eventDeduplication")&&(i=1===e?a.sprintf(t("%s group").t(),e):a.sprintf(t("%s groups").t(),e)),this.$(".event-management-timeline-header-total-events-text").text(i)},remove:function(){t.each(this.children,function(e){if(e instanceof Array){var t;for(t=0;t<e.length;t++)e[t]instanceof i.View&&e[t].remove()}else e instanceof i.View&&e.remove()}),i.View.prototype.remove.apply(this,arguments)},_safeRemoveView:function(e){e instanceof i.View&&(this.stopListening(e),e.remove())},_safeDestroyModel:function(e){e instanceof i.Model&&(this.stopListening(e),e.destroy())}});return M}.apply(t,n),!(void 0!==a&&(e.exports=a))},2444:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2445),i(2446)],a=function(e,t,i,n,a){var s=t.template(n,null,{variable:"vars"}),l=i.View.extend({tagName:"div",className:"event-management-filter-pill-view",initialize:function(e){e=e||{},this.label=e.label,this.body=e.body},render:function(){return this.$el.html(s({label:this.label,body:this.body},{variable:"vars"})),this}});return l}.apply(t,n),!(void 0!==a&&(e.exports=a))},2445:function(e,t){e.exports='<% if (vars.label) { %>\n<span class="event-management-filter-pill-label"><%- vars.label %>: </span>\n<% } %>\n<span class="event-management-filter-pill-body"><%- vars.body %></span>'},2446:function(e,t,i){var n=i(2447);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2447:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-filter-pill-view{cursor:not-allowed;color:#999;background-color:#eee;font-size:12px;border-radius:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:185px;padding:4px 12px;display:inline-block;margin:5px}",""])},2448:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("views/shared/PopTart"),i(1333),i(2449),i(2450)],a=function(e,t,i,n,a,s){var l=t.template(s,null,{variable:"vars"}),o=a.EVENT_MANAGEMENT_FILTER_MAP,r=n.extend({initialize:function(e){if(e=e||{},!(e.availableFilters instanceof Array))throw"availableFilters must be passed to AvailableFiltersPopTartView";this._availableFilters=e.availableFilters,e.mode="menu",e.onHiddenRemove=!0,n.prototype.initialize.apply(this,arguments)},events:t.extend({},n.prototype.events,{"click a.filter-list-selector-available-filter-choice":function(t){var i=e(t.currentTarget),n=i.data("filter-value");this.trigger("filterselected",{value:n})}}),render:function(){return this.$el.html(n.prototype.template),this.$(".popdown-dialog-body").addClass("filter-selector-popdown"),this.$(".popdown-dialog-body").removeClass("popdown-dialog-padded"),this.$(".popdown-dialog-body").append(l({_:t,availableFilters:this._availableFilters},{variable:"vars"})),e("body").append(this.el),this}}),d=i.View.extend({initialize:function(e){if(e=e||{},!e.filterCollection)throw"Must provide filterCollection to EventManagementAddFilterView";this.filterCollection=e.filterCollection,this.eventDeduplication=e.eventDeduplication,this.children={}},className:"event-management-add-filter-link-container",events:{click:"_renderAvailableFilters"},render:function(){return this.$el.html('<a class="event-management-add-filter-link"><div class="event-management-add-filter-text">'+t("Add Filter").t()+'</div><div class="caret"></div></a>'),this},_getAvailableFilters:function(){return this.eventDeduplication?o:t.omit(o,a.EVENT_MANAGEMENT_FILTER_CHOICES_FOR_GROUP_MODE)},_renderAvailableFilters:function(e){e&&e.preventDefault();for(var i=[],n=t.keys(this._getAvailableFilters()),a=0;a<n.length;a++){var s=n[a],l=this.filterCollection.findWhere({id:s});l||i.push({value:s,label:o[s]})}this._safeRemoveView(this.children.availableFiltersMenuView),this.children.availableFiltersMenuView=new r({availableFilters:i}),this.children.availableFiltersMenuView.render().show(this.$el),this.listenTo(this.children.availableFiltersMenuView,"filterselected",function(e){this.trigger("filterselected",{value:e.value,label:o[e.value]})})},_safeRemoveView:function(e){e instanceof i.View&&(this.stopListening(e),e.remove())},remove:function(){for(var e=t.keys(this.children),n=0;n<e.length;n++){var a=this.children[e[n]];this._safeRemoveView(a)}return i.View.prototype.remove.apply(this,arguments)}});return d}.apply(t,n),!(void 0!==a&&(e.exports=a))},2449:function(e,t){e.exports='<% if (vars.availableFilters.length > 0) { %>\n    <ul class="filter-list-selector-available-filter-choices">\n        <% vars._.each(vars.availableFilters, function(filter) { %>\n            <li>\n                <a class="filter-list-selector-available-filter-choice" data-filter-value="<%- filter.value %>">\n                    <%- _(filter.label).t() %>\n                </a>\n            </li>\n        <% }); %>\n    </ul>\n<% } else { %>\n    <div class="alert alert-warning">\n        <i class="icon-alert"></i>\n        <%- vars._(\'No filters available\').t() %>\n    </div>\n<% } %>'},2450:function(e,t,i){var n=i(2451);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2451:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-add-filter-link .caret,.event-management-add-filter-link .event-management-add-filter-text{display:inline-block}.filter-list-selector-available-filter-choices{list-style:none;margin:0;min-width:90px}.filter-list-selector-available-filter-choices li>a:hover{color:#3863a0;background:rgba(0,0,0,.05);background-color:rgba(0,0,0,.05);background-image:-webkit-gradient(linear,0 0,0 100%,from(rgba(0,0,0,.05)),to(rgba(0,0,0,.05)));background-image:-webkit-linear-gradient(top,rgba(0,0,0,.05),rgba(0,0,0,.05));background-image:linear-gradient(180deg,rgba(0,0,0,.05),rgba(0,0,0,.05));background-repeat:repeat-x}.filter-list-selector-available-filter-choices li>a{border-top:1px dotted rgba(0,0,0,.2);color:#1e93c6;padding:5px 10px;white-space:normal;display:block;text-decoration:none}.filter-list-selector-available-filter-choices li:first-child>a{border-top:none}.popdown-dialog-body.filter-selector-popdown{max-height:350px;overflow-y:auto;width:200px}.popdown-dialog-body.filter-selector-popdown .alert{margin-left:10px;padding-bottom:0;margin-bottom:8px}",""])},2452:function(e,t){e.exports="<div>\n    <div class='event-management-timeline-header-info-tabs'>\n\n        <div class='event-management-timeline-header-total-events-text'></div>\n\n        <div class='event-management-timeline-header-filterpills-container'></div>\n\n        <div class='event-management-timeline-header-toggleTimeline-container'>\n            <a class=\"advanced-filter\">\n                <span class=\"timeline-show\"><%- vars._('Show Timeline ').t() %>\n                    <i class=\"icon-large icon-itsi-icon-doublearrow-down\"></i>\n                </span>\n                <span class=\"timeline-hide\"><%- vars._('Hide Timeline ').t() %>\n                    <i class=\"icon-large icon-itsi-icon-doublearrow-up\"></i>\n                </span>\n            </a>\n        </div>\n\n    </div>\n    <div id='event-management-timeline' class='event-management-timeline-header-splunk-timeliner'></div>\n</div>"},2453:function(e,t,i){var n=i(2454);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2454:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".event-management-timeline-header-info-tabs{display:flex;align-items:center;min-height:38px}.event-management-timeline-header-filterpills-container{flex:1;display:flex;flex-wrap:wrap;align-items:center}.event-management-timeline-header{min-height:38px;border-bottom:1px solid #ddd;padding-left:25px;padding-right:20px}.event-management-timeline-header-total-events-text{margin-right:20px;font-size:12px;font-weight:400;max-width:200px}.event-management-timeline-header-toggleTimeline-container{max-width:200px}.event-management-timeline-header-splunk-timeliner{min-height:38px}.event-management-timeline-header-filterpills-container .event-management-timeline-header-timepicker,.event-management-timeline-header-filterpills-container .filter-link-container{display:inline-block;margin-right:20px}.event-management-timeline-header-filterpills-container .filter-link-container .icon-x-circle{margin-left:6px;color:#999}.event-management-timeline-header-filterpills-container .filter-link-container .icon-x-circle:hover{cursor:pointer;color:#666}.event-management-timeline-header-filterpills-container .filter-link-container .filter-text{display:inline-block;max-width:150px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;vertical-align:bottom}.event-management-timeline-header-filterpills-container .filter-link-container .caret{display:inline-block}.event-management-timeline-header-filterpills-container .search-query-control{margin-bottom:0}.event-management-timeline-header-filterpills-container .search-query{width:250px;padding-right:20px}.event-management-timeline-header-filterpills-container .search-query-clear{position:relative;right:20px;top:1px;color:#999}.event-management-timeline-header-filterpills-container .search-query-clear:hover{color:#666}.event-management-timeline-header-filterpills-container .event-management-add-filter-link-container{margin-right:20px}",""])},2455:function(e,t){e.exports='<div class="itsi-event-management-container">\n    <div class="notable-event-review-permissions-message-container hide">\n        <div class="alert alert-warning">\n            <button type="button" class="close" data-dismiss="warning" aria-hidden="true">&times;</button>\n            <i class="icon-alert"></i>\n            <span class="alert-message"></span>\n        </div>\n    </div>\n</div>'},2456:function(e,t,i){var n=i(2457);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2457:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".itsi-event-management-container{background-color:#fff}.notable-event-review-permissions-message-container{position:absolute;z-index:100;background-color:#fcf3d7;border:1px solid #f2c33c;top:120px;left:15%;right:15%;border-radius:4px;padding-left:15px;padding-top:5px;width:60%;margin:auto}.notable-event-review-permissions-message-container .alert-warning{margin-bottom:0;padding-bottom:15px}",""])},2458:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(970),i(473),i(2254),i(2459),i(2467),i(2468),i("shim/bootstrap.tooltip")],a=function(e,t,i,n,a,s,l,o){var r=t.template(o,{_:t},{variable:"vars"}),d=i.View.extend({tagName:"div",className:"state-selector-sidebar-view-container state-selector-view-collapsed",initialize:function(e){if(e=e||{},this._stateCollection=new e.Collection,!(this._stateCollection instanceof i.Collection))throw"Sidebar Selector Sidebar View requires a Backbone Collection constructor to function properly";if(!t.isFunction(e.changeStateFunc))throw"Must pass changeStateFunc to StateSelectorSidebarView";this._changeStateModel=e.changeStateFunc,this._selectedId=e.selectedId,this._children=[],this._count=20,this._offset=0,this._firstRender=!0},_fetchStateModels:function(){this._stateCollection.fetch({data:{count:this._count,offset:this._offset},success:this.renderStateModelSelectors.bind(this)})},events:{"click .state-selector-sidebar-view-toggle":"toggleStateSidebarShown","click .state-selector-sidebar-view-show-more":function(){this._fetchStateModels()},"click .state-selector-sidebar-view-add":function(e){e.preventDefault();var i=t.find(this._children,function(e){if(e.isUnsaved())return!0});if(i||!s.getStateModel().id){var n=new a({errorMessage:t("You have an unsaved view currently, please save before creating a new view.").t()});return void n.show()}var l=new this._stateCollection.model({eventDeduplication:!0});this._updateSelectedStateModel(l),this.renderStateModelSelectors([l])}},toggleStateSidebarShown:function(){this.$(".state-selector-sidebar-view-toggle").tooltip("destroy"),this.$el.hasClass("state-selector-view-collapsed")?(this.$el.addClass("state-selector-view-expanded"),this.$el.removeClass("state-selector-view-collapsed"),this.$(".state-selector-sidebar-view-toggle").tooltip({title:t("Hide Alternate Views").t(),container:"body"}),e(document).on("click.sidebarStateSelector",function(t){e(t.target).closest(".state-selector-sidebar-view-container").length||e(t.target).closest(".itsi-poptart-menu-popdown").length||e(t.target).closest(".modal").length||this.toggleStateSidebarShown()}.bind(this))):(this.$el.addClass("state-selector-view-collapsed"),this.$el.removeClass("state-selector-view-expanded"),this.$(".state-selector-sidebar-view-toggle").tooltip({title:t("Show Alternate Views").t(),container:"body"}),e(document).off("click.sidebarStateSelector"))},_removeChildren:function(){t.each(this._children,function(e){this.stopListening(e),e.remove()}.bind(this)),this._children=[]},handleResize:function(){var t=e(".header"),i=t.height()||"0";"none"===t.css("display")&&(i="0"),this.$el.css("top",i)},render:function(){return this._firstRender&&(e(window).on("resize.sidebarStateSelector",this.handleResize.bind(this)),this.handleResize(),this._firstRender=!1),this._removeChildren(),this._offset=0,this.$el.html(r),this.$(".state-selector-sidebar-view-toggle").tooltip({title:t("Show Alternate Views").t(),container:"body"}),this._selectedId||this.renderStateModelSelectors([new this._stateCollection.model]),this._fetchStateModels(),this},_updateSelectedStateModel:function(e,i){if(e.id&&e.id===this._selectedId){var a=new n({title:t("Revert Changes").t(),message:t("Reloading the currently selected view will revert unsaved changes, do you wish to continue?").t(),discardButtonLabel:!1});return a.on("confirm",function(){this._selectedId=!1,this._updateSelectedStateModel(e,i)}.bind(this)),void a.show()}t.each(this._children,function(e){e.deselect()}),this._changeStateModel(e),i&&i.select(),this._selectedId=e.id,this.toggleStateSidebarShown()},_deleteStateModel:function(e,i){if(this._selectedId===e.id){var l=new a({errorMessage:t("You cannot delete the currently selected view").t()});return void l.show()}var o=new n({title:t("Delete View").t(),message:t("Are you sure you wish to delete the view?").t(),confirmButtonLabel:t("Delete View").t(),discardButtonLabel:!1});o.on("confirm",function(){this._selectedId===e.id&&s.getStateModel().unset("_key"),e.destroy(),i.remove(),this._children=t.filter(this._children,function(e){return e!==i})}.bind(this)),o.show()},renderStateModelSelectors:function(e){var n=!1;e instanceof i.Collection&&(n=!0,e=e.models);var a=this.$(".state-selector-sidebar-view-items-container");t.each(e,function(e){var t=new l({stateModel:e});this.listenTo(t,"state-model:selected",this._updateSelectedStateModel),this.listenTo(t,"state-model:delete",this._deleteStateModel),a.append(t.render().el),e.id===this._selectedId&&t.select(),this._children.push(t)}.bind(this)),n&&(e.length<this._count&&this.$(".state-selector-sidebar-view-show-more").hide(),this._offset+=e.length)},remove:function(){return this._removeChildren(),e(window).off("resize.sidebarStateSelector"),e(document).off("click.sidebarStateSelector"),i.View.prototype.remove.apply(this,arguments)}});return d}.apply(t,n),!(void 0!==a&&(e.exports=a))},2459:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i(2460),i(2459),i(2464),i(2465),i("shim/bootstrap.tooltip")],a=function(e,t,i,n,a,s){var l=t.template(s,null,{variable:"vars"}),a=i.View.extend({tagName:"div",className:"state-model-selector-view",initialize:function(e){if(e=e||{},this._stateModel=e.stateModel,!(this._stateModel instanceof i.Model))throw"StateSelectorSidebarView expects to receive a fetched Backbone.Model"},events:{"click .state-model-selector-view-options":function(e){e.stopPropagation(),e.preventDefault();var i=new n({actionsArray:[{label:t("Delete View").t(),actionFunc:function(){this.trigger("state-model:delete",this._stateModel,this)}.bind(this)}]});i.render().show(this.$(".state-model-selector-view-options div")),this.$el.addClass("state-model-selector-view-keep-options-shown"),i.once("hidden",function(){this.$el.removeClass("state-model-selector-view-keep-options-shown")}.bind(this))},"click .state-model-selector-view-select":function(){this.trigger("state-model:selected",this._stateModel,this)}},render:function(){return this.$el.html(l({model:this._stateModel,_:t})),this},isUnsaved:function(){return this._stateModel.isNew()},select:function(){this.$el.addClass("state-model-selected")},deselect:function(){this.$el.removeClass("state-model-selected")}});return a}.apply(t,n),!(void 0!==a&&(e.exports=a))},2460:function(e,t,i){var n,a;n=[i("shim/jquery"),i("require/underscore"),i("require/backbone"),i("shim/splunk.util"),i("views/shared/PopTart"),i(2461),i(2462)],a=function(e,t,i,n,a,s,l){var o=t.template(s,null,{variable:"vars"}),r=a.extend({initialize:function(e){return e=e||{},e.mode="menu",e.onHiddenRemove=!0,this._actionsArray=e.actionsArray,this._firstRender=!0,a.prototype.initialize.apply(this,arguments)},events:t.extend({},a.prototype.events,{"click a.itsi-poptart-menu-action":function(i){var n=e(i.currentTarget),a=n.data("action-name"),s=t.findWhere(this._actionsArray,{label:a});s.actionFunc()}}),render:function(){return this.$el.html(a.prototype.template),
this.$(".popdown-dialog-body").addClass("itsi-poptart-menu-popdown"),this.$(".popdown-dialog-body").removeClass("popdown-dialog-padded"),this.$(".popdown-dialog-body").append(o({_:t,availableActions:this._actionsArray},{variable:"vars"})),e("body").append(this.el),this}});return r}.apply(t,n),!(void 0!==a&&(e.exports=a))},2461:function(e,t){e.exports='<ul class="itsi-poptart-menu-list">\n    <% vars._.each(vars.availableActions, function(action) { %>\n        <li>\n            <a class="itsi-poptart-menu-action" data-action-name="<%- action.label %>">\n                <%- action.label %>\n            </a>\n        </li>\n    <% }); %>\n</ul>\n'},2462:function(e,t,i){var n=i(2463);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2463:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".itsi-poptart-menu-list{list-style:none;margin:0;min-width:90px}.itsi-poptart-menu-list li>a:hover{color:#3863a0;background:rgba(0,0,0,.05);background-color:rgba(0,0,0,.05);background-image:-webkit-gradient(linear,0 0,0 100%,from(rgba(0,0,0,.05)),to(rgba(0,0,0,.05)));background-image:-webkit-linear-gradient(top,rgba(0,0,0,.05),rgba(0,0,0,.05));background-image:linear-gradient(180deg,rgba(0,0,0,.05),rgba(0,0,0,.05));background-repeat:repeat-x}.itsi-poptart-menu-list li>a{border-top:1px dotted rgba(0,0,0,.2);color:#1e93c6;padding:5px 10px;white-space:normal;display:block;text-decoration:none}.itsi-poptart-menu-list li:first-child>a{border-top:none}.popdown-dialog-body.itsi-poptart-menu-popdown{max-height:350px;overflow-y:auto;width:200px}",""])},2464:function(e,t){e.exports="<% if (vars.model.get('title')) { %>\n    <div class=\"state-model-selector-view-select\" <%= vars.model.get('title').length > 35 ? 'title=\"' + vars._.escape(vars.model.get('title')) + '\"' : '' %>>\n        <%- vars.model.get('title') %>\n    </div>\n<% } else { %>\n    <div class=\"state-model-selector-view-select\"><i><%- vars._('Unsaved View').t() %></i></div>\n<% } %>\n<div class=\"state-model-selector-view-options\"><div>...</div></div>"},2465:function(e,t,i){var n=i(2466);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2466:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".state-model-selector-view{font-size:12px;display:flex;justify-content:space-between;min-height:0;width:240px;line-height:36px}.state-model-selector-view-select{width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;cursor:pointer;padding-left:20px}.state-model-selector-view.state-model-selected,.state-model-selector-view.state-model-selected:hover{background-color:#1e93c5;color:#fff}.state-model-selector-view:hover{background-color:#e4e4e4}.state-model-selector-view .state-model-selector-view-options{font-weight:bolder;visibility:hidden;padding-right:20px;padding-left:10px;cursor:pointer}.state-model-selector-view:hover .state-model-selector-view-options{font-weight:bolder;visibility:visible;color:#1e93c6}.state-model-selector-view-keep-options-shown.state-model-selector-view .state-model-selector-view-options{visibility:visible;color:#1e93c6}.state-model-selected.state-model-selector-view-keep-options-shown.state-model-selector-view .state-model-selector-view-options,.state-model-selected.state-model-selector-view:hover .state-model-selector-view-options{color:#fff}",""])},2467:function(e,t){e.exports='<div class="state-selector-sidebar-view-content">\n    <div class="state-selector-sidebar-view-header">\n        <div>\n            <%- vars._(\'Saved Views\').t() %>\n        </div>\n        <div class="state-selector-sidebar-view-add">\n            <i class="icon-plus icon-large"></i>\n        </div>\n    </div>\n    <div class="state-selector-sidebar-view-body-container">\n      <div class="state-selector-sidebar-view-items-container">\n      </div>\n      <div class="state-selector-sidebar-view-show-more">\n          <a>\n              <%- vars._(\'Fetch More\').t() %>\n          </a>\n      </div>\n    </div>\n    <div class="state-selector-sidebar-view-lister-link">\n        <a href="event_management_state_lister">\n            <%- vars._(\'Full Lister Page\').t() %>\n        </a>\n    </div>\n</div>\n<div class="state-selector-sidebar-view-toggle">\n    <i class="icon-chevron-right"></i>\n    <i class="icon-chevron-left"></i>\n</div>\n'},2468:function(e,t,i){var n=i(2469);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},2469:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".state-selector-sidebar-view-container{position:fixed;top:0;bottom:0;left:-240px;width:240px;background:#eee;border-right:1px solid #ccc;box-shadow:0 0 12px rgba(0,0,0,.3);z-index:1000;transition:left .2s ease-in}.state-selector-sidebar-view-container.state-selector-view-expanded{left:0}.state-selector-sidebar-view-toggle{position:absolute;top:2px;right:-22px;padding:12px 0;width:21px;text-align:center;cursor:pointer;background:#eee;border:1px solid #ccc;border-radius:3px;border-left:none;border-top-left-radius:0;border-bottom-left-radius:0;box-shadow:4px 0 4px -3px rgba(0,0,0,.3)}.state-selector-view-collapsed .state-selector-sidebar-view-toggle .icon-chevron-left{display:none}.state-selector-sidebar-view-content{min-width:240px}.state-selector-view-collapsed .state-selector-sidebar-view-content{display:none}.state-selector-view-expanded .state-selector-sidebar-view-content{display:flex;flex-direction:column;height:100%}.state-selector-view-expanded .state-selector-sidebar-view-toggle .icon-chevron-right{display:none}.state-selector-sidebar-view-body-container{overflow-y:scroll;overflow-x:hidden;margin-bottom:37px}.state-selector-sidebar-view-header{display:flex;min-height:46px;width:210px;justify-content:space-between;padding-left:20px;font-size:14px;height:46px;line-height:46px}.state-selector-sidebar-view-add{color:#1e93c6;font-weight:bolder;cursor:pointer;padding:0 10px}.state-selector-sidebar-view-show-more{cursor:pointer;padding:10px 0 10px 20px}.state-selector-view-collapsed .state-selector-sidebar-view-lister-link{display:none}.state-selector-sidebar-view-lister-link{position:absolute;bottom:0;text-align:center;width:100%;height:36px;line-height:36px;border-top:1px solid #ccc}",""])}});