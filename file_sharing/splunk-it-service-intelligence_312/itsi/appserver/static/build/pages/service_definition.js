webpackJsonp([34],{0:function(e,t,i){var n,r;i.p=function(){function e(){for(var e,i,n="",r=0,s=arguments.length;r<s;r++)e=arguments[r].toString(),i=e.length,i>1&&"/"==e.charAt(i-1)&&(e=e.substring(0,i-1)),n+="/"!=e.charAt(0)?"/"+e:e;if("/"!=n){var o=n.split("/"),a=o[1];if("static"==a||"modules"==a){var c=n.substring(a.length+2,n.length);n="/"+a,window.$C.BUILD_NUMBER&&(n+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(n+="."+window.$C.BUILD_PUSH_NUMBER),"app"==o[2]&&(n+=":"+t("APP_BUILD",0)),n+="/"+c}}var l=t("MRSPARKLE_ROOT_PATH","/"),d=t("DJANGO_ROOT_PATH",""),p=t("LOCALE","en-US"),h="";return h=d&&n.substring(0,d.length)===d?n.replace(d,d+"/"+p.toLowerCase()):"/"+p+n,""==l||"/"==l?h:l+h}function t(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return e("/static/app/itsi/build/pages")+"/"}(),n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("contrib/jquery-ui-1.10.4"),i("shim/bootstrap.tooltip"),i("shim/splunk.util"),i(4),i(129),i(232),i(473),i(2866)],r=function(e,t,i,n,r,s,o,a,c,l,d){var p='<div class="service-definition-body"></div>';t("#app-main-layout").html(p);var h=function(t){var i=new l({errorMessage:e("Could not fetch base search.").t(),htmlResponse:t});i.show()},v=null,u=function(e){d.loadView(e,function(e){f(e)}.bind(this))},f=function(t){new t({serviceBaseModel:v}),o(e("Service Definition").t())},w=null,b=s.getHash();if(b){b=b.slice(1);var y=b.split("/");y.length>=2&&(w=y[0])}if(e.isNull(w)){var m=a.isUserCapable("service","write");m.done(function(e){if(!e.hasOwnProperty("is_capable"))throw h(""),"Could not fetch capabilities. is_capable schema may have changed";var t=e.is_capable;u(!t)}.bind(this)).fail(h)}else v=new c({_key:w}),v.fetch().done(function(){u(!v.canWrite())}.bind(this))}.apply(t,n),!(void 0!==r&&(e.exports=r))},2866:function(e,t,i){var n,r;n=[i(2867)],r=function(e){var t=function(t,i){if(!i)throw"ServiceDefinitionViewLoader expects a callback function";i(e)};return{loadView:t}}.apply(t,n),!(void 0!==r&&(e.exports=r))},2867:function(e,t,i){var n,r;n=[i("require/underscore"),i(2868),i("shim/jquery"),i("require/backbone"),i("routers/Base"),i("shim/splunk.util"),i("splunkjs/mvc/utils"),i("uri/route"),i(2358),i(232),i(1708),i(2964),i(2965),i(2966),i(2967),i(473),i(2985)],r=function(e,t,i,n,r,s,o,a,c,l,d,p,h,v,u,f,w){var b=p.extend({ServiceView:w,ServiceDefinitionConfigurationLayoutHeaderView:v,initialize:function(t){t=t||{};var i=t&&t.serviceBaseModel&&t.serviceBaseModel.canWrite();i||(this.ServiceView=u,t.configurationLayoutViewOptions={readOnly:!0,headerViewOptions:{isReadOnly:!0,clickToEdit:!1},dockedFooterViewOptions:{isReadOnly:!0,checkForFirstTimeSave:!1}}),this.sdDispatcher=e.extend({},n.Events),this.listenTo(this.sdDispatcher,"unsetBaseServiceTemplateId",this._unsetBaseServiceTemplate),p.prototype.initialize.apply(this,arguments),this.handleHash()},_unsetBaseServiceTemplate:function(t){t.get("base_service_template_id")&&(t.unset("base_service_template_id"),t.unset("last_synced_timestamp")),e.each(t.get("kpis").models,function(e){e.get("base_service_template_id")&&e.unset("base_service_template_id")}.bind(this))},handleHash:function(){var t=s.getHash();if(!t)return void this._initial();t=t.slice(1);var i,n,r,o=t.split("/");if(o.length>=2)switch(i=o[0],n=o[1],o.length>=3&&(r=o[2]),n){case"info":this._info(i);break;case"kpi":this._kpi(i,r);break;case"dependency":this._dependency(i,r);break;case"settings":this._settings(i);break;default:var a=new f({errorMessage:e("Could not load the requested service.").t()});a.show()}},_initial:function(){var e=this.setServiceId("new");e.done(function(){this.serviceDefinitionView.showEntitiesTab()}.bind(this))},_info:function(e){var t=this.setServiceId(e);t.done(function(){this.serviceDefinitionView.showEntitiesTab()}.bind(this))},_settings:function(e){var t=this.setServiceId(e);t.done(function(){this.serviceDefinitionView.showSettingsTab()}.bind(this))},_kpi:function(e,t){var i=this.setServiceId(e);i.done(function(){this.serviceDefinitionView.showKPITab(t)}.bind(this))},_dependency:function(e,t){var i=this.setServiceId(e);i.done(function(){this.serviceDefinitionView.showDependencyTab(t)}.bind(this))},tabActivated:function(e){var t=s.make_full_url(["app",this.model.application.has("app")?this.model.application.get("app"):"itsi",this.model.application.has("page")?this.model.application.get("page"):"service_definition"].join("/"));t+="#",t+=this.serviceDefinitionView.getUrl(e),this.navigate(t,{trigger:!1,replace:!0})},setServiceId:function(e){var t,n=i.Deferred();return this.serviceId===e?(n.resolve(),n):(this.serviceId=e,this.serviceDefinitionView?n.resolve():(t="new"===this.serviceId?this._createServiceDefinitionView(new l):this._createServiceDefinitionView(this.cachedServiceBaseModel),t.done(function(){n.resolve()})),n)},onWizardExit:function(){var e=o.getPageInfo(),t=a.page(e.root,e.locale,e.app,"services_lister");o.redirect(t,!1)},_createAndRenderView:function(n){var r='<span class="first-time-save-message">'+s.sprintf(e("Do you want to enable '%s'?").t(),e.escape(n.get("title")))+"<br><br>"+e("Enabling the service will start running the KPI searches.").t()+"</span>";this.layoutView=new h(t({el:i(".service-definition-body"),model:n,ContentView:this.ServiceView,HeaderView:this.ServiceDefinitionConfigurationLayoutHeaderView,headerViewOptions:{serviceTemplate:this.serviceTemplate},dockedFooterViewOptions:{checkForFirstTimeSave:!0,firstTimeSaveConfirmationMessage:r},contentViewOptions:{serviceTemplate:this.serviceTemplate,sdDispatcher:this.sdDispatcher}},this.configurationLayoutViewOptions)),this.serviceDefinitionView=this.layoutView.getContentView(),this.listenTo(this.serviceDefinitionView,"tabactivated",this.tabActivated),this.listenTo(this.serviceDefinitionView,"kpiselected",function(){this.tabActivated("kpi")}),this.layoutView.render()},_createServiceDefinitionView:function(e){var t=i.Deferred(),n=e.get("base_service_template_id");return n?(this.serviceTemplate=new d({_key:n}),this.serviceTemplate.fetch().done(function(){this._createAndRenderView(e),t.resolve()}.bind(this))):(this._createAndRenderView(e),t.resolve()),t}});return b}.apply(t,n),!(void 0!==r&&(e.exports=r))},2868:function(e,t,i){var n=i(2869),r=i(2954),s=r(function(e,t,i){n(e,t,i)});e.exports=s},2869:function(e,t,i){function n(e,t,i,p,h){e!==t&&o(t,function(o,l){if(c(o))h||(h=new r),a(e,t,l,i,n,p,h);else{var v=p?p(d(e,l),o,l+"",e,t,h):void 0;void 0===v&&(v=o),s(e,l,v)}},l)}var r=i(2870),s=i(2914),o=i(2917),a=i(2919),c=i(2894),l=i(2948),d=i(2944);e.exports=n},2914:function(e,t,i){function n(e,t,i){(void 0===i||s(e[t],i))&&(void 0!==i||t in e)||r(e,t,i)}var r=i(2915),s=i(2875);e.exports=n},2919:function(e,t,i){function n(e,t,i,n,m,g,T){var V=b(e,i),S=b(t,i),_=T.get(S);if(_)return void r(e,i,_);var x=g?g(V,S,i+"",e,t,T):void 0,k=void 0===x;if(k){var O=d(S),D=!O&&h(S),C=!O&&!D&&w(S);x=S,O||D||C?d(V)?x=V:p(V)?x=a(V):D?(k=!1,x=s(S,!0)):C?(k=!1,x=o(S,!0)):x=[]:f(S)||l(S)?(x=V,l(V)?x=y(V):(!u(V)||n&&v(V))&&(x=c(S))):k=!1}k&&(T.set(S,x),m(x,S,n,g,T),T.delete(S)),r(e,i,x)}var r=i(2914),s=i(2920),o=i(2921),a=i(2924),c=i(2925),l=i(2930),d=i(2933),p=i(2934),h=i(2937),v=i(2887),u=i(2894),f=i(2939),w=i(2940),b=i(2944),y=i(2945);e.exports=n},2920:function(e,t,i){(function(e){function n(e,t){if(t)return e.slice();var i=e.length,n=l?l(i):new e.constructor(i);return e.copy(n),n}var r=i(2890),s="object"==typeof t&&t&&!t.nodeType&&t,o=s&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===s,c=a?r.Buffer:void 0,l=c?c.allocUnsafe:void 0;e.exports=n}).call(t,i(34)(e))},2921:function(e,t,i){function n(e,t){var i=t?r(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var r=i(2922);e.exports=n},2922:function(e,t,i){function n(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}var r=i(2923);e.exports=n},2924:function(e,t){function i(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}e.exports=i},2925:function(e,t,i){function n(e){return"function"!=typeof e.constructor||o(e)?{}:r(s(e))}var r=i(2926),s=i(2927),o=i(2929);e.exports=n},2926:function(e,t,i){var n=i(2894),r=Object.create,s=function(){function e(){}return function(t){if(!n(t))return{};if(r)return r(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();e.exports=s},2927:function(e,t,i){var n=i(2928),r=n(Object.getPrototypeOf,Object);e.exports=r},2934:function(e,t,i){function n(e){return s(e)&&r(e)}var r=i(2935),s=i(2932);e.exports=n},2939:function(e,t,i){function n(e){if(!o(e)||r(e)!=a)return!1;var t=s(e);if(null===t)return!0;var i=p.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&d.call(i)==h}var r=i(2888),s=i(2927),o=i(2932),a="[object Object]",c=Function.prototype,l=Object.prototype,d=c.toString,p=l.hasOwnProperty,h=d.call(Object);e.exports=n},2944:function(e,t){function i(e,t){return"__proto__"==t?void 0:e[t]}e.exports=i},2945:function(e,t,i){function n(e){return r(e,s(e))}var r=i(2946),s=i(2948);e.exports=n},2964:function(e,t,i){var n,r;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("routers/Base")],r=function(e,t,i,n){var r=n.extend({ServiceView:new i.View,initialize:function(e){e=e||{},this.cachedServiceBaseModel=e.serviceBaseModel,this.configurationLayoutViewOptions=e.configurationLayoutViewOptions,n.prototype.initialize.apply(this,arguments)},page:function(){n.prototype.page.apply(this,arguments),this.handleHash()}});return r}.apply(t,n),!(void 0!==r&&(e.exports=r))},2965:function(e,t,i){var n,r;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i("shim/splunk.util"),i(1708),i(970),i(955)],r=function(e,t,i,n,r,s,o){var a=o.extend({initialize:function(e){if(e=e||{},!e.contentViewOptions)throw"Must provide contentViewOptions";return this.serviceTemplate=e.contentViewOptions.serviceTemplate,this.sdDispatcher=e.contentViewOptions.sdDispatcher,this.sdDispatcher&&this.listenTo(this.sdDispatcher,"unlink",this._removeServiceTemplate),o.prototype.initialize.apply(this,arguments)},_removeServiceTemplate:function(){this.$(".linked-service-template",this.$el).css({display:"none"})},_onSaveStart:function(){this.childViews.dockedFooter.setErrorMessage();var e=this.model.validate(this.modelClone.attributes);if(e){var t;return t=e instanceof Array&&e.length?e.join("; "):e,void this.childViews.dockedFooter.setErrorMessage(t)}!this.modelClone.get("enabled")&&this.dockedFooterViewOptions.checkForFirstTimeSave?this._checkForFirstTimeSave():this._save()},_checkForFirstTimeSave:function(){var t="enabled";if(this.modelClone.get("isFirstTimeSaveDone"))this._save();else{var i=this.dockedFooterViewOptions.firstTimeSaveConfirmationMessage,r=new s({title:n.sprintf(e("Save %s").t(),this.modelClone.objectNameSingular),message:i,confirmButtonLabel:e("Save and Enable").t(),discardButtonLabel:e("Save").t()});r.on("confirm",function(){this.modelClone.set({isFirstTimeSaveDone:!0});var e={};e[t]=1,this.modelClone.set(e),this._save()},this),r.on("discard",function(){this.modelClone.set({isFirstTimeSaveDone:!0}),this._save()},this),r.show()}}});return a}.apply(t,n),!(void 0!==r&&(e.exports=r))},2966:function(e,t,i){var n,r;n=[i("require/underscore"),i("require/backbone"),i(960)],r=function(e,t,i){var n=i.extend({initialize:function(e){e=e||{},this.serviceTemplate=e.serviceTemplate,i.prototype.initialize.apply(this,arguments)},serviceTemplateTitle:e.template('\t\t\t\t\t<div style="float:right;padding-right:25px;padding-top:24px;" class="linked-service-template">\t\t\t\t\t\t<a href="<%= editURL %>" target="_blank" style="font-size: 20px;">\t\t\t\t\t\t\t<i class="icon-lock disable-icon"></i>\t\t\t\t\t\t\t<%- templateName %>\t\t\t\t\t\t\t<i class="icon-external"></i>\t\t\t\t\t\t</a>\t\t\t\t\t</div>\t\t\t\t'),serviceTemplateTitleReadOnly:e.template('\t\t\t\t\t<div style="float:right;padding-right:25px;padding-top:24px;"  class="linked-service-template">\t\t\t\t\t\t<span style="font-size: 20px;">\t\t\t\t\t\t\t<i class="icon-lock disable-icon"></i>\t\t\t\t\t\t\t<%- templateName %>\t\t\t\t\t\t</span>\t\t\t\t\t</div>\t\t\t\t'),render:function(){i.prototype.render.apply(this),this.serviceTemplate&&(this.readOnly?this.$el.prepend(this.serviceTemplateTitleReadOnly({templateName:this.serviceTemplate.get("title")})):this.$el.prepend(this.serviceTemplateTitle({templateName:this.serviceTemplate.get("title"),editURL:this.serviceTemplate.getEditUrl()})))}});return n}.apply(t,n),!(void 0!==r&&(e.exports=r))},2967:function(e,t,i){var n,r;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(2985),i(2986),i(2968),i(2989),i(3025),i(3004),i(2634)],r=function(e,t,i,n,r,s,o,a,c,l){var d=n.extend({renderTabs:function(){this.infoTab=new r({service:this.modelClone,ContentView:l}),this.kpiStep=new o({service:this.modelClone,ContentView:a,serviceTemplate:this.serviceTemplate,readOnly:!0}),this.dependencyStep=new c({service:this.modelClone,readOnly:!0}),this.settingsTab=new s({service:this.modelClone,readOnly:!0})}});return d}.apply(t,n),!(void 0!==r&&(e.exports=r))},2985:function(e,t,i){var n,r;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(129),i(232),i(2358),i(2988),i(2986),i(2968),i(2989),i(3004),i(2635),i(3022),i(3023)],r=function(e,t,i,n,r,s,o,a,c,l,d,p,h){var v=e.template(h,null,{variable:"vars"}),u=o.extend({EntitiesTabView:a,KpiTabView:l,DependencyTabView:d,ServiceSettingsTabView:c,events:{'shown.bs.tab a[data-toggle="tab"]':"onTabShown",kpiselected:"_onKpiSelected"},initialize:function(e){this.serviceTemplate=e.serviceTemplate,this.sdDispatcher=e.sdDispatcher,o.prototype.initialize.apply(this,arguments),this.renderTabs(),this.childViews.tabViews.tabs=[this.infoTab,this.kpiStep,this.dependencyStep,this.settingsTab]},render:function(){this.$el.html(v({_:e},{variable:"vars"}));var t=this.$(".service-tab-container");return t.append(this.childViews.tabViews.render().$el),this.$(".tab-label:first",t).tab("show"),this},renderTabs:function(){this.infoTab=new this.EntitiesTabView({service:this.modelClone,ContentView:p,serviceTemplate:this.serviceTemplate}),this.kpiStep=new this.KpiTabView({service:this.modelClone,serviceTemplate:this.serviceTemplate,sdDispatcher:this.sdDispatcher}),this.dependencyStep=new this.DependencyTabView({service:this.modelClone}),this.settingsTab=new c({service:this.modelClone})},showEntitiesTab:function(){this.showTab("info")},showSettingsTab:function(){this.showTab("settings")},showKPITab:function(e){this.showTab("kpi"),this.kpiStep.getContentView().selectKpi(e)},showDependencyTab:function(){this.showTab("dependency")},getUrl:function(e){var t=null,i=this.getUrlString(e,this.kpiStep.getTabId(),this.kpiStep.getContentView().getSelectedKpiId());return e===this.dependencyStep.getTabId()&&(t=this.dependencyStep.getContentView().getOtherServiceId(),t&&(i+="/"+t)),i},refreshModel:function(){this.infoTab.refreshModel(),this.kpiStep.refreshModel(),this.dependencyStep.refreshModel(),this.settingsTab.refreshModel()},_onKpiSelected:function(){this.trigger("kpiselected")}});return u}.apply(t,n),!(void 0!==r&&(e.exports=r))},2986:function(e,t,i){var n,r;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(2987),i(2635)],r=function(e,t,i,n,r){var s=n.extend({initialize:function(e){if(e=e||{},!e.service)throw"Must provide service";e.tabId="info",e.contentViewOptions={service:e.service,serviceTemplate:e.serviceTemplate},e.ContentView||(e.ContentView=r),n.prototype.initialize.apply(this,arguments)}});return s}.apply(t,n),!(void 0!==r&&(e.exports=r))},2989:function(e,t,i){var n,r;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(2365),i(2990),i(2991)],r=function(e,t,i,n,r,s){var o=r.extend({initialize:function(e){if(e=e||{},!e.service)throw"Must provide service";this.readOnly=e.readOnly,this.service=e.service,this.serviceTemplate=e.serviceTemplate,this.sdDispatcher=e.sdDispatcher,e.ContentView=e.ContentView||s,e.contentViewOptions={service:this.service,readOnly:this.readOnly,serviceTemplate:this.serviceTemplate,sdDispatcher:this.sdDispatcher},r.prototype.initialize.apply(this,arguments)}});return o}.apply(t,n),!(void 0!==r&&(e.exports=r))},3004:function(e,t,i){var n,r;n=[i("require/underscore"),i("shim/jquery"),i("require/backbone"),i(2365),i(3005)],r=function(e,t,i,n,r){var s=n.extend({initialize:function(t){t=t||{},t.tabId="dependency",t.tabLabel=e("Service Dependencies").t(),t.ContentView=r,t.contentViewOptions={service:t.service,isReadOnly:t.readOnly},n.prototype.initialize.apply(this,arguments)}});return s}.apply(t,n),!(void 0!==r&&(e.exports=r))},3005:function(e,t,i){var n,r;n=[i("require/underscore"),i("shim/jquery"),i(2788),i(3006)],r=function(e,t,i,n){return i.extend({initialize:function(e){this.service=e.service||null,this.isReadOnly=e.isReadOnly||!1,this.children={views:{},controls:{}},this.children.views.dependencyView=new n({service:this.service,isReadOnly:this.isReadOnly})},value:"dependency",label:"Dependency",render:function(){return this.$el.html(this.children.views.dependencyView.render().el),this},validate:function(e){var i=t.Deferred();return e===this&&i.reject(),i.resolve(),i},refreshModel:function(){this.children.views.dependencyView.render()},save:function(){return this.children.views.dependencyView?this.children.views.dependencyView.save():t.Deferred().resolve()},getOtherServiceId:function(){return this.otherServiceId},setOtherServiceId:function(e){this.otherServiceId=e}})}.apply(t,n),!(void 0!==r&&(e.exports=r))},3022:function(e,t){e.exports='<div class="service-info-header"></div>\n<div class="service-tab-container"></div>'},3023:function(e,t,i){var n=i(3024);"string"==typeof n&&(n=[[e.id,n,""]]);i(15)(n,{});n.locals&&(e.exports=n.locals)},3024:function(e,t,i){t=e.exports=i(14)(),t.push([e.id,".inline-text-control-label[name=title]{font-size:24px}.inline-text-control{padding:10px 0 0 10px}.service-definition-body .tab-layout-container{display:block}.inline-text-control-edit-trigger,.inline-text-control-label{line-height:24px}.service-definition-body td{overflow:hidden;text-overflow:ellipsis}.first-time-save-message{display:block;word-wrap:break-word}",""])},3025:function(e,t,i){var n,r;n=[i("require/underscore"),i(2494),i(2979),i(2991)],r=function(e,t,i,n){var r=n.extend({KpiMainContentView:t,ServiceHealthView:i,renderNoSelection:function(){this.$mainContentEl.text(e("Select a KPI").t())}});return r}.apply(t,n),!(void 0!==r&&(e.exports=r))}});